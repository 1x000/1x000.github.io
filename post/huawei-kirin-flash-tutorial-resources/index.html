<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="华为麒麟教程、华为解锁，华为解锁码，解BL锁，BL解锁码，Bootloader解锁，刷机资源和注意事项解温控"><meta name=keywords content="华为手机,Android,折腾手机,刷机,解温控,华为解锁，华为解锁码，解BL锁，BL解锁码，Bootloader解锁"><title>华为麒麟折腾刷机最全教程与资源解锁BL锁 2023</title><link rel=canonical href=https://blog.xpdbk.com/post/huawei-kirin-flash-tutorial-resources/><link rel=stylesheet href=/scss/style.min.246444ddc0a6acd9fca23fec6621cd2418417920e58a38bffd2d55775dde900b.css><script>function addLoadEvent(e){var t=window.onload;typeof window.onload!="function"?window.onload=e:window.onload=function(){t(),e()}}</script><meta property="og:title" content="华为麒麟折腾刷机最全教程与资源解锁BL锁 2023"><meta property="og:description" content="华为麒麟教程、华为解锁，华为解锁码，解BL锁，BL解锁码，Bootloader解锁，刷机资源和注意事项解温控"><meta property="og:url" content="https://blog.xpdbk.com/post/huawei-kirin-flash-tutorial-resources/"><meta property="og:site_name" content="LEl_FENG的博客"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="刷机"><meta property="article:tag" content="华为刷机"><meta property="article:tag" content="Android"><meta property="article:published_time" content="2023-07-26T11:57:50+07:00"><meta property="article:modified_time" content="2023-10-01T15:09:39+00:00"><meta property="og:image" content="https://blog.xpdbk.com/post/huawei-kirin-flash-tutorial-resources/photo_2023-07-27_15-29-04.webp"><meta name=twitter:site content="@HuaweiH45278254"><meta name=twitter:creator content="@HuaweiH45278254"><meta name=twitter:title content="华为麒麟折腾刷机最全教程与资源解锁BL锁 2023"><meta name=twitter:description content="华为麒麟教程、华为解锁，华为解锁码，解BL锁，BL解锁码，Bootloader解锁，刷机资源和注意事项解温控"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.xpdbk.com/post/huawei-kirin-flash-tutorial-resources/photo_2023-07-27_15-29-04.webp"><link rel="shortcut icon" href=/favicon.ico><script async src=https://blog0.xpdbk.com/blog123 data-website-id=9551974d-ffe1-4197-8140-2019cfad63cb></script><meta name=referrer content="no-referrer"><style>.blur{color:transparent;text-shadow:0 0 8px rgba(0,0,0,.5)}.blur:hover{color:transparent;text-shadow:0 0 0 #000}.shady{color:#000;font-weight:700;box-shadow:0 -20px #000 inset;transition:all .3s ease}.shady:hover{font-weight:700;color:#fff;box-shadow:0 -20px #000 inset}</style><script>function confirmLink(e){var t=e.href,n=`您即将离开当前网站,前往:

${t}

确定继续前往?`;confirm(n)&&window.open(t)}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll('a[href^="http"]');for(let t of e)/^https:\/\/blog\.xpdbk\.com/.test(t.href)||t.addEventListener("click",e=>{e.preventDefault(),confirmLink(t)})})</script><link rel=apple-touch-icon sizes=180x180 href=https://cdn.jsdelivr.net/gh/1x000/zdzy/tp/avatar.jpg></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><div id=article-toolbar style=position:sticky;top:5px;z-index:1000><a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>返回</span></a></div><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#华为麒麟折腾最全教程与资源>华为麒麟折腾最全教程与资源</a></li><li><a href=#不root能做的事情>不root能做的事情</a><ol><li><a href=#如何不root干掉鸿蒙系统的温控>如何不root干掉鸿蒙系统的温控</a></li></ol></li><li><a href=#华为麒麟刷机最全教程与资源>华为麒麟刷机最全教程与资源</a></li><li><a href=#前言>前言</a></li><li><a href=#适用机型>适用机型</a></li><li><a href=#实际操作>实际操作</a><ol><li><ol><li><a href=#开始之前请备份好用户个人数据>开始之前，请备份好用户个人数据。</a></li><li><a href=#1-root>1. ROOT</a></li><li><a href=#2-获取解锁码>2. 获取解锁码</a></li><li><a href=#3-解锁bootloader>3. 解锁BootLoader</a></li><li><a href=#4-关于回锁>4. 关于回锁</a></li><li><a href=#好了至此关于解锁的部分差不多都讲完了下面简单讲讲回退的操作知道了的老鸟也可以不用看了>好了，至此，关于解锁的部分差不多都讲完了，下面简单讲讲回退的操作，知道了的老鸟也可以不用看了</a></li></ol></li></ol></li><li><a href=#版本回退>版本回退</a><ol><li><ol><li><a href=#1-关于回退>1. 关于回退</a></li><li><a href=#2rom包以及中转包获取>2.ROM包以及中转包获取</a></li><li><a href=#3-回退操作>3. 回退操作</a></li></ol></li></ol></li><li><a href=#后语>后语</a></li><li><a href=#下载>下载</a></li><li><a href=#用户手册>用户手册</a><ol><li><a href=#确保您的设备兼容>确保您的设备兼容</a></li><li><a href=#进入内部>进入内部</a></li><li><a href=#进入下载模式>进入下载模式</a></li><li><a href=#解锁引导加载程序>解锁引导加载程序</a></li></ol></li><li><a href=#怎么运行的>怎么运行的</a></li><li><a href=#测试设备>测试设备</a></li><li><a href=#备择方案>备择方案</a><ol><li><ol><li><a href=#hcu客户端>HCU客户端</a></li></ol></li></ol></li><li><a href=#oem解锁是什么>OEM解锁是什么</a></li><li><a href=#整理一下折腾emui的一些东西大核优先调整温控修改频率>整理一下折腾EMUI的一些东西，大核优先，调整温控，修改频率</a></li><li><a href=#华为平板c5bzt-w09拆机刷机教程-定制rom硬刷>华为平板C5(BZT-W09)拆机刷机教程 定制rom硬刷</a></li><li><a href=#适用于华为平板c5bzt-w09的双系统>适用于华为平板C5(BZT-W09)的双系统</a></li><li><a href=#华为平板c5升级鸿蒙>华为平板C5升级鸿蒙</a></li><li><a href=#华为麒麟开机流程>华为麒麟开机流程：</a></li><li><a href=#recovery模式>recovery模式</a></li><li><a href=#fastboot模式>Fastboot模式</a></li><li><a href=#erecovery模式>eRecovery模式</a></li><li><a href=#下载模式vcom-模式>下载模式（VCOM 模式）</a></li><li><a href=#华为手机折腾>华为手机折腾</a></li><li><a href=#前言-1>前言</a></li><li><a href=#解锁bootloader>解锁bootloader</a></li><li><a href=#升级到emui8>升级到EMUI8</a></li><li><a href=#刷入twrp>刷入TWRP</a></li><li><a href=#刷入emui8>刷入EMUI8</a></li><li><a href=#使用更好的twrp>使用更好的TWRP</a></li><li><a href=#救砖>救砖</a></li><li><a href=#升级到emui9>升级到EMUI9</a></li><li><a href=#刷入类原生>刷入类原生</a></li><li><a href=#刷入面具>刷入面具</a></li><li><a href=#参考>参考</a></li><li><a href=#一-解bl锁困难>一 ，解BL锁困难</a></li><li><a href=#二bl解锁不完全>二，BL解锁不完全</a></li><li><a href=#三不要轻易动data>三，不要轻易动data</a></li><li><a href=#四官方包难找>四，官方包难找</a></li><li><a href=#五救砖困难>五，救砖困难</a></li><li><a href=#六刷第三方包容易变砖>六，刷第三方包容易变砖</a></li><li><a href=#七华为的各个模式>七，华为的各个模式</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/huawei-kirin-flash-tutorial-resources/><img src=/post/huawei-kirin-flash-tutorial-resources/photo_2023-07-27_15-29-04_hue395fc71fe8d6683f282cef0c48e0419_9666_800x0_resize_q75_h2_box_2.webp srcset="/post/huawei-kirin-flash-tutorial-resources/photo_2023-07-27_15-29-04_hue395fc71fe8d6683f282cef0c48e0419_9666_800x0_resize_q75_h2_box_2.webp 800w, /post/huawei-kirin-flash-tutorial-resources/photo_2023-07-27_15-29-04_hue395fc71fe8d6683f282cef0c48e0419_9666_1600x0_resize_q75_h2_box_2.webp 1600w" width=800 height=614 loading=lazy alt="Featured image of post 华为麒麟折腾刷机最全教程与资源解锁BL锁 2023"></a></div><div class=article-details><header class=article-category><a href=/categories/%E6%8A%98%E8%85%BE%E6%89%8B%E6%9C%BA/ style=background-color:#0k9d8f;color:#fff>手机折腾日记</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/huawei-kirin-flash-tutorial-resources/>华为麒麟折腾刷机最全教程与资源解锁BL锁 2023</a></h2><h3 class=article-subtitle>华为麒麟教程、华为解锁，华为解锁码，解BL锁，BL解锁码，Bootloader解锁，刷机资源和注意事项解温控</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2023-07-26</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-pencil" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4L18.5 9.5a1.5 1.5.0 00-4-4L4 16v4"/><path d="M13.5 6.5l4 4"/></svg><time class=article-words>文章字数: 35554 字</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 71 分钟</time></div></footer></div></header><section class=article-content><section class="toc toc--inline"><h2>目录</h2><div><nav id=TableOfContents><ol><li><a href=#华为麒麟折腾最全教程与资源>华为麒麟折腾最全教程与资源</a></li><li><a href=#不root能做的事情>不root能做的事情</a><ol><li><a href=#如何不root干掉鸿蒙系统的温控>如何不root干掉鸿蒙系统的温控</a></li></ol></li><li><a href=#华为麒麟刷机最全教程与资源>华为麒麟刷机最全教程与资源</a></li><li><a href=#前言>前言</a></li><li><a href=#适用机型>适用机型</a></li><li><a href=#实际操作>实际操作</a><ol><li><ol><li><a href=#开始之前请备份好用户个人数据>开始之前，请备份好用户个人数据。</a></li><li><a href=#1-root>1. ROOT</a></li><li><a href=#2-获取解锁码>2. 获取解锁码</a></li><li><a href=#3-解锁bootloader>3. 解锁BootLoader</a></li><li><a href=#4-关于回锁>4. 关于回锁</a></li><li><a href=#好了至此关于解锁的部分差不多都讲完了下面简单讲讲回退的操作知道了的老鸟也可以不用看了>好了，至此，关于解锁的部分差不多都讲完了，下面简单讲讲回退的操作，知道了的老鸟也可以不用看了</a></li></ol></li></ol></li><li><a href=#版本回退>版本回退</a><ol><li><ol><li><a href=#1-关于回退>1. 关于回退</a></li><li><a href=#2rom包以及中转包获取>2.ROM包以及中转包获取</a></li><li><a href=#3-回退操作>3. 回退操作</a></li></ol></li></ol></li><li><a href=#后语>后语</a></li><li><a href=#下载>下载</a></li><li><a href=#用户手册>用户手册</a><ol><li><a href=#确保您的设备兼容>确保您的设备兼容</a></li><li><a href=#进入内部>进入内部</a></li><li><a href=#进入下载模式>进入下载模式</a></li><li><a href=#解锁引导加载程序>解锁引导加载程序</a></li></ol></li><li><a href=#怎么运行的>怎么运行的</a></li><li><a href=#测试设备>测试设备</a></li><li><a href=#备择方案>备择方案</a><ol><li><ol><li><a href=#hcu客户端>HCU客户端</a></li></ol></li></ol></li><li><a href=#oem解锁是什么>OEM解锁是什么</a></li><li><a href=#整理一下折腾emui的一些东西大核优先调整温控修改频率>整理一下折腾EMUI的一些东西，大核优先，调整温控，修改频率</a></li><li><a href=#华为平板c5bzt-w09拆机刷机教程-定制rom硬刷>华为平板C5(BZT-W09)拆机刷机教程 定制rom硬刷</a></li><li><a href=#适用于华为平板c5bzt-w09的双系统>适用于华为平板C5(BZT-W09)的双系统</a></li><li><a href=#华为平板c5升级鸿蒙>华为平板C5升级鸿蒙</a></li><li><a href=#华为麒麟开机流程>华为麒麟开机流程：</a></li><li><a href=#recovery模式>recovery模式</a></li><li><a href=#fastboot模式>Fastboot模式</a></li><li><a href=#erecovery模式>eRecovery模式</a></li><li><a href=#下载模式vcom-模式>下载模式（VCOM 模式）</a></li><li><a href=#华为手机折腾>华为手机折腾</a></li><li><a href=#前言-1>前言</a></li><li><a href=#解锁bootloader>解锁bootloader</a></li><li><a href=#升级到emui8>升级到EMUI8</a></li><li><a href=#刷入twrp>刷入TWRP</a></li><li><a href=#刷入emui8>刷入EMUI8</a></li><li><a href=#使用更好的twrp>使用更好的TWRP</a></li><li><a href=#救砖>救砖</a></li><li><a href=#升级到emui9>升级到EMUI9</a></li><li><a href=#刷入类原生>刷入类原生</a></li><li><a href=#刷入面具>刷入面具</a></li><li><a href=#参考>参考</a></li><li><a href=#一-解bl锁困难>一 ，解BL锁困难</a></li><li><a href=#二bl解锁不完全>二，BL解锁不完全</a></li><li><a href=#三不要轻易动data>三，不要轻易动data</a></li><li><a href=#四官方包难找>四，官方包难找</a></li><li><a href=#五救砖困难>五，救砖困难</a></li><li><a href=#六刷第三方包容易变砖>六，刷第三方包容易变砖</a></li><li><a href=#七华为的各个模式>七，华为的各个模式</a></li></ol></nav></div></section><h2 id=华为麒麟折腾最全教程与资源>华为麒麟折腾最全教程与资源</h2><blockquote><p>欢迎广大大神在评论区发表踩坑经验和补全本篇文章的缺失资源和没有的文章（最全两个字是大家努力的成果）</p><p>本篇文章我将慢慢完善排版（别急）</p><p>本文一大部分是借鉴了互联网的其他文章，当然了是为了我自己的方便所以集合的所有我能搜到的文章</p><p><strong>刷机有风险，操作需谨慎，如果因为各种因素导致手机变砖无法开机，本教程概不负责，望悉知</strong></p></blockquote><h2 id=不root能做的事情>不root能做的事情</h2><h3 id=如何不root干掉鸿蒙系统的温控>如何不root干掉鸿蒙系统的温控</h3><blockquote><p>不需要root也能把华为手机给折腾一下</p></blockquote><hr><p><strong>方法一：鸿蒙工具箱</strong></p><p><strong>首先需要一台电脑和一部手机</strong>（本人的是P10）</p><p><strong>一</strong>、电脑下载鸿蒙工具箱：<a class=link href=https://pvphack.lanzoue.com/ive2U13moi1a target=_blank rel=noopener>鸿蒙工具箱下载</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>密码:<code>faz0</code></p><p>把文件下载并解压</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-99e841fb47224e7810a4af6a2f47ca6e_r.webp width=948 height=546 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-99e841fb47224e7810a4af6a2f47ca6e_r_hu90dc243cd6592a7ead387ec35f3587d1_51910_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-99e841fb47224e7810a4af6a2f47ca6e_r_hu90dc243cd6592a7ead387ec35f3587d1_51910_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=173 data-flex-basis=416px></p><p>二、打开设置-系统-关于手机，找到版本号连点几下，提示出于开发者模式返回设置-系统，发现多了个开发人员选项，在里面<strong>找到usb调试开启</strong></p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-29e3fb6741297223e3c7cab802eabcb2_r.webp width=720 height=1280 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-29e3fb6741297223e3c7cab802eabcb2_r_hue00b9bbe97d24b317f5d9c5931d71a53_25610_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-29e3fb6741297223e3c7cab802eabcb2_r_hue00b9bbe97d24b317f5d9c5931d71a53_25610_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=56 data-flex-basis=135px></p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-3a3391a301cc309aa2fc833b94f7feeb_r.webp width=720 height=1280 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-3a3391a301cc309aa2fc833b94f7feeb_r_hue8bd0d48e457a0bb39a6dcac742e893e_48616_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-3a3391a301cc309aa2fc833b94f7feeb_r_hue8bd0d48e457a0bb39a6dcac742e893e_48616_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=56 data-flex-basis=135px></p><p>三、电脑通过数据线连接手机（当然你会无线adb也可）可能会蹦出来华为手机助手，关掉即可。找到鸿蒙工具箱的“鸿蒙工具箱”并打开</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-0fb2794adc6870eda9fbc0f7d119d1aa_r.webp width=792 height=599 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-0fb2794adc6870eda9fbc0f7d119d1aa_r_hu76b63fc1f72bb49c4be975ca060207d9_75204_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-0fb2794adc6870eda9fbc0f7d119d1aa_r_hu76b63fc1f72bb49c4be975ca060207d9_75204_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=132 data-flex-basis=317px></p><p><strong>键入“-14”并回车</strong></p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-b32caa4fac808885a4e0e98c9c53382a_r.webp width=792 height=599 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-b32caa4fac808885a4e0e98c9c53382a_r_hu900fd636d40bc6656710b0eb7fe206fb_50598_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-b32caa4fac808885a4e0e98c9c53382a_r_hu900fd636d40bc6656710b0eb7fe206fb_50598_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=132 data-flex-basis=317px></p><p>工具箱里面还有许多功能大家可以根据个人喜好调整，一定要记得调整完后<strong>重启一下手机</strong>，否则可能不生效。</p><p><strong>方法二：通过冰箱等冻结软件程序</strong></p><p><strong>需要电脑、手机</strong></p><p>手机下载“冰箱”<a class=link href=https://www.coolapk.com/apk/com.catchingnow.icebox target=_blank rel=noopener>冰箱 IceBox：自动冻结・省电神器</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>手机打开软件提示你选择哪种方式使用，以下演示为普通adb模式</p><p>电脑下载冰箱激活器<a class=link href=https://iceboxdoc.catchingnow.cn/files/%E5%86%B0%E7%AE%B1%E6%BF%80%E6%B4%BB%E5%99%A8-Windows.zip target=_blank rel=noopener>冰箱激活器下载链接</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>解压后运行冰箱激活器</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-3f9c309cda7ced312330668ca389197f_r.webp width=948 height=546 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-3f9c309cda7ced312330668ca389197f_r_hud532835064c814e8078661f51ef4e013_46172_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-3f9c309cda7ced312330668ca389197f_r_hud532835064c814e8078661f51ef4e013_46172_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=173 data-flex-basis=416px></p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-f30138ab4d6779f2cbb82cc72852cf48_720w.webp width=286 height=495 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-f30138ab4d6779f2cbb82cc72852cf48_720w_hu222567d246bb5589a8a84bfe0e1cc17c_26518_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-f30138ab4d6779f2cbb82cc72852cf48_720w_hu222567d246bb5589a8a84bfe0e1cc17c_26518_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=57 data-flex-basis=138px></p><p>选择激活普通ADB模式（此方法也需要开启开发者模式打开adb调试，否则会显示无设备连接）</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-818f57e093b4056fb6cccf77f3715fa9_r.webp width=720 height=1280 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-818f57e093b4056fb6cccf77f3715fa9_r_hu242a9b3aff373d9a87db54b5e028ad9e_22066_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-818f57e093b4056fb6cccf77f3715fa9_r_hu242a9b3aff373d9a87db54b5e028ad9e_22066_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=56 data-flex-basis=135px></p><p>同时手机上收到通知，点按确认即可</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-75216b76380ac59e5e6a18ea62a3ad45_r.webp width=720 height=1280 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-75216b76380ac59e5e6a18ea62a3ad45_r_hu9d326dafcbe3639b3c7d62a858eb3b57_41248_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-75216b76380ac59e5e6a18ea62a3ad45_r_hu9d326dafcbe3639b3c7d62a858eb3b57_41248_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=56 data-flex-basis=135px></p><p>激活成功电脑提示</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-93090de6430ce6390ac8a08f7cc5e75e_720w.webp width=411 height=492 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-93090de6430ce6390ac8a08f7cc5e75e_720w_hu292f0f586c80a480ee77a0f6d2976375_33816_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-93090de6430ce6390ac8a08f7cc5e75e_720w_hu292f0f586c80a480ee77a0f6d2976375_33816_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=83 data-flex-basis=200px></p><p>在手机上操作，点击APP</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-40eb3cdff1210644603b75b00bf278bf_r.webp width=720 height=1280 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-40eb3cdff1210644603b75b00bf278bf_r_hufc1126b31de81dd44669f7c829dd7fa0_31690_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-40eb3cdff1210644603b75b00bf278bf_r_hufc1126b31de81dd44669f7c829dd7fa0_31690_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=56 data-flex-basis=135px></p><p>选择系统</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-01781328dd62319947cbf8c0e86b8e7a_r.webp width=720 height=1280 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-01781328dd62319947cbf8c0e86b8e7a_r_hu8a57dbbf868f057ad53bba021219b774_20784_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-01781328dd62319947cbf8c0e86b8e7a_r_hu8a57dbbf868f057ad53bba021219b774_20784_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=56 data-flex-basis=135px></p><p>找到两个程序如图并冻结</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-2973d2f8a768188fa2cb7db95f5a9f1e_r.webp width=720 height=1280 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-2973d2f8a768188fa2cb7db95f5a9f1e_r_huda0a910f0869f5617972d34fd690305c_57362_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-2973d2f8a768188fa2cb7db95f5a9f1e_r_huda0a910f0869f5617972d34fd690305c_57362_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=56 data-flex-basis=135px></p><p><img src=/post/huawei-kirin-flash-tutorial-resources/v2-a927a139af00b8f98bbe5ea90b117662_r.webp width=720 height=1280 srcset="/post/huawei-kirin-flash-tutorial-resources/v2-a927a139af00b8f98bbe5ea90b117662_r_hube4cd41142339a7a4ad9eb71b47cfbcc_55850_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/v2-a927a139af00b8f98bbe5ea90b117662_r_hube4cd41142339a7a4ad9eb71b47cfbcc_55850_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy class=gallery-image data-flex-grow=56 data-flex-basis=135px></p><p>冻结后重启手机即可</p><p><strong>实测鸿蒙下解温控后CPU（麒麟960）最高70到80度，提前做好散热准备。</strong></p><p><strong>鸿蒙下通过普通ADB激活冰箱的持续时间很短，可能锁屏后就需要重新激活，所以尽快冻结软件。</strong></p><h2 id=华为麒麟刷机最全教程与资源>华为麒麟刷机最全教程与资源</h2><p><img src=/post/huawei-kirin-flash-tutorial-resources/fengmian.webp width=1032 height=169 srcset="/post/huawei-kirin-flash-tutorial-resources/fengmian_huaa2c091c739b88d736bd257b2b42657e_24576_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/fengmian_huaa2c091c739b88d736bd257b2b42657e_24576_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=fengmian.webp class=gallery-image data-flex-grow=610 data-flex-basis=1465px></p><blockquote><p>整理一下我这几个月来刷机的事情，最近一直想写一篇完整的教程，全网最完整齐全的教程在后面。 文章中有部分是从网上复制黏贴的，侵删。 我对刷机的认识是在一部金立手机上开始的，内个时候，奇兔还很善良，免费…</p></blockquote><hr><p>整理一下我这几个月来刷机的事情，最近一直想写一篇完整的教程，全网最完整齐全的教程在后面。</p><p>我对刷机的认识是在一部金立手机上开始的，内个时候，奇兔还很善良，我免费刷了root和rec，后来刷xposed刷成半砖，下载的救砖包用奇兔recovery刷成死循环。当时我还不知道fastboot刷机，所以就把它扔掉了。</p><p>然后就是陪伴我5年的华为P10，我对它有很特殊的感情，这也是现在我为什么废这么大功夫也要把黑砖救回来。最开始是因为打游戏太卡了，上网上找教程解掉了温控，还写了一篇教程，但是实在是写的太简陋了，非常不全面。再后来，我知道有root就可以为所欲为了，所以，为了更好的性能，我开始尝试解锁bl锁。当时我还不知道酷安有详细的教程，在必应百度什么都找不到完整的教程（主要是降级emui5难），实在是不得已，去马云家30大洋请人远程解锁的，技术确是不错，远程也捣鼓了不少时间，差不多快一个小时，确实是对得起这个价格。但是现在回过来一看，拆机短接com1.0也就十分多钟的事。</p><p>解完了bl给我降到了emui5，我直接无脑上了twrp，但是emui5的界面实在是看着不顺眼，我又想升到emui8，但是官方的otg升级重启后进到twrp刷不进去，我又不知道怎么卸载掉twrp，根本无法升级emui8，于是我就在emui5用了好长时间。解锁了bl，刷入magisk，由于有惨痛的前车之鉴，我就没有尝试刷过xposed。刷进去了magisk就可以为所欲为了，我就安排上了各种的搞机软件：MT管理器，镧系统工具箱，冰箱，黑域，幸运破解器，内核工具，内核调效，3C一体式工具箱等等，还有老铁麒麟960调度（这个调度说是只适用emui5，但是在其他的emui也有一定的作用，但是聊胜于无了）。</p><p>后来我手贱在scene中找到了一个叫“菜汪开机动画”的magisk模块，然后刷入重启后开机动画也没有改变，反而是一点状态栏就会黑屏，桌面反复重启无解，甚至收到消息就会黑屏，是在是无法忍耐，在rec双清了，开机后卡在系统的欢迎界面，下一步无法点击，但是可以截屏什么的。后来我就找到了HuRupdate华为强刷工具，可以实现在recovery强刷华为的刷机包。</p><p>当时的刷机包是从官方升级的地方复制的，在下载完重启的一瞬间打断施法，进文件管理找到了下载的三个zip压缩包复制了一份，但是似乎不同版本的emui升级文件存放的地方不一样后来我就再也没有从官方升级获取刷机包。其实也可以在电脑端华为手机助手找到刷机包，手机连上电脑，系统升级在下载完推送到手机的一瞬间在系统监视器中把华为手机助手这个进程给挂起（原理是不给它cpu时间）然后进文档里面有华为手机助手创建的文件夹，里面就有刚刚下载的刷机包，找找就行，但是从手机官方升级的刷机包有三个zip压缩包，电脑上的只有两个zip压缩包，但是好像都是能用的。</p><p>所以我就在emui5twrp中用HuRupdate把三个压缩包刷进去了，但是在改名的时候我偷懒复制黏贴多了一个".zip"刷完当场就卡在了第一屏，这个问题困扰了我一个月的时间，主要是当时三个刷机包刷进去了两个，剩下的一个因为名字改错了没有刷进去，刷完后twrp也没有了，尝试刷emui5的twrp也刷不进去，大概是因为升级了一半只能刷emui8的twrp。后来我终于刷进去了emui8的twrp，重新刷了一遍刷机包，然后就开机了。也在emui8用了一段时间，当时我是对不能otg升级怕了，于是一路升到了最后一个版本的emui8，用了一段时间，看到第三方的内核，眼馋但是我最后一个版本的emui8根本没有适配，看到了emui9也有内核，心一横，升到了emui9。终于回到了最熟悉的系统界面。</p><p>然后我知道了刷rec要用fastboot flash recovery_ramdisk XXXX.img，也知道了emui9没有boot分区（话说华为的分区是一点也不按照安卓常理来啊），刷magisk只能刷到recovery，在magisk官方介绍知道了如何把twrp和magisk刷到一起（也就是magisk修补recovery），通过按组合键的长短决定是进带有magisk的系统还是进twrp（不怎么好用，但是其实是可以进到twrp的，主要是不知道什么时候长按）。</p><p>但是因为官方包的问题，在emui9通过recovery启动带有magisk的系统后，屏幕两侧有一部分不能进行点击操作，但是检验屏幕是没有不能触摸的地方的，如果进行滑动操作从不能触摸的部分滑到可以触摸的部分就是一个有效的操作。如果进入了不含magisk的系统就一点问题也没有。我找到了@麦麦观饭询问了这个问题，得到了一个magisk模块，但是发现刷进去了并没有什么用处，这个问题也被我搁下了不了了之。</p><p>后来就听说了刷类原生解决一切问题，忍不住刷了havoc的系统，这样一个原本最高支持安卓9的手机就成功跑上了安卓11。刷类原生给我诱惑最大的是屏幕下方的小横条，P10下面的返回键设计的太不合理了，不能快速切屏，小横条就人性化多了。但是刷完后发现没有声音！扬声器和麦克风都不能用，但是接入了耳机就可以正常使用，这实在是给我带来了很大的困扰，另外发热量也很奇怪，刷完后更烫了，我感觉可能是有问题，想要进行降级完再升级的操作，这样就可以回到官方的系统。我通过以前的twrp备份（一样是emui9）刷入了备份的所有分区，开机后却不能连接上电脑的华为手机助手，无奈之下只能进recovery用HuRupdate进行从emui9降级emui8的操作，很“幸运”，刷完后没有清分区啥的就直接重启了，很快啊，黑砖了。无论怎么按任何键组合键都没有任何反应，充电也没有快充了（充电宝不显示快充），屏幕上方的呼吸灯也不会亮，屏幕就从来都没有量过，震动也没有震过。这下就没有办法了，连fastboot、recovery、erecovery都进不去怎么整？</p><p>后来意外发现了手机连接电脑会自动进入fastboot模式，但是无论怎么刷rec，怎么进，都只能在fastboot模式，我怀疑是降级时吧bootloader弄坏了（实际上不是），在fastboot下不能刷BootLoader，原因是通过解锁码解锁的bootloader只是用户级的bl，只能刷十分有限的几个分区，只有工厂级的bl才能有更大的权限。后来也在酷安里面看到了麒麟深刷。由于不亮屏没有黄字，刷机时recovery三个能刷进去，erecovery的三个一个也刷不进去，又怀疑到了erecovery上面。但是用户级的bl实在不给力，刷不进去就没有办法。只能拆机短接触点进入COM 1.0端口刷入底层，用的是@某贼的“猎人华为单机破解版（一键启动增强版+扩展工具箱2022）”但是发现在刷入底层后重启后出现device failed enumeration的问题，无法识别的usb设备，插拔数据线后确实是进去了fastboot，但是是普通的fastboot，并没有刷其他分区的权限。这个地方也困扰了我很长时间，直到了我看到PotatoNV也可以刷底层解工厂级fastboot锁，正好麒麟960是最后一代支持的soc，我尝试了一下，啪的一下很快啊，好用了。可能是因为我没有勾选刷入后重启，它就是解开了工厂级的fastboot锁。</p><p>然后用猎人工具箱刷入了emui8的小包大包，开机，亮黄字了，也有震动了，对我来说就是天籁之音，虽然还是进不了系统。大概是因为erecovery三个包刷进去两个剩下了一个erecovery的kernel刷不进去，这个时候手机里面的erecovery内核是emui9的，身体是emui8的，不知道为什么。后来知道了华为在某个版本加入了降级锁防回滚，当时是emui9降8，于是我刷入了emui9的包，很好，起码进去了erecovery，这下就基本没有问题了，先低级格式化一遍，然后，啪的一下，很快啊，进系统了。我是的各项功能都还完好，最主要的是没有刷工厂包，也没有掉基带也没有丢失序列号，也不用忍受工厂包不可逆的各项改变。</p><p>既然救回来了，当然要刷类原生了啊。刷是刷进去了，但是进系统不能访问内部储存，然后进twrp双清，没有用，把data分区格式化了，又是用twrp修复各个分区啥的，反正最后弄好了，好家伙，又是老问题，屏幕两侧无法触摸，这次就比较流氓了，无论有没有magisk都无法触摸，还有扬声器麦克风都用不了了。没办法，就这样搁着吧。</p><p>差不多就是这些了，下面是教程环节。以下的教程基本都需要一台windows电脑和数据线，手机</p><p><strong>首先是最最最基本的解温控，不需要root</strong></p><p>电脑打开cmd，adb连接上手机，可以用adb devices和fastboot devices检验有没有adb和fastboot设备。然后卸载两个系统软件（实际上是停用，不是真正的卸载，可以恢复的）输入adb shell pm uninstall -k &ndash;user 0 com.huawei.iaware，回车。输入adb shell pm uninstall -k &ndash;user 0 com.huawei.powergenie，回车。还有一个卸载了会调节不了分辨率，可以试试，adb shell pm uninstall -k &ndash;user 0 com.huawei.android.hwaps。如果忍受不了发热和想提升续航（续航如果不通过第三方调度程序管控，在国产各大毒瘤app蹂躏下，进程驻留，关联启动，互相唤醒都是家常便饭，手机续航会尿崩，所以需要一个后台进程管理应用，这里推荐黑域，支持root/无root），想反悔恢复这3个应用，可以执行adb shell cmd package install-existing 应用包名 进行无损恢复(pm卸载时需要使用-k参数保留应用数据)。这个教程非常不错 <a class=link href=https://www.0z.gs/memo/recovery-pri-app.html target=_blank rel=noopener>https://www.0z.gs/memo/recovery-pri-app.html</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>还有这段话是网上复制的，这个需要root“分享一些之前自己折腾过的东西，当然由于还是古老的955，可能不一定和现在的960/970一样，给大家参考参考。做这些的前提是把默认的省电精灵配置文件给删了，也就是删除/product/etc/hwpg下带performance和thermald的文件。1、大核优先。EMUI5：echo 0 > /sys/kernel/set_hmp_thresholds/enable echo 1 > /sys/kernel/hmp/boost EMUI8：echo 1 > /sys/kernel/set_hmp_thresholds/enable echo 1 > /sys/kernel/aes/boot_boost 2、修改温控（我这里改到85度和90度）echo 85000 > /sys/class/thermal/thermal_zone0/trip_point_0_temp echo 90000 > /sys/class/thermal/thermal_zone0/trip_point_1_temp”其实不用echo命令，mt管理器进到文件的路径，然后修改，如果告诉你错误无法保存/打开，就先把它复制到另一个地方，sd卡或者别的文件夹，修改温度后再复制并替换原来的温控文件就可以了</p><hr><p><strong>这个教程已经复制来了</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>adb shell cmd package install-existing 应用包名
</span></span></code></pre></div><p>关于应用数据：当时使用 <code>pm</code> 卸载应用时，加了<code>-k</code> 参数保留卸载的应用数据，才可以恢复后同时保留应用数据，如果当时<code>pm</code>卸载应用没加，就只能恢复预装的应用，但是无法恢复用户数据。</p><p>如，恢复使用adb卸载的华为应用市场，如何反悔：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>adb shell cmd package install-existing com.huawei.appmarket
</span></span></code></pre></div><p>通过 adb 命令方式卸载的预装都能恢复，通过root权限去文件系统上删除文件来卸载应用则无法恢复</p><p>华为，我去他的预装目录下删了一堆东西，合计起来1.4个G，真是败家，京东、淘宝、58同城、抖音、支付宝……，真是恰饭小能手。</p><p>完</p><hr><p><strong>解bl锁，获取解锁码的教程</strong></p><p>这个教程既老还麻烦，反正我不会</p><hr><h2 id=前言>前言</h2><p>因为华为官方在今年的七八月份吧，关闭了解锁码的申请通道，这就导致用户要获取解锁码变得异常困难，甚至不可能，虽然也有教程说可以通过华为的海外通道，但亲自证实已不可行。<br>获取解锁码、解BL锁，这个有多重要，这里不赘述，只要知道想要刷第三方ROM、官改ROM或者救活非硬件故障导致的无法正常开机使用的手机，基本都要先解BL锁。<br>本教程基于前人的经验，总结下整个过程，提供一些经验，为没操作过的朋友排些坑，顺便提供一些可能需要用到的工具，老鸟就略过吧:)<br><strong>最后，在开始下面的教程之前，你需要选择，是通过万能的某宝，花个8块10块，不用五分钟就能得到解锁码，还是要通过本教程，花费了大量时间，最后可能你的机子还不一定能成功获取解锁码，如果是前者的话，你可以关闭本页面了</strong></p><h2 id=适用机型>适用机型</h2><p>mate8、p7、荣耀6 plus、畅玩4x&mldr;&mldr;（这些都是贴吧、花粉俱乐部不完全统计的操作成功的机型，不仅限于这些）</p><p><strong>华为Mate系列（Mate10、Mate9、Mate8、Mate7）<br>华为P系列（P10、P10Plus、P9/P9Plus、P8、P8青春版、P7、P6）<br>华为荣耀系列（荣耀V10、荣耀V9、荣耀V8）<br>华为Nova系列（华为Nova、华为Nova2、华为Nova2青春版）<br>华为畅玩系列、华为畅享系列、华为麦芒系列<br>（除P20/P20Pro/荣耀10以外的华为海思，高通处理器的机型都可以获取解锁码，MTK芯片的不可以）</strong><br>上面加粗部分是某宝某店的支持机型，大家参考下。（网上有些人说高通处理器的不一定可行，海思麒麟的可以，但是看某宝的支持机型，大概可以得出这么一个结论：越新的机型可行性越小，麒麟970不一定可行。因为p20、跟荣耀10都是970的）</p><p><strong>最后，升级会回锁，但解锁码所有版本通用（指本机）</strong></p><h2 id=实际操作>实际操作</h2><h4 id=开始之前请备份好用户个人数据>开始之前，请备份好用户个人数据。</h4><p>推荐个工具，类似刷机精灵，蛮好用的，绿色版。<br>本次教程用到的工具都放在网盘里了，还有荣耀6 Plus移动标配版的回退中转包，以及对应的ROM，其他机型不可用，请去花粉俱乐部或其他网站寻找。<br>链接: <a class=link href=https://pan.baidu.com/s/17PEwfmTIDsg0QwdWR_2zEQ target=_blank rel=noopener>https://pan.baidu.com/s/17PEwfmTIDsg0QwdWR_2zEQ</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>提取码: tduc<br><img src=/post/huawei-kirin-flash-tutorial-resources/i4HS3t.webp width=1155 height=683 srcset="/post/huawei-kirin-flash-tutorial-resources/i4HS3t_huf639238e4117dd9ffb006e288872890a_64464_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/i4HS3t_huf639238e4117dd9ffb006e288872890a_64464_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=i4HS3t.webp class=gallery-image data-flex-grow=169 data-flex-basis=405px></p><h4 id=1-root>1. ROOT</h4><p>这个大概是整个过程最难的也是最花时间的一个点了吧，因为要在未解锁的情况下去ROOT，要回退，在回退的每个版本去尝试能不能ROOT。<br>有的机型可以在EMUI4.0 B197，用360一键ROOT成功（如mate8，P7也有成功过，不过版本未知）<br>我的是荣耀6Plus，在EMUI4.0-Android6.0，失败；回退EMUI3.1-Android5.1，失败；回退EMUI3.0-Android4.4，成功；<br>基本每个“大版本”都要尝试，综合来看，成功率最高的是360一键ROOT，然后还有ROOT大师、Kingroot，360跟Kingroot都要成功的案例，电脑版跟手机版都要尝试，尝试个5次就差不多，不行就换。<br>最后再推荐一个“冷门”的，YOROOT，支持机型不多，可能有奇效，可以尝试一下。<br>yoroot支持的机型：<br><img src=/post/huawei-kirin-flash-tutorial-resources/i47a7Q.webp width=636 height=695 srcset="/post/huawei-kirin-flash-tutorial-resources/i47a7Q_hua74a6fe0af8da34191254e750ea3572d_47602_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/i47a7Q_hua74a6fe0af8da34191254e750ea3572d_47602_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=i47a7Q.webp class=gallery-image data-flex-grow=91 data-flex-basis=219px></p><h4 id=2-获取解锁码>2. 获取解锁码</h4><p>连接USB调试（设置->关于手机->版本号（不是系统版本号），连续点击，启用开发人员选项），之后就可以连接电脑了（手机里面USB连接方式选择PC助手（HiSuite））（详细的连接方式，手机页面里面也有提示，这边不在赘述，相信玩这个的也没有这么白）。<br>成功连接后，就能在秋之盒（也就是图1的那个工具）里面看到手机的信息了，点击ADB命令行，进入CMD。<br>依次输入如下命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln> 1</span><span class=cl>adb shell
</span></span><span class=line><span class=ln> 2</span><span class=cl>255<span class=p>|</span>shell@hwp7:/ $ su
</span></span><span class=line><span class=ln> 3</span><span class=cl>root@hwp7:/ <span class=c1># cd /storage/sdcard1/</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>root@hwp7:/storage/sdcard1 <span class=c1># mkdir -p PartitionBackup</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>root@hwp7:/storage/sdcard1 <span class=c1># cd PartitionBackup</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>root@hwp7:/storage/sdcard1/PartitionBackup <span class=c1># dd of=nvme \</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>&gt; <span class=k>if</span><span class=o>=</span>/dev/block/platform/ff1fe000.dwmmc0/by-name/nvme
</span></span><span class=line><span class=ln> 8</span><span class=cl>8192+0 records in
</span></span><span class=line><span class=ln> 9</span><span class=cl>8192+0 records out
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=m>4194304</span> bytes transferred in 0.916 secs <span class=o>(</span><span class=m>4578934</span> bytes/sec<span class=o>)</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>root@hwp7:/storage/sdcard1/PartitionBackup <span class=c1># dd of=oeminfo \</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>&gt; <span class=k>if</span><span class=o>=</span>/dev/block/platform/ff1fe000.dwmmc0/by-name/oeminfo
</span></span><span class=line><span class=ln>13</span><span class=cl>65536+0 records in
</span></span><span class=line><span class=ln>14</span><span class=cl>65536+0 records out
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=m>33554432</span> bytes transferred in 8.768 secs <span class=o>(</span><span class=m>3826919</span> bytes/sec<span class=o>)</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>root@hwp7:/storage/sdcard1/PartitionBackup <span class=c1># dd of=recovery \</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>&gt; <span class=k>if</span><span class=o>=</span>/dev/block/platform/ff1fe000.dwmmc0/by-name/recovery
</span></span><span class=line><span class=ln>18</span><span class=cl>32768+0 records in
</span></span><span class=line><span class=ln>19</span><span class=cl>32768+0 records out
</span></span><span class=line><span class=ln>20</span><span class=cl><span class=m>16777216</span> bytes transferred in 4.419 secs <span class=o>(</span><span class=m>3796609</span> bytes/sec<span class=o>)</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>root@hwp7:/storage/sdcard1/PartitionBackup <span class=c1># strings nvme | grep WVDEVID -B 1  </span>
</span></span><span class=line><span class=ln>22</span><span class=cl>&lt;font <span class=nv>color</span><span class=o>=</span><span class=s2>&#34;#ff0000&#34;</span>&gt;1234567890123456&lt;/font&gt;
</span></span></code></pre></div><p>有部分cmd输出的东西因为markdown被隐藏了，不过无关紧要，如果想看的话，只要选择上面的内容就好了。</p><p>实际执行效果，以及部分代码的不严谨解释，如下图：<br><img src=/post/huawei-kirin-flash-tutorial-resources/i4qYX6.webp width=749 height=512 srcset="/post/huawei-kirin-flash-tutorial-resources/i4qYX6_hu2b560a397d0b2fd3087021ac1cea3099_81778_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/i4qYX6_hu2b560a397d0b2fd3087021ac1cea3099_81778_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=i4qYX6.webp class=gallery-image data-flex-grow=146 data-flex-basis=351px><br><strong>绿框部分就是要执行的代码，直接上面复制，右键点击就粘贴了（win10），回车执行，一行一回车；</strong><br><strong>红框部分的文件需要根据自己的实际来修改，如staroge/sdcard1  这个是在SD卡上创建PartitionBackup的，你也可以改成sdcard0来建，这个是在内部存储里建；</strong><br><strong>if=/dev/block/platform/ff1fe000.dwmmc0/by-name/nvme考图中红框的部分，ff1fe000.dwmmc0这个路径根据自己实际的nvme所在位置修改，可以安装一个RE文件管理器，从根目录开始，根目录/dev/block/platform/不同机型不同/by-name/nvme</strong><br><strong>至于最后的grep WVDEVID -B 1执行后如果是一串16位的数字，那就是解锁码，如果跟图中一样，是提示not found那也没关系</strong><br><strong>在执行完上面的三个dd 之后，在你创建的PartitionBackup文件夹下（可能是storage/sdcard1下，也可能是storage/sdcard0下，这取决于你之前是在那个路径下创建的PartiotionBackup）,会多出三个文件，分别是nvme、oeminfo、recovery，这三个文件保存好，后面重新上锁可能要用到（如果你有这方面的需求的话）。我们要的解锁码就在nvme里面，我们把它拷贝到电脑里面，使用WinHex打开nvme文件（WinHex在上面分享的网盘链接里有提供），Ctrl+F搜索WVLOCK，得到解锁码，如下图：</strong><br><img src=/post/huawei-kirin-flash-tutorial-resources/i4zfsA.webp width=880 height=772 srcset="/post/huawei-kirin-flash-tutorial-resources/i4zfsA_hu9823fd6e2b11fabb030e1f4afa70b63f_121686_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/i4zfsA_hu9823fd6e2b11fabb030e1f4afa70b63f_121686_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=i4zfsA.webp class=gallery-image data-flex-grow=113 data-flex-basis=273px></p><h4 id=3-解锁bootloader>3. 解锁BootLoader</h4><p>通过上面的那些操作之后，取得了解锁码，我们就可以解锁我们的手机了，可以直接使用华为手机工具箱解锁，上面分享的网盘链接里面同样有提供该工具。<br><strong>解锁之前，要关闭“手机找回”功能（如果没有使用华为的云服务好像就不用这操作，反正注意下就是）</strong><br><img src=/post/huawei-kirin-flash-tutorial-resources/i5SCJU.webp width=516 height=531 srcset="/post/huawei-kirin-flash-tutorial-resources/i5SCJU_hu83aa3af0136c9ed9962a1ed09e8e3d84_19842_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/i5SCJU_hu83aa3af0136c9ed9962a1ed09e8e3d84_19842_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=i5SCJU.webp class=gallery-image data-flex-grow=97 data-flex-basis=233px><br>如图所示，点击解锁BootLoader按钮，在弹出的窗口里面填入解锁码，手机会重启到FASTBOOK模式，看看安卓机器人下方显示的是否是显“PHONE Unlocked”，是的话就是解锁成功了。<br>好了之后就可以按住电源键强制关机，重新开机进系统了。</p><h4 id=4-关于回锁>4. 关于回锁</h4><p>回锁好像用不到上面的那三个文件，只需要强刷完整的官方固件即可自动回锁。<br><strong>这边啰嗦一句：解锁码所有版本通用（指本机）</strong><br>所以，不用担心之前的解锁码升级了之后是不是就不能用了。</p><h4 id=好了至此关于解锁的部分差不多都讲完了下面简单讲讲回退的操作知道了的老鸟也可以不用看了>好了，至此，关于解锁的部分差不多都讲完了，下面简单讲讲回退的操作，知道了的老鸟也可以不用看了</h4><h2 id=版本回退>版本回退</h2><p>关于版本回退，由于机型众多，我也不可能给大家提供那么多那么全的资源，所以我只能以我这次操作的荣耀6plus移动标准版做讲解，并提供相应的回退中转包以及相应的完整官方ROM。<br>如果在看的你恰好手头要弄的机子就是荣耀6plus移动标准版，那么就可以直接去我提供的网盘里面下载相应的资源了。<br>这边在发下网盘链接，链接: <a class=link href=https://pan.baidu.com/s/17PEwfmTIDsg0QwdWR_2zEQ target=_blank rel=noopener>https://pan.baidu.com/s/17PEwfmTIDsg0QwdWR_2zEQ</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>提取码: tduc跟上面的一样。<br><img src=/post/huawei-kirin-flash-tutorial-resources/i5puBn.webp width=388 height=390 srcset="/post/huawei-kirin-flash-tutorial-resources/i5puBn_hu8176f8504e00d069e5c4e643992d761e_8540_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/i5puBn_hu8176f8504e00d069e5c4e643992d761e_8540_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=i5puBn.webp class=gallery-image data-flex-grow=99 data-flex-basis=238px><br>随时提供了一个某教程的救砖工具合集，希望大家都不要用到。</p><h4 id=1-关于回退>1. 关于回退</h4><p>希望大家能先去花粉俱乐部里，相应的机型板块看教程，获取相应的资源，<strong>回退中转包有相应的版本要求与机型要求，比如图片里面的4.0回退3.1，是荣耀6plus全版本通用的，3.1回退3.0的就不是了（只要资源压缩包不瞎改名字的话还是能看出端倪的，比如通用的它不写明是哪个型号的PE-C00，专用的就是PE-TL20，这是移动标准版的型号）；还有一个就是不能跨版本，比如我现在是4.0，就不能一步到3.0（这里指的版本4.0,3.1,3.0是EMUI的版本，对应的分别是Android6.1/5.1/4.4</strong><br><strong>找ROM包是一个细致的过程，大家一定要细心</strong></p><h4 id=2rom包以及中转包获取>2.ROM包以及中转包获取</h4><h5 id=21-优先推荐花粉俱乐部资源>2.1 优先推荐花粉俱乐部资源</h5><p>为了保证包的干净，一般推荐优先去花粉俱乐部找自己需要的官方ROM包，但是，不知道什么缘故，我看很多帖子的文字的超链接都失效了，只剩文字，这就给我们的下载带了了困难。所以，如果是完整的ROM包没地方下载，可以看看我下面的推荐的方法，如果是中转包没地方下载，那只能去百度了。</p><h5 id=22-华为手机助手hisuite>2.2 华为手机助手（Hisuite）</h5><p><strong>推荐4.0.4.300这个版本的，新版的没有刷机那个功能按钮了。</strong><br><strong>通过这个就能下载到原装的官方ROM了</strong><br><img src=/post/huawei-kirin-flash-tutorial-resources/i59AV1.webp width=1000 height=700 srcset="/post/huawei-kirin-flash-tutorial-resources/i59AV1_huc0a02fecb4ed6bd61cb09cb7b95a356f_43602_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/i59AV1_huc0a02fecb4ed6bd61cb09cb7b95a356f_43602_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=i59AV1.webp class=gallery-image data-flex-grow=142 data-flex-basis=342px><br>操作可以参考图片的，基本没什么大问题。<br>（有哪位大佬可以帮忙把检测更新的给去掉，虽然弹出的那个窗口不影响什么操作，但还是碍事）</p><h5 id=23-个人推荐的一个网站>2.3 个人推荐的一个网站</h5><p>呃，当时随便搜的几个ROM类网站，号称什么官方ROM，我看有点不靠谱，文件大小都不一样，我要推荐的这个网站，好像是专门收集的华为资源，下载过B351的ROM，跟助手下载的文件一模一样，不管是大小还是文件时间，所有感觉还是比较靠谱的，当然大家也仔细甄别吧。<br>这网站里面也有提供中转包，大家可以仔细看下。（推荐这个应该没什么问题吧，毕竟这网站也不是什么乱七八糟的网站）<br><a class=link href=http://www.huaweirom.com/rom/ target=_blank rel=noopener>华粉圈</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>：www.huaweirom.com/rom/</p><h4 id=3-回退操作>3. 回退操作</h4><p><strong>事先准备好一张不小于2G的SD卡</strong><br><strong>注意提前备份好用户个人数据，会清除所有数据的</strong><br><strong>升级前记得关掉SD卡的密码保护（如果有的话）</strong><br>3.1 解压中转包，复制里面的<strong>dload</strong>文件夹到SD卡的<strong>根目录</strong>，在拨号界面，输入<code>*#*#2846579 #*#*</code>（不同机型输入的可能会有差异，请根据实际情况修改），选择<strong>SD卡升级</strong>，手机会自动重启升级，过程可能较长（有教程说中转包较小，升级很快什么的，这个不一定，如果超过20-30分钟，过了honor的logo，卡在了android这几个字母的界面，可以考虑强制重启，我4.0退3.1的时候卡过一次）。<br>3.2 刷了中转包后就可以刷对应的版本的官方完整包了，过程同上，这边不赘述了。<br><strong>记得回退刷完每个完整包后试试能不能用上面的那些软件ROOT</strong><br><strong>这边顺便提一句，花粉俱乐部有人说可以通过华为手机助手里面的刷机，直接刷回旧版本不用刷中转包，我试了不行，刷后重启还是原先的版本，你们可以试下，但是，同样的，跨度还是不要太大，比如EMUI4.0对应的Android版本是6.0，就不要直接刷B200的包，B200是EMUI3.0对应的Android4.4。</strong></p><h2 id=后语>后语</h2><p>有句话叫“会者不难，难者不会”，对于会的人来说都简单，对于不熟悉的，可能一纸之隔跟一墙之隔没什么区别，不过要是能有人帮忙点破就好很多了，希望我能为大家扮演这个角色。<br>版本回退浪费不少时间，这个是没办法；执行命令那边也浪费了不少时间，主要还是对这些命令不是很熟悉，有些不同机型应该根据实际做不同修改的，愣是傻傻的用上去，像那个nvme的，最初执行说是找不到文件（路径都不对，能找到就有鬼了），后来通过RE找到了，想直接复制到SD卡里面，不行，复制失败，试了N多办法，就是复制不出来，后面才恍然大悟，发现自己错在哪里了，但是也浪费不少时间了。<br>网上这个教程不少，但大多都是千篇一律，我希望通过自己的实际操作，以及还算细致的讲解，能帮大家在搞机的路上少走有点弯路少掉一些坑。<br>这篇教程花了我不少时间，集中所需的资源上传网盘，重复整个操作过程并截图上传图床，敲下这些文字；<br>同时又注定这篇教程是小众的，毕竟现在也没多少人玩这个了&mldr;&mldr;所以，如果你觉得我的教程能帮到你，那是我的荣幸，也请随手给个分。<br>如果有什么意见或建议，或者这教程有哪里不妥的地方，也欢迎大家回帖留言。<br>好了，总算整完了，✿✿ヽ(°▽°)ノ✿。</p><hr><p>新的好用的教程就是用PotatoNV随机更改解锁码（酷安搜索），但是需要拆机短接触点进COM 1.0模式，不会拆机的有一点麻烦。短接图我是谷歌搜索花了5毛钱买的，但是真的很无脑很简单，强力推荐。</p><hr><p><a class=link href=https://github.com/mashed-potatoes/PotatoNV target=_blank rel=noopener>GitHub - mashed-potatoes/PotatoNV: Unlock bootloader of Huawei devices on Kirin 960/95х/65x/620</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>PotatoNV在 Kirin 960/95х/65x/620 上解锁华为设备的引导加载程序</p><hr><h2 id=下载>下载</h2><p>下载最新版本的<a class=link href=https://github.com/mashed-potatoes/PotatoNV/releases/download/v2.2.1_2022.03/PotatoNV-next-v2.2.1_2022.03-x86.zip target=_blank rel=noopener>PotatoNV</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><h2 id=用户手册>用户手册</h2><p>阅读下面的手册。</p><h3 id=确保您的设备兼容>确保您的设备兼容</h3><ol start=0><li>您确定您确实使用的是华为/荣耀设备吗？</li><li>打开设置 → 关于手机。检查CPU：应该是_<strong>海思麒麟</strong> 如果不是您的情况（联发科、高通），那么您的设备不受支持。:(</li><li>好了，现在你知道CPU型号了。它应该是以下修改之一：<ul><li>麒麟620</li><li>麒麟650</li><li>麒麟655</li><li>麒麟658</li><li>麒麟659</li><li>麒麟925</li><li>麒麟935</li><li>麒麟950</li><li>麒麟960</li></ul></li><li><strong>与 PotatoNV 100% 不兼容的 CPU：Kirin 710、710A、710F、810、970、980、985、990 及更新版本。</strong></li><li>至于 Kirin 710、710F、970 和 980，还有另一种<strong>付费</strong>选项</li></ol><h3 id=进入内部>进入内部</h3><p>第一步是最难做到的。您需要拆卸您的设备：这是访问主板上的触点所必需的。</p><p>如果您不确定自己是否有足够的经验来拆卸设备，请考虑使用支持_“软件测试点”_的付费软件。</p><blockquote><p><strong>警告</strong></p><p>我强烈建议观看视频手册来拆卸您的设备。</p></blockquote><blockquote><p><strong>警告</strong></p><p><strong>使用平面电缆时要格外小心！</strong></p><p>这些电缆用于平板电脑以及后盖上带有指纹扫描仪的手机。</p></blockquote><p>您将需要：吹风机、吉他拨片或塑料卡、导电镊子，也许还需要一把螺丝刀。</p><ol><li>关闭设备。</li><li>用吹风机将后盖均匀加热。</li><li>几分钟后，尝试将塑料卡插入外壳和盖子之间的角落，尝试提起边缘，然后加深卡。</li><li>沿着后盖周边移动，剥掉胶水。</li><li>现在您可以卸下后盖了。</li></ol><h3 id=进入下载模式>进入下载模式</h3><p>是时候去谷歌了。你需要找到主板上一个特殊点的位置——测试点。</p><blockquote><p><strong>笔记</strong></p><p>如果您想知道为什么需要对不幸的测试点做一些事情，请阅读下面的剧透内容。</p></blockquote><p>要进行搜索，请在连字符 +“测试点”之前使用型号名称。例如，对于 Honor 9 Lite (LLD-L31)，您应该 Google <a class=link href="https://www.google.com/search?q=lld+testpoint&amp;tbm=isch" target=_blank rel=noopener>“lld testpoint”</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>。</p><p>典型测试点照片的示例。</p><p><a class=link href=https://camo.githubusercontent.com/93ec8f97fa530a32f7aa55c22f3bf5278f82b9c087c5b8b206f9543df61596d4/68747470733a2f2f692e696d6775722e636f6d2f3233334b6e32372e6a7067 target=_blank rel=noopener><img src=/post/huawei-kirin-flash-tutorial-resources/68747470733a2f2f692e696d6775722e636f6d2f3233334b6e32372e6a7067.webp width=640 height=527 srcset="/post/huawei-kirin-flash-tutorial-resources/_hu18643d439c5ba636d97b8ac8cbbb5a99_55584_0fb00cdc7831a0f710431c79bdf1ad7e.webp 480w, /post/huawei-kirin-flash-tutorial-resources/_hu18643d439c5ba636d97b8ac8cbbb5a99_55584_8c996b73e36e6598ea6c5a69db5eac83.webp 1024w" loading=lazy alt="Honor 9 Lite Testpoint location" class=gallery-image data-flex-grow=121 data-flex-basis=291px></a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>标记可能会有所不同：</p><ol><li>照片中仅标记了一个点。</li><li>在照片中，该点和金属屏蔽之间画了一条线。</li><li>在照片中，两点之间画了一条线。</li></ol><p>这里你需要一些技巧：尝试将点和金属屏蔽短路（选项 1 和 2），或者用镊子将两个点短路（选项 3）。无需取下镊子，将 USB 电缆连接到计算机。</p><p>3秒后，即可取出镊子。</p><p>打开“设备管理器” – 您应该看到一个名为<code>USB SER</code>或 Serial Port的未知设备<code>HUAWEI USB COM 1.0</code>。</p><p>如果未检测到设备，请确保您使用的是良好的电缆，镊子不是电介质，并且您正在短路所需的点。</p><h3 id=解锁引导加载程序>解锁引导加载程序</h3><ul><li>安装<a class=link href=https://consumer.huawei.com/en/support/hisuite/ target=_blank rel=noopener>HiSuite</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>。</li><li>安装<a class=link href="https://files.dc-unlocker.com/share.html?v=share/18B15B9D02C945A79B1967234CECB423" target=_blank rel=noopener>华为测试点驱动程序</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>。</li><li>下载<a class=link href=https://github.com/mashed-potatoes/PotatoNV/releases target=_blank rel=noopener>最新版本</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>的 PotatoNV。</li><li>启动 PotatoNV。</li></ul><blockquote><p><strong>笔记</strong></p><p>所有引导加载程序都会闪存到 RAM，因此不正确的引导加载程序不会损害设备。</p></blockquote><blockquote><p><strong>笔记</strong></p><p><code>Disable FBLOCK</code>复选框禁用特殊的安全检查。该修改允许您闪存/擦除安全分区或执行 OEM 命令，这些命令在通过解锁代码 [ <code>USERLOCK</code>] 进行正常解锁时不可用。</p></blockquote><blockquote><p><strong>警告</strong></p><p><code>FBLOCK</code>仅在配备 Kirin 960 或 Kirin 65x 的设备上才能正常解锁。禁用此选项可能会导致旧设备出现严重问题。</p></blockquote><p>好的，现在参考<a class=link href=https://github.com/mashed-potatoes/PotatoNV/blob/master/README.md#tested-devices target=_blank rel=noopener>此表</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>并选择适当的引导加载程序。</p><p>按开始按钮。</p><p>该过程不会超过一分钟。该程序应该编写一个新的解锁代码，并将其保存在安全的地方。</p><p>将设备重新启动到快速启动模式并在主机上执行以下命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>fastboot oem unlock YOUR_CODE_HERE
</span></span></code></pre></div><p>玩得开心。</p><h2 id=怎么运行的>怎么运行的</h2><p>甚至在创建 PotatoNV 之前，<a class=link href=https://github.com/TishSerg target=_blank rel=noopener>@TishSerg</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>就发现可以使用属性所需密钥的<strong>SHA256 哈希值</strong>重写解锁密钥<code>USRKEY</code>。但是，要访问<strong>NVME</strong> （存储序列号、设备特征等内容的原始分区），用户应刷新<strong>自定义恢复或获得临时 root 权限</strong>。但这两种方法都很复杂并且不能保证有效。在研究了一些华为设备的遗留引导加载程序后，我发现了一个<code>nve</code>命令，它允许读取或写入<strong>NVME中的任何属性</strong>分割。当然，此命令需要解锁的引导加载程序。因此，仍然需要找到一种快速解锁引导加载程序的方法。解决方法非常简单 - 使用主板软件中的引导加载程序。</p><p>该程序通过模式上传一个特殊的<strong>USB bootloader</strong>（从板卡软件导出）<code>DOWNLOAD_VCOM</code>。<strong>VCOM</strong>类似于高通设备上的<strong>EDL：它可以由系统故障或短路测试点</strong>触发。上传引导加载程序后，设备应切换到快速引导模式。“USB引导加载程序”有一个重要的特点：它是<strong>开箱即用的</strong>，因此它允许执行任何命令。</p><p>因此，我们只需通过 USB 批量接口发送一条命令，将 SHA256 哈希写入 USRKEY 并重新启动设备。</p><p>就是这样。</p><h2 id=测试设备>测试设备</h2><div class=table-wrapper><table><thead><tr><th>设备</th><th>模型</th><th>引导装载程序</th></tr></thead><tbody><tr><td>华为 P8 Lite (2015)</td><td><code>ALE</code></td><td>麒麟620</td></tr><tr><td>华为Y6II</td><td><code>CAM</code></td><td>麒麟620</td></tr><tr><td>荣耀5C/7青春版</td><td><code>NEM</code></td><td>麒麟 65x (A)</td></tr><tr><td>荣耀6X</td><td><code>BLN</code></td><td>麒麟 65x (A)</td></tr><tr><td>荣耀7X</td><td><code>BND</code></td><td>麒麟 65x (A)</td></tr><tr><td>荣耀9青春版</td><td><code>LLD</code></td><td>麒麟 65x (A)</td></tr><tr><td>华为平板T5</td><td><code>AGS2</code></td><td>麒麟 65x (A)</td></tr><tr><td>华为nova 2</td><td><code>PIC</code></td><td>麒麟 65x (A)</td></tr><tr><td>华为P10 Lite</td><td><code>WAS</code></td><td>麒麟 65x (A)</td></tr><tr><td>华为 P20 Lite / Nova 3e</td><td><code>ANE</code></td><td>麒麟 65x (A)</td></tr><tr><td>华为 P8 Lite (2017)</td><td><code>PRA</code></td><td>麒麟 65x (A)</td></tr><tr><td>华为P9 Lite</td><td><code>VNS</code></td><td>麒麟 65x (A)</td></tr><tr><td>华为 Y9 (2018)</td><td><code>FLA</code></td><td>麒麟 65x (A)</td></tr><tr><td>华为平板M5 Lite</td><td><code>BAH2</code></td><td>麒麟 65x (B)</td></tr><tr><td>华为 Nova 2i / Mate 10 Lite</td><td><code>RNE</code></td><td>麒麟 65x (B)</td></tr><tr><td>华为P Smart 2018</td><td><code>FIG</code></td><td>麒麟 65x (B)</td></tr><tr><td>荣耀6 Plus</td><td><code>PE</code></td><td>麒麟925</td></tr><tr><td>华为P8</td><td><code>GRA</code></td><td>麒麟935</td></tr><tr><td>荣耀8 Pro/V9</td><td><code>DUK</code></td><td>麒麟950</td></tr><tr><td>荣耀8</td><td><code>FRD</code></td><td>麒麟950</td></tr><tr><td>华为P9标准版</td><td><code>EVA</code></td><td>麒麟950</td></tr><tr><td>荣耀9</td><td><code>STF</code></td><td>麒麟960</td></tr><tr><td>华为Mate 9 Pro</td><td><code>LON</code></td><td>麒麟960</td></tr><tr><td>华为伴侣9</td><td><code>MHA</code></td><td>麒麟960</td></tr><tr><td>华为平板M5</td><td><code>CMR</code></td><td>麒麟960</td></tr><tr><td>华为nova 2s</td><td><code>HWI</code></td><td>麒麟960</td></tr><tr><td>华为P10</td><td><code>VTR</code></td><td>麒麟960</td></tr></tbody></table></div><h2 id=备择方案>备择方案</h2><h4 id=hcu客户端>HCU客户端</h4><p>据我所知，目前只有一种工具可以处理较新的CPU——HCU Client。</p><p>该软件需要许可证，最实惠的计划是 3 天的访问，价格为 19 欧元。</p><p><a class=link href=https://hcu-client.com/supported-models.php target=_blank rel=noopener>请参阅此处</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>HCU 客户端支持的型号。</p><blockquote><p><strong>笔记</strong></p><p><a class=link href="https://hcu-client.com/buy/#:~:text=Timed%20licenses%20locked%20to%20first%20used%20PC" target=_blank rel=noopener>限时许可证将在首次使用的电脑上锁定</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>两天。因此，在多部手机上使用此类许可证将会出现问题。</p></blockquote><h6 id=免责声明我与-uab-digiteka-或其任何子公司或附属公司包括-dc-phoenix-和-hcu-client不隶属关联授权认可或以任何方式正式关联>免责声明：我与 UAB Digiteka 或其任何子公司或附属公司（包括 DC-Phoenix 和 HCU Client）不隶属、关联、授权、认可或以任何方式正式关联。</h6><hr><p><strong>临时的根访问权限，但实际上不会改变系统</strong></p><p>要在 Android 设备 shell 上获得临时超级用户（又称 root ）权限，您所需要做的就是找到合适的<strong>su</strong>二进制文件并将其复制到 Android 文件系统中。 答：要使用超级用户权限从桌面计算机上的 shell 中运行 Android shell 命令（又称命令提示符），您必须在桌面计算机 shell 中运行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>adb devices
</span></span><span class=line><span class=ln>2</span><span class=cl>adb push &lt;LOCATION-OF-SUITABLE-SU-BINARY-ON-PC-HERE&gt; /data/local/tmp/
</span></span></code></pre></div><p>1. 将 Android 设备连接到您的台式计算机，然后 2. 将<strong>su</strong>二进制文件上传到 Android 设备临时目录中，该目录始终可供用户使用。 B：然后，在台式电脑外壳中输入</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>adb shell <span class=s2>&#34;cd /data/local/tmp &amp; chmod 776 su&#34;</span>
</span></span></code></pre></div><p>是什么让<strong>su</strong>二进制可执行文件：它的所有权默认设置为 shell。 C：然后在台式电脑shell中输入
什么将向您显示最近上传的文件的内容和权限。 D：
要应用一系列需要超级用户权限的 Android shell 命令，您现在需要运行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>adb shell 
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span>/data/local/tmp:<span class=nv>$PATH</span><span class=s2>&#34;
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=s2>su -c &#34;</span>&lt;SHELL-CMD-HERE&gt;<span class=s2>&#34;
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=s2>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=s2>....
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=s2>
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=s2>su -c &#34;</span>&lt;SHELL-CMD-HERE<span class=s2>&#34;&gt;
</span></span></span><span class=line><span class=ln>8</span><span class=cl><span class=s2>exit
</span></span></span></code></pre></div><p>顺便说一句：
当在 Android shell 中启动另一个像su这样的进程时，这个生成的进程作为子进程运行意味着它继承了大部分父进程属性</p><hr><h2 id=oem解锁是什么>OEM解锁是什么</h2><p>如果没理解错，允许OEM解锁是允许进行OEM方面的控制，例如（应该也是全部了）允许进行
fastboot oem unlock（如果你不理解这个命令是怎么回事，那么建议不要进行/允许任何解锁，也不要刷机）。
如果不知道什么是OEM，自己百度吧</p><p>开发者选项是另一回事，只不过OEM解锁的开关会出现在开发者选项中而已，不能混淆。
开发者选项是Android自带的东西，让一些高级用户/开发者做调试/调整使用的，仅此而已。</p><p>如果不需要刷机，那么OEM锁（bootloader的锁）没必要打开，也就没必要允许OEM解锁；而如果要刷机，应该都需要打开OEM锁，所以应该允许OEM解锁。</p><hr><p><strong>然后就是刷recovery的教程</strong></p><p>电脑配置好adb，可以把他拖到你c盘，用户，你的用户名文件夹，就是有下载文档桌面的内个文件夹，这样通过win+r，cmd就可以直接用adb和fastboot。如果你要cmd刷包，直接把文件拖入刚刚adb放入的文件夹里面就行了。这样假如你的rec叫做twrp.img，拖进去你用户名的文件夹，然后cmd输入fastboot flash recovery_ramdisk twrp.img就行了，如果是两个大大的OK就成功了。</p><p><strong>刷magisk的教程</strong></p><p>由于emui9没有了单独的boot分区只能刷到recovery分区，如果你是emui9以下的，就可以进到twrp中吧下载的magisk刷进去，如果是.apk，改成.zip就可以用twrp刷了，这个是检测不了你是否成功刷入的，所以官方都不推荐，认为它是过时的。当然还有.img的twrp，是用来emui9刷到recovery的。cmd直接刷fastboot flash recovery_ramdisk magisk.img就可以了，另外类原生要在根目录的system里面有一个sbin文件夹magisk才能生效，如果不能创建就把acct文件夹重命名为sbin，进系统后下一个mt管理器在里面新建一个acct文件夹就可以了。</p><p><strong>进recovery和fastboot和erecovery的教程</strong></p><p>长按电源键和音量上键不松手，震动后不要松，亮屏出huawei的logo再松手就是进recovery，黄字会暗一些。</p><p>手机连接电脑（充电器不行），在连接之前一只手按住音量下键，连上一瞬间按住电源键就是进bootloader（fastboot）是白底。</p><p>手机长按电源键开机，在黄字部分长按音量上键3秒钟是进入erecovery（黄字暗），直接按电源键或等待5秒是进系统。</p><p><strong>刷第三方内核的教程</strong></p><p>cmd输入fastboot flash kernel XXXX.img ，反正emui9是这样的，其他没有试过。</p><p>一些用过的网站和资源</p><p>1 这个是华为刷机包什么的网站，有但是不多<a class=link href=https://www.huaweirom.com/ target=_blank rel=noopener>https://www.huaweirom.com/</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>2 这个就有些硬核了，可以随意改温控，真正提高上限区间<a class=link href=https://tieba.baidu.com/p/5737085450 target=_blank rel=noopener>https://tieba.baidu.com/p/5737085450</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>3 这个是某贼写的用PotatoNV解bl的教程，里面有不少资源<a class=link href=https://zhuanlan.zhihu.com/p/397173427 target=_blank rel=noopener>https://zhuanlan.zhihu.com/p/397173427</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>4 这个是现在依然好用的猎人单机版和教程<a class=link href=https://blog.csdn.net/COCO56/article/details/126882937 target=_blank rel=noopener>https://blog.csdn.net/COCO56/article/details/126882937</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>5 HuRupdate下载<a class=link href=https://pan.baidu.com/s/1IbBS3jEWqedLsskN5mL88g target=_blank rel=noopener>https://pan.baidu.com/s/1IbBS3jEWqedLsskN5mL88g</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>6 @麦麦观饭的emui9内核<a class=link href="https://www.coolapk.com/feed/18356564?shareKey=NDkyZmJiMzdkNTE0NjNjYjllMmU~&amp;shareUid=20630802&amp;shareFrom=com.coolapk.market_13.0.1" target=_blank rel=noopener>https://www.coolapk.com/feed/18356564?shareKey=NDkyZmJiMzdkNTE0NjNjYjllMmU~&amp;shareUid=20630802&amp;shareFrom=com.coolapk.market_13.0.1</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>7 mate9刷机工具箱，里面有havoc镜像、麒麟盘古工具箱和一些工具，比较齐全了，记得全部都下载才能解压出来<a class=link href="https://pan.baidu.com/s/1HW3Mep3XBGJMSDbU-vyFNA?pwd=kuan#list/path=%2F" target=_blank rel=noopener>https://pan.baidu.com/s/1HW3Mep3XBGJMSDbU-vyFNA?pwd=kuan#list/path=%2F</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>（提取码就是kuan）</p><p>8 这个救砖教程也不错<a class=link href="https://www.coolapk.com/feed/42055424?shareKey=NWMyYWQ3ZjQxODc4NjNjYjlmYTA~&amp;shareUid=20630802&amp;shareFrom=com.coolapk.market_13.0.1" target=_blank rel=noopener>https://www.coolapk.com/feed/42055424?shareKey=NWMyYWQ3ZjQxODc4NjNjYjlmYTA~&amp;shareUid=20630802&amp;shareFrom=com.coolapk.market_13.0.1</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>9 @远灏写的刷工程包救砖的教程，我救砖是也帮了我很多的忙<a class=link href="https://www.coolapk.com/feed/42474094?shareKey=YWI5YWE5MmM0MWI5NjNjYmEwOGQ~&amp;shareUid=20630802&amp;shareFrom=com.coolapk.market_13.0.1" target=_blank rel=noopener>https://www.coolapk.com/feed/42474094?shareKey=YWI5YWE5MmM0MWI5NjNjYmEwOGQ~&amp;shareUid=20630802&amp;shareFrom=com.coolapk.market_13.0.1</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>10 @梦不见的只因写的PotatoNV救砖教程<a class=link href="https://www.coolapk.com/feed/42643165?shareKey=YzNkMzI3YzdhZTlmNjNjYmExMzg~&amp;shareUid=20630802&amp;shareFrom=com.coolapk.market_13.0.1" target=_blank rel=noopener>https://www.coolapk.com/feed/42643165?shareKey=YzNkMzI3YzdhZTlmNjNjYmExMzg~&amp;shareUid=20630802&amp;shareFrom=com.coolapk.market_13.0.1</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>11 @麦麦观饭给的解决两边失灵的magisk刷机包，没有用但是可以试试<a class=link href=https://maimaiguanfan.lanzoum.com/i8gDK0kxnjab target=_blank rel=noopener>https://maimaiguanfan.lanzoum.com/i8gDK0kxnjab</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>12 某度网盘高速下载工具，懂的都懂，刷机包基本上都是某度网盘<a class=link href="https://kinhdown.kinh.cc/?Type=APPS" target=_blank rel=noopener>https://kinhdown.kinh.cc/?Type=APPS</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>另外，教程上有的资源我就不一一放出来了</p><p>最后，记住：官方的是最好最稳定的，够用就不要瞎搞，否则一定是得不偿失。刷机这个东西和考验你的耐心和脑子。还有，未知的magisk模块不要乱装，加密的magisk模块不要用，否则后悔都来不及。降级一定要走官方途径，不要瞎搞。</p><hr><h2 id=整理一下折腾emui的一些东西大核优先调整温控修改频率>整理一下折腾EMUI的一些东西，大核优先，调整温控，修改频率</h2><p>由于ZUK Z2坏了，之前入手了一个二手P9，折腾了半个多月，从EMUI5到EMUI8到PT，都玩过，最后因为续航太差出掉了。分享一些之前自己折腾过的东西，当然由于还是古老的955，可能不一定和现在的960/970一样，给大家参考参考。
做这些的前提是把默认的省电精灵配置文件给删了，也就是删除/product/etc/hwpg下带performance和thermald的文件。</p><p>1、大核优先
EMUI5：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl><span class=nb>echo</span> <span class=m>0</span> &gt; /sys/kernel/set_hmp_thresholds/enable
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>echo</span> <span class=m>1</span> &gt; /sys/kernel/hmp/boost
</span></span></code></pre></div><p>EMUI8：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl><span class=nb>echo</span> <span class=m>0</span> &gt; /sys/kernel/set_hmp_thresholds/enable
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>echo</span> <span class=m>1</span> &gt; /sys/kernel/aes/boot_boost
</span></span></code></pre></div><p>2、修改温控（我这里改到85度和90度）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl><span class=nb>echo</span> <span class=m>85000</span> &gt; /sys/class/thermal/thermal_zone0/trip_point_0_temp
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nb>echo</span> <span class=m>90000</span> &gt; /sys/class/thermal/thermal_zone0/trip_point_1_temp
</span></span></code></pre></div><p>3、修改频率
EMUI的CPU/GPU/DDR频率会被一个叫perfhub的服务管理，如果你自己用kernel adiutor或者荣耀调频器去修改频率，会被它改回来（每次触发boost之后会被恢复到默认频率），即使你把省电精灵的配置文件全部删了，perfhub还是会有默认的boost执行。perfhub这个服务也不能被关闭，它和相机有关，关了相机就保存不了照片了。所以解决的方法只有是修改perfhub的启动权限或者通过service call直接操作perfhub这个服务。</p><p>简单介绍一下service call的用法：</p><p><code>service call SERVICE CODE [i64 INT | i32 INT | s16 STR] [intent] ...</code></p><p>SERVICE : 执行的service名称<br>CODE : 执行的方法id值<br>i64/i32/STR：数值类型<br>intent：数值<br>我这里要调用perfhub服务以及它的set方法，方法id可以在</p><p><a class=link href=https://github.com/paladinzh/decompile-hw/blob/4c3efd95f3e997b44dd4ceec506de6164192eca3/decompile/framework/hwEmui/com/huawei/hwperformance/HwPerformanceImpl.java target=_blank rel=noopener>https://github.com/paladinzh/decompile-hw/blob/4c3efd95f3e997b44dd4ceec506de6164192eca3/decompile/framework/hwEmui/com/huawei/hwperformance/HwPerformanceImpl.java</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><details><summary>内有 <del>完整</del> 版</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>  1</span><span class=cl><span class=kn>package</span> <span class=nn>com.huawei.hwperformance</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  2</span><span class=cl>
</span></span><span class=line><span class=ln>  3</span><span class=cl><span class=kn>import</span> <span class=nn>android.os.Binder</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  4</span><span class=cl><span class=kn>import</span> <span class=nn>android.os.IBinder</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  5</span><span class=cl><span class=kn>import</span> <span class=nn>android.os.Parcel</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  6</span><span class=cl><span class=kn>import</span> <span class=nn>android.os.RemoteException</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  7</span><span class=cl><span class=kn>import</span> <span class=nn>android.os.ServiceManager</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  8</span><span class=cl><span class=kn>import</span> <span class=nn>android.util.BoostFramework</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  9</span><span class=cl><span class=kn>import</span> <span class=nn>android.util.Log</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 10</span><span class=cl><span class=kn>import</span> <span class=nn>com.huawei.connectivitylog.ConnectivityLogManager</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 11</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 12</span><span class=cl>
</span></span><span class=line><span class=ln> 13</span><span class=cl><span class=kd>public</span> <span class=kd>final</span> <span class=kd>class</span> <span class=nc>HwPerformanceImpl</span> <span class=kd>implements</span> <span class=n>HwPerformance</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 14</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>B_CORE_CPUS</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 15</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>boolean</span> <span class=n>HWDBG</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 16</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>boolean</span> <span class=n>HWLOGW_E</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 17</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>L_CORE_CPUS</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 18</span><span class=cl>    <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_CONFIG_GET</span> <span class=o>=</span> <span class=n>3</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 19</span><span class=cl>    <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_CONFIG_SET</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 20</span><span class=cl>    <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 21</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_B_CPU_MAX_CODE</span> <span class=o>=</span> <span class=n>1082146816</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 22</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_B_CPU_MIN_CODE</span> <span class=o>=</span> <span class=n>1082130432</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 23</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_CTL_CPUS_ON_CODE</span> <span class=o>=</span> <span class=n>1090519040</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 24</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_CTL_CPUS_ON_LIMIT_CODE</span> <span class=o>=</span> <span class=n>1090535424</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 25</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_L_CPU_MAX_CODE</span> <span class=o>=</span> <span class=n>1082147072</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 26</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_L_CPU_MIN_CODE</span> <span class=o>=</span> <span class=n>1082130688</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 27</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PLATFORM_DEFAULT</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 28</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PLATFORM_HISI</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 29</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PLATFORM_QCOM</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 30</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>TAG</span> <span class=o>=</span> <span class=s>&#34;HwPerformanceImpl&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 31</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=n>HwPerformance</span> <span class=n>mInstance</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 32</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>Object</span> <span class=n>mLock</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Object</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 33</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kt>int</span> <span class=n>usingPlatform</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 34</span><span class=cl>
</span></span><span class=line><span class=ln> 35</span><span class=cl>    <span class=kd>static</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 36</span><span class=cl>        <span class=kt>boolean</span> <span class=n>isLoggable</span> <span class=o>=</span> <span class=o>!</span><span class=n>Log</span><span class=o>.</span><span class=na>HWLog</span> <span class=o>?</span> <span class=n>Log</span><span class=o>.</span><span class=na>HWModuleLog</span> <span class=o>?</span> <span class=n>Log</span><span class=o>.</span><span class=na>isLoggable</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=n>3</span><span class=o>)</span> <span class=o>:</span> <span class=kc>false</span> <span class=o>:</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 37</span><span class=cl>        <span class=n>HWDBG</span> <span class=o>=</span> <span class=n>isLoggable</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 38</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 39</span><span class=cl>
</span></span><span class=line><span class=ln> 40</span><span class=cl>    <span class=kd>private</span> <span class=nf>HwPerformanceImpl</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 41</span><span class=cl>        <span class=n>initUsingPlatform</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 42</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 43</span><span class=cl>
</span></span><span class=line><span class=ln> 44</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>synchronized</span> <span class=n>HwPerformance</span> <span class=nf>getDefault</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 45</span><span class=cl>        <span class=n>HwPerformance</span> <span class=n>hwPerformance</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 46</span><span class=cl>        <span class=kd>synchronized</span> <span class=o>(</span><span class=n>HwPerformanceImpl</span><span class=o>.</span><span class=na>class</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 47</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>mInstance</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 48</span><span class=cl>                <span class=n>mInstance</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HwPerformanceImpl</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 49</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln> 50</span><span class=cl>            <span class=n>hwPerformance</span> <span class=o>=</span> <span class=n>mInstance</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 51</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln> 52</span><span class=cl>        <span class=k>return</span> <span class=n>hwPerformance</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 53</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 54</span><span class=cl>
</span></span><span class=line><span class=ln> 55</span><span class=cl>    <span class=kd>private</span> <span class=kd>synchronized</span> <span class=kt>void</span> <span class=nf>initUsingPlatform</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 56</span><span class=cl>        <span class=kd>synchronized</span> <span class=o>(</span><span class=n>mLock</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 57</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>ServiceManager</span><span class=o>.</span><span class=na>checkService</span><span class=o>(</span><span class=s>&#34;perfhub&#34;</span><span class=o>)</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 58</span><span class=cl>                <span class=n>usingPlatform</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 59</span><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 60</span><span class=cl>                <span class=n>usingPlatform</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 61</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln> 62</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 63</span><span class=cl>                <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;init using Platform = &#34;</span> <span class=o>+</span> <span class=n>usingPlatform</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 64</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln> 65</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln> 66</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 67</span><span class=cl>
</span></span><span class=line><span class=ln> 68</span><span class=cl>    <span class=kd>private</span> <span class=kt>boolean</span> <span class=nf>isInputInvalid</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>tags</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>values</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 69</span><span class=cl>        <span class=kt>boolean</span> <span class=n>ret</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 70</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>tags</span> <span class=o>==</span> <span class=kc>null</span> <span class=o>||</span> <span class=n>values</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 71</span><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 72</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>tags</span><span class=o>.</span><span class=na>length</span> <span class=o>!=</span> <span class=n>values</span><span class=o>.</span><span class=na>length</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 73</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;Input Invalid length not match.&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 74</span><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 75</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln> 76</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 77</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;Input Invalid ret = &#34;</span> <span class=o>+</span> <span class=n>ret</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 78</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln> 79</span><span class=cl>        <span class=k>return</span> <span class=n>ret</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 80</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 81</span><span class=cl>
</span></span><span class=line><span class=ln> 82</span><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=nf>perfhubEvent</span><span class=o>(</span><span class=kt>int</span> <span class=n>eventId</span><span class=o>,</span> <span class=n>String</span> <span class=n>PackageName</span><span class=o>,</span> <span class=kt>int</span><span class=o>...</span> <span class=n>payload</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 83</span><span class=cl>        <span class=n>IBinder</span> <span class=n>service</span> <span class=o>=</span> <span class=n>ServiceManager</span><span class=o>.</span><span class=na>checkService</span><span class=o>(</span><span class=s>&#34;perfhub&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 84</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>service</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 85</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 86</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln> 87</span><span class=cl>        <span class=n>Parcel</span> <span class=n>data</span> <span class=o>=</span> <span class=n>Parcel</span><span class=o>.</span><span class=na>obtain</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 88</span><span class=cl>        <span class=n>Parcel</span> <span class=n>reply</span> <span class=o>=</span> <span class=n>Parcel</span><span class=o>.</span><span class=na>obtain</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 89</span><span class=cl>        <span class=n>data</span><span class=o>.</span><span class=na>writeInterfaceToken</span><span class=o>(</span><span class=s>&#34;android.os.IPerfHub&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 90</span><span class=cl>        <span class=n>data</span><span class=o>.</span><span class=na>writeInt</span><span class=o>(</span><span class=n>eventId</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 91</span><span class=cl>        <span class=n>data</span><span class=o>.</span><span class=na>writeString</span><span class=o>(</span><span class=n>PackageName</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 92</span><span class=cl>        <span class=n>data</span><span class=o>.</span><span class=na>writeInt</span><span class=o>(</span><span class=n>payload</span><span class=o>.</span><span class=na>length</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 93</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>:</span> <span class=n>payload</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 94</span><span class=cl>            <span class=n>data</span><span class=o>.</span><span class=na>writeInt</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 95</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln> 96</span><span class=cl>        <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 97</span><span class=cl>            <span class=n>service</span><span class=o>.</span><span class=na>transact</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>data</span><span class=o>,</span> <span class=n>reply</span><span class=o>,</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 98</span><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>RemoteException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 99</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;event transact Exception e = &#34;</span> <span class=o>+</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=ln>100</span><span class=cl>        <span class=o>}</span> <span class=k>finally</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>101</span><span class=cl>            <span class=n>data</span><span class=o>.</span><span class=na>recycle</span><span class=o>();</span>
</span></span><span class=line><span class=ln>102</span><span class=cl>            <span class=n>reply</span><span class=o>.</span><span class=na>recycle</span><span class=o>();</span>
</span></span><span class=line><span class=ln>103</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>104</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>105</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;perfhubEvent ret = &#34;</span> <span class=o>+</span> <span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=ln>106</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>107</span><span class=cl>        <span class=k>return</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>108</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>109</span><span class=cl>
</span></span><span class=line><span class=ln>110</span><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=nf>perfhubConfigSet</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>tags</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>values</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>111</span><span class=cl>        <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>112</span><span class=cl>        <span class=n>IBinder</span> <span class=n>service</span> <span class=o>=</span> <span class=n>ServiceManager</span><span class=o>.</span><span class=na>checkService</span><span class=o>(</span><span class=s>&#34;perfhub&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>113</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>service</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>114</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>115</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>116</span><span class=cl>        <span class=n>Parcel</span> <span class=n>data</span> <span class=o>=</span> <span class=n>Parcel</span><span class=o>.</span><span class=na>obtain</span><span class=o>();</span>
</span></span><span class=line><span class=ln>117</span><span class=cl>        <span class=n>Parcel</span> <span class=n>reply</span> <span class=o>=</span> <span class=n>Parcel</span><span class=o>.</span><span class=na>obtain</span><span class=o>();</span>
</span></span><span class=line><span class=ln>118</span><span class=cl>        <span class=n>data</span><span class=o>.</span><span class=na>writeInterfaceToken</span><span class=o>(</span><span class=s>&#34;android.os.IPerfHub&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>119</span><span class=cl>        <span class=n>data</span><span class=o>.</span><span class=na>writeInt</span><span class=o>(</span><span class=n>tags</span><span class=o>.</span><span class=na>length</span><span class=o>);</span>
</span></span><span class=line><span class=ln>120</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i2</span> <span class=o>:</span> <span class=n>tags</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>121</span><span class=cl>            <span class=n>data</span><span class=o>.</span><span class=na>writeInt</span><span class=o>(</span><span class=n>i2</span><span class=o>);</span>
</span></span><span class=line><span class=ln>122</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>123</span><span class=cl>        <span class=kt>int</span> <span class=n>length</span> <span class=o>=</span> <span class=n>values</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=ln>124</span><span class=cl>        <span class=k>while</span> <span class=o>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>length</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>125</span><span class=cl>            <span class=n>data</span><span class=o>.</span><span class=na>writeInt</span><span class=o>(</span><span class=n>values</span><span class=o>[</span><span class=n>i</span><span class=o>]);</span>
</span></span><span class=line><span class=ln>126</span><span class=cl>            <span class=n>i</span><span class=o>++;</span>
</span></span><span class=line><span class=ln>127</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>128</span><span class=cl>        <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>129</span><span class=cl>            <span class=n>service</span><span class=o>.</span><span class=na>transact</span><span class=o>(</span><span class=n>2</span><span class=o>,</span> <span class=n>data</span><span class=o>,</span> <span class=n>reply</span><span class=o>,</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=ln>130</span><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>RemoteException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>131</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;set transact Exception e = &#34;</span> <span class=o>+</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=ln>132</span><span class=cl>        <span class=o>}</span> <span class=k>finally</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>133</span><span class=cl>            <span class=n>data</span><span class=o>.</span><span class=na>recycle</span><span class=o>();</span>
</span></span><span class=line><span class=ln>134</span><span class=cl>            <span class=n>reply</span><span class=o>.</span><span class=na>recycle</span><span class=o>();</span>
</span></span><span class=line><span class=ln>135</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>136</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>137</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;perfhubConfigSet ret = &#34;</span> <span class=o>+</span> <span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=ln>138</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>139</span><span class=cl>        <span class=k>return</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>140</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>141</span><span class=cl>
</span></span><span class=line><span class=ln>142</span><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=nf>perfhubConfigGet</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>tags</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>values</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>143</span><span class=cl>        <span class=n>IBinder</span> <span class=n>service</span> <span class=o>=</span> <span class=n>ServiceManager</span><span class=o>.</span><span class=na>checkService</span><span class=o>(</span><span class=s>&#34;perfhub&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>144</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>service</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>145</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>146</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>147</span><span class=cl>        <span class=n>Parcel</span> <span class=n>data</span> <span class=o>=</span> <span class=n>Parcel</span><span class=o>.</span><span class=na>obtain</span><span class=o>();</span>
</span></span><span class=line><span class=ln>148</span><span class=cl>        <span class=n>Parcel</span> <span class=n>reply</span> <span class=o>=</span> <span class=n>Parcel</span><span class=o>.</span><span class=na>obtain</span><span class=o>();</span>
</span></span><span class=line><span class=ln>149</span><span class=cl>        <span class=n>data</span><span class=o>.</span><span class=na>writeInterfaceToken</span><span class=o>(</span><span class=s>&#34;android.os.IPerfHub&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>150</span><span class=cl>        <span class=n>data</span><span class=o>.</span><span class=na>writeInt</span><span class=o>(</span><span class=n>tags</span><span class=o>.</span><span class=na>length</span><span class=o>);</span>
</span></span><span class=line><span class=ln>151</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>:</span> <span class=n>tags</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>152</span><span class=cl>            <span class=n>data</span><span class=o>.</span><span class=na>writeInt</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=ln>153</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>154</span><span class=cl>        <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>155</span><span class=cl>            <span class=n>service</span><span class=o>.</span><span class=na>transact</span><span class=o>(</span><span class=n>3</span><span class=o>,</span> <span class=n>data</span><span class=o>,</span> <span class=n>reply</span><span class=o>,</span> <span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=ln>156</span><span class=cl>            <span class=n>reply</span><span class=o>.</span><span class=na>readException</span><span class=o>();</span>
</span></span><span class=line><span class=ln>157</span><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>loop</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>loop</span> <span class=o>&lt;</span> <span class=n>tags</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>loop</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>158</span><span class=cl>                <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>]</span> <span class=o>=</span> <span class=n>reply</span><span class=o>.</span><span class=na>readInt</span><span class=o>();</span>
</span></span><span class=line><span class=ln>159</span><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>160</span><span class=cl>                    <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;perfhubConfigGet transact values[&#34;</span> <span class=o>+</span> <span class=n>loop</span> <span class=o>+</span> <span class=s>&#34;]  = &#34;</span> <span class=o>+</span> <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>]);</span>
</span></span><span class=line><span class=ln>161</span><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=ln>162</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>163</span><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>RemoteException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>164</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;get transact Exception e = &#34;</span> <span class=o>+</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=ln>165</span><span class=cl>        <span class=o>}</span> <span class=k>finally</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>166</span><span class=cl>            <span class=n>data</span><span class=o>.</span><span class=na>recycle</span><span class=o>();</span>
</span></span><span class=line><span class=ln>167</span><span class=cl>            <span class=n>reply</span><span class=o>.</span><span class=na>recycle</span><span class=o>();</span>
</span></span><span class=line><span class=ln>168</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>169</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>170</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;perfhubConfigGet ret = &#34;</span> <span class=o>+</span> <span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=ln>171</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>172</span><span class=cl>        <span class=k>return</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>173</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>174</span><span class=cl>
</span></span><span class=line><span class=ln>175</span><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=nf>perfhubCPUSet</span><span class=o>(</span><span class=kt>int</span> <span class=n>duration</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>tags</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>values</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>176</span><span class=cl>        <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>newValues</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>();</span>
</span></span><span class=line><span class=ln>177</span><span class=cl>        <span class=kt>int</span> <span class=n>type</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>178</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>duration</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>179</span><span class=cl>            <span class=n>newValues</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>duration</span><span class=o>));</span>
</span></span><span class=line><span class=ln>180</span><span class=cl>            <span class=k>switch</span> <span class=o>(</span><span class=n>tags</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>181</span><span class=cl>                <span class=k>case</span> <span class=n>1</span><span class=o>:</span>
</span></span><span class=line><span class=ln>182</span><span class=cl>                    <span class=n>type</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>183</span><span class=cl>                    <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>184</span><span class=cl>                <span class=k>case</span> <span class=n>2</span><span class=o>:</span>
</span></span><span class=line><span class=ln>185</span><span class=cl>                    <span class=n>type</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln>186</span><span class=cl>                    <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>187</span><span class=cl>                <span class=k>case</span> <span class=n>4</span><span class=o>:</span>
</span></span><span class=line><span class=ln>188</span><span class=cl>                    <span class=n>type</span> <span class=o>=</span> <span class=n>3</span><span class=o>;</span>
</span></span><span class=line><span class=ln>189</span><span class=cl>                    <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>190</span><span class=cl>                <span class=k>case</span> <span class=n>5</span><span class=o>:</span>
</span></span><span class=line><span class=ln>191</span><span class=cl>                    <span class=n>type</span> <span class=o>=</span> <span class=n>4</span><span class=o>;</span>
</span></span><span class=line><span class=ln>192</span><span class=cl>                    <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>193</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>194</span><span class=cl>            <span class=n>newValues</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>((</span><span class=n>type</span> <span class=o>&lt;&lt;</span> <span class=n>16</span><span class=o>)</span> <span class=o>+</span> <span class=n>values</span><span class=o>[</span><span class=n>0</span><span class=o>]));</span>
</span></span><span class=line><span class=ln>195</span><span class=cl>            <span class=kt>int</span><span class=o>[]</span> <span class=n>val</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>newValues</span><span class=o>.</span><span class=na>size</span><span class=o>()];</span>
</span></span><span class=line><span class=ln>196</span><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>newValues</span><span class=o>.</span><span class=na>size</span><span class=o>();</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>197</span><span class=cl>                <span class=n>val</span><span class=o>[</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=o>((</span><span class=n>Integer</span><span class=o>)</span> <span class=n>newValues</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>j</span><span class=o>)).</span><span class=na>intValue</span><span class=o>();</span>
</span></span><span class=line><span class=ln>198</span><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>199</span><span class=cl>                    <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;hisi val j = &#34;</span> <span class=o>+</span> <span class=n>j</span> <span class=o>+</span> <span class=s>&#34;, val[j] = &#34;</span> <span class=o>+</span> <span class=n>val</span><span class=o>[</span><span class=n>j</span><span class=o>]);</span>
</span></span><span class=line><span class=ln>200</span><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=ln>201</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>202</span><span class=cl>            <span class=k>return</span> <span class=n>perfhubEvent</span><span class=o>(</span><span class=n>4096</span><span class=o>,</span> <span class=s>&#34;hwperf&#34;</span><span class=o>,</span> <span class=n>val</span><span class=o>);</span>
</span></span><span class=line><span class=ln>203</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>duration</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>204</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>205</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>206</span><span class=cl>            <span class=n>setTags</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>3</span><span class=o>];</span>
</span></span><span class=line><span class=ln>207</span><span class=cl>            <span class=kt>int</span><span class=o>[]</span> <span class=n>setVals</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>3</span><span class=o>];</span>
</span></span><span class=line><span class=ln>208</span><span class=cl>            <span class=n>setTags</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>=</span> <span class=n>tags</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=ln>209</span><span class=cl>            <span class=n>setVals</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=ln>210</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>values</span><span class=o>[</span><span class=n>3</span><span class=o>]</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>values</span><span class=o>[</span><span class=n>3</span><span class=o>]</span> <span class=o>&lt;</span> <span class=n>4</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>211</span><span class=cl>                <span class=n>setTags</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>=</span> <span class=n>tags</span><span class=o>[</span><span class=n>3</span><span class=o>];</span>
</span></span><span class=line><span class=ln>212</span><span class=cl>                <span class=n>setVals</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>3</span><span class=o>];</span>
</span></span><span class=line><span class=ln>213</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>214</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>values</span><span class=o>[</span><span class=n>4</span><span class=o>]</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>values</span><span class=o>[</span><span class=n>4</span><span class=o>]</span> <span class=o>&lt;=</span> <span class=n>1</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>215</span><span class=cl>                <span class=n>setTags</span><span class=o>[</span><span class=n>2</span><span class=o>]</span> <span class=o>=</span> <span class=n>tags</span><span class=o>[</span><span class=n>4</span><span class=o>];</span>
</span></span><span class=line><span class=ln>216</span><span class=cl>                <span class=n>setVals</span><span class=o>[</span><span class=n>2</span><span class=o>]</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>4</span><span class=o>];</span>
</span></span><span class=line><span class=ln>217</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>218</span><span class=cl>            <span class=k>return</span> <span class=n>perfhubConfigSet</span><span class=o>(</span><span class=n>setTags</span><span class=o>,</span> <span class=n>setVals</span><span class=o>);</span>
</span></span><span class=line><span class=ln>219</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>220</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>221</span><span class=cl>
</span></span><span class=line><span class=ln>222</span><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=nf>perfLockCPUSet</span><span class=o>(</span><span class=kt>int</span> <span class=n>duration</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>tags</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>values</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>223</span><span class=cl>        <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>newValues</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>();</span>
</span></span><span class=line><span class=ln>224</span><span class=cl>        <span class=kt>int</span> <span class=n>type</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>225</span><span class=cl>        <span class=n>BoostFramework</span> <span class=n>perf</span> <span class=o>=</span> <span class=k>new</span> <span class=n>BoostFramework</span><span class=o>();</span>
</span></span><span class=line><span class=ln>226</span><span class=cl>        <span class=k>switch</span> <span class=o>(</span><span class=n>tags</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>227</span><span class=cl>            <span class=k>case</span> <span class=n>1</span><span class=o>:</span>
</span></span><span class=line><span class=ln>228</span><span class=cl>                <span class=n>type</span> <span class=o>=</span> <span class=n>PERF_TAG_L_CPU_MIN_CODE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>229</span><span class=cl>                <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>230</span><span class=cl>            <span class=k>case</span> <span class=n>2</span><span class=o>:</span>
</span></span><span class=line><span class=ln>231</span><span class=cl>                <span class=n>type</span> <span class=o>=</span> <span class=n>PERF_TAG_L_CPU_MAX_CODE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>232</span><span class=cl>                <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>233</span><span class=cl>            <span class=k>case</span> <span class=n>4</span><span class=o>:</span>
</span></span><span class=line><span class=ln>234</span><span class=cl>                <span class=n>type</span> <span class=o>=</span> <span class=n>PERF_TAG_B_CPU_MIN_CODE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>235</span><span class=cl>                <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>236</span><span class=cl>            <span class=k>case</span> <span class=n>5</span><span class=o>:</span>
</span></span><span class=line><span class=ln>237</span><span class=cl>                <span class=n>type</span> <span class=o>=</span> <span class=n>PERF_TAG_B_CPU_MAX_CODE</span><span class=o>;</span>
</span></span><span class=line><span class=ln>238</span><span class=cl>                <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>239</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>240</span><span class=cl>        <span class=n>newValues</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>type</span><span class=o>));</span>
</span></span><span class=line><span class=ln>241</span><span class=cl>        <span class=n>newValues</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>values</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>/</span> <span class=n>10</span><span class=o>));</span>
</span></span><span class=line><span class=ln>242</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>values</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>243</span><span class=cl>            <span class=n>newValues</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>PERF_TAG_CTL_CPUS_ON_CODE</span><span class=o>));</span>
</span></span><span class=line><span class=ln>244</span><span class=cl>            <span class=n>newValues</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>values</span><span class=o>[</span><span class=n>1</span><span class=o>]));</span>
</span></span><span class=line><span class=ln>245</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>246</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>values</span><span class=o>[</span><span class=n>2</span><span class=o>]</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>247</span><span class=cl>            <span class=n>newValues</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>PERF_TAG_CTL_CPUS_ON_LIMIT_CODE</span><span class=o>));</span>
</span></span><span class=line><span class=ln>248</span><span class=cl>            <span class=n>newValues</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>values</span><span class=o>[</span><span class=n>2</span><span class=o>]));</span>
</span></span><span class=line><span class=ln>249</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>250</span><span class=cl>        <span class=kt>int</span><span class=o>[]</span> <span class=n>param</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>newValues</span><span class=o>.</span><span class=na>size</span><span class=o>()];</span>
</span></span><span class=line><span class=ln>251</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>newValues</span><span class=o>.</span><span class=na>size</span><span class=o>();</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>252</span><span class=cl>            <span class=n>param</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=o>((</span><span class=n>Integer</span><span class=o>)</span> <span class=n>newValues</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>i</span><span class=o>)).</span><span class=na>intValue</span><span class=o>();</span>
</span></span><span class=line><span class=ln>253</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>254</span><span class=cl>                <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;qcom param i = &#34;</span> <span class=o>+</span> <span class=n>i</span> <span class=o>+</span> <span class=s>&#34;, param[i] = &#34;</span> <span class=o>+</span> <span class=n>param</span><span class=o>[</span><span class=n>i</span><span class=o>]);</span>
</span></span><span class=line><span class=ln>255</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>256</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>257</span><span class=cl>        <span class=k>return</span> <span class=n>perf</span><span class=o>.</span><span class=na>perfLockAcquire</span><span class=o>(</span><span class=n>duration</span><span class=o>,</span> <span class=n>param</span><span class=o>);</span>
</span></span><span class=line><span class=ln>258</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>259</span><span class=cl>
</span></span><span class=line><span class=ln>260</span><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=nf>perfLockIOSet</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>isStart</span><span class=o>,</span> <span class=kt>int</span> <span class=n>pid</span><span class=o>,</span> <span class=n>String</span> <span class=n>pkg_name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>261</span><span class=cl>        <span class=n>BoostFramework</span> <span class=n>perf</span> <span class=o>=</span> <span class=k>new</span> <span class=n>BoostFramework</span><span class=o>();</span>
</span></span><span class=line><span class=ln>262</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>isStart</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>263</span><span class=cl>            <span class=k>return</span> <span class=n>perf</span><span class=o>.</span><span class=na>perfIOPrefetchStart</span><span class=o>(</span><span class=n>pid</span><span class=o>,</span> <span class=n>pkg_name</span><span class=o>);</span>
</span></span><span class=line><span class=ln>264</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>265</span><span class=cl>        <span class=k>return</span> <span class=n>perf</span><span class=o>.</span><span class=na>perfIOPrefetchStop</span><span class=o>();</span>
</span></span><span class=line><span class=ln>266</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>267</span><span class=cl>
</span></span><span class=line><span class=ln>268</span><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=nf>handleIOSet</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>isStart</span><span class=o>,</span> <span class=kt>int</span> <span class=n>pid</span><span class=o>,</span> <span class=n>String</span> <span class=n>pkg_name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>269</span><span class=cl>        <span class=kt>int</span> <span class=n>ret</span><span class=o>;</span>
</span></span><span class=line><span class=ln>270</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>1</span> <span class=o>==</span> <span class=n>usingPlatform</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>271</span><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=n>perfLockIOSet</span><span class=o>(</span><span class=n>isStart</span><span class=o>,</span> <span class=n>pid</span><span class=o>,</span> <span class=n>pkg_name</span><span class=o>);</span>
</span></span><span class=line><span class=ln>272</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>273</span><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=o>-</span><span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln>274</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>275</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>276</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;handleIOSet ret = &#34;</span> <span class=o>+</span> <span class=n>ret</span><span class=o>);</span>
</span></span><span class=line><span class=ln>277</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>278</span><span class=cl>        <span class=k>return</span> <span class=n>ret</span><span class=o>;</span>
</span></span><span class=line><span class=ln>279</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>280</span><span class=cl>
</span></span><span class=line><span class=ln>281</span><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=nf>handleCPUSet</span><span class=o>(</span><span class=kt>int</span> <span class=n>duration</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>tags</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>values</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>282</span><span class=cl>        <span class=kt>int</span> <span class=n>ret</span><span class=o>;</span>
</span></span><span class=line><span class=ln>283</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>284</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;handleCPUSet duration = &#34;</span> <span class=o>+</span> <span class=n>duration</span> <span class=o>+</span> <span class=s>&#34;, usingPlatform = &#34;</span> <span class=o>+</span> <span class=n>usingPlatform</span><span class=o>);</span>
</span></span><span class=line><span class=ln>285</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>286</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>1</span> <span class=o>==</span> <span class=n>usingPlatform</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>287</span><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=n>perfLockCPUSet</span><span class=o>(</span><span class=n>duration</span><span class=o>,</span> <span class=n>tags</span><span class=o>,</span> <span class=n>values</span><span class=o>);</span>
</span></span><span class=line><span class=ln>288</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>2</span> <span class=o>==</span> <span class=n>usingPlatform</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>289</span><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=n>perfhubCPUSet</span><span class=o>(</span><span class=n>duration</span><span class=o>,</span> <span class=n>tags</span><span class=o>,</span> <span class=n>values</span><span class=o>);</span>
</span></span><span class=line><span class=ln>290</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>291</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;handleCPUSet other platform&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>292</span><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=o>-</span><span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln>293</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>294</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>295</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;handleCPUSet ret = &#34;</span> <span class=o>+</span> <span class=n>ret</span><span class=o>);</span>
</span></span><span class=line><span class=ln>296</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>297</span><span class=cl>        <span class=k>return</span> <span class=n>ret</span><span class=o>;</span>
</span></span><span class=line><span class=ln>298</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>299</span><span class=cl>
</span></span><span class=line><span class=ln>300</span><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=nf>handleEventSet</span><span class=o>(</span><span class=kt>int</span> <span class=n>eventId</span><span class=o>,</span> <span class=n>String</span> <span class=n>PackageName</span><span class=o>,</span> <span class=kt>int</span><span class=o>...</span> <span class=n>payload</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>301</span><span class=cl>        <span class=kt>int</span> <span class=n>ret</span><span class=o>;</span>
</span></span><span class=line><span class=ln>302</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>2</span> <span class=o>==</span> <span class=n>usingPlatform</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>303</span><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=n>perfhubEvent</span><span class=o>(</span><span class=n>eventId</span><span class=o>,</span> <span class=n>PackageName</span><span class=o>,</span> <span class=n>payload</span><span class=o>);</span>
</span></span><span class=line><span class=ln>304</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>ret</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>305</span><span class=cl>                <span class=n>ret</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>306</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>307</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>308</span><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=o>-</span><span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln>309</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>310</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>311</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;handleEventSet ret = &#34;</span> <span class=o>+</span> <span class=n>ret</span><span class=o>);</span>
</span></span><span class=line><span class=ln>312</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>313</span><span class=cl>        <span class=k>return</span> <span class=n>ret</span><span class=o>;</span>
</span></span><span class=line><span class=ln>314</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>315</span><span class=cl>
</span></span><span class=line><span class=ln>316</span><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>perfConfigSet</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>tags</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>values</span><span class=o>,</span> <span class=n>String</span> <span class=n>pkg_name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>317</span><span class=cl>        <span class=kt>int</span> <span class=n>pid</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>318</span><span class=cl>        <span class=kt>int</span> <span class=n>payload</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>319</span><span class=cl>        <span class=kt>int</span> <span class=n>eventId</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>320</span><span class=cl>        <span class=kt>int</span> <span class=n>duration</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>321</span><span class=cl>        <span class=kt>int</span> <span class=n>powerType</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>322</span><span class=cl>        <span class=kt>int</span> <span class=n>onBCluster</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>323</span><span class=cl>        <span class=kt>int</span> <span class=n>cpusOn</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>324</span><span class=cl>        <span class=kt>int</span> <span class=n>cpusOnLimit</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>325</span><span class=cl>        <span class=kt>int</span><span class=o>[]</span> <span class=n>cpuTags</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>5</span><span class=o>];</span>
</span></span><span class=line><span class=ln>326</span><span class=cl>        <span class=kt>int</span><span class=o>[]</span> <span class=n>cpuValues</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>5</span><span class=o>];</span>
</span></span><span class=line><span class=ln>327</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>Binder</span><span class=o>.</span><span class=na>getCallingUid</span><span class=o>()</span> <span class=o>!=</span> <span class=n>1000</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>328</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>i</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;Permission denied for the caller is not systemic&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>329</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>330</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>isInputInvalid</span><span class=o>(</span><span class=n>tags</span><span class=o>,</span> <span class=n>values</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>331</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>3</span><span class=o>;</span>
</span></span><span class=line><span class=ln>332</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>333</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>334</span><span class=cl>                <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;perfConfigSet start read param&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>335</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>336</span><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>loop</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>loop</span> <span class=o>&lt;</span> <span class=n>tags</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>loop</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>337</span><span class=cl>                <span class=k>switch</span> <span class=o>(</span><span class=n>tags</span><span class=o>[</span><span class=n>loop</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>338</span><span class=cl>                    <span class=k>case</span> <span class=n>0</span><span class=o>:</span>
</span></span><span class=line><span class=ln>339</span><span class=cl>                        <span class=n>powerType</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>];</span>
</span></span><span class=line><span class=ln>340</span><span class=cl>                        <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>341</span><span class=cl>                    <span class=k>case</span> <span class=n>1</span><span class=o>:</span>
</span></span><span class=line><span class=ln>342</span><span class=cl>                    <span class=k>case</span> <span class=n>2</span><span class=o>:</span>
</span></span><span class=line><span class=ln>343</span><span class=cl>                    <span class=k>case</span> <span class=n>4</span><span class=o>:</span>
</span></span><span class=line><span class=ln>344</span><span class=cl>                    <span class=k>case</span> <span class=n>5</span><span class=o>:</span>
</span></span><span class=line><span class=ln>345</span><span class=cl>                        <span class=n>cpuTags</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>=</span> <span class=n>tags</span><span class=o>[</span><span class=n>loop</span><span class=o>];</span>
</span></span><span class=line><span class=ln>346</span><span class=cl>                        <span class=n>cpuValues</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>];</span>
</span></span><span class=line><span class=ln>347</span><span class=cl>                        <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>348</span><span class=cl>                    <span class=k>case</span> <span class=n>20</span><span class=o>:</span>
</span></span><span class=line><span class=ln>349</span><span class=cl>                        <span class=n>onBCluster</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>];</span>
</span></span><span class=line><span class=ln>350</span><span class=cl>                        <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>351</span><span class=cl>                    <span class=k>case</span> <span class=n>101</span><span class=o>:</span>
</span></span><span class=line><span class=ln>352</span><span class=cl>                        <span class=n>cpusOn</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>];</span>
</span></span><span class=line><span class=ln>353</span><span class=cl>                        <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>354</span><span class=cl>                    <span class=k>case</span> <span class=n>ConnectivityLogManager</span><span class=o>.</span><span class=na>WIFI_ACCESS_WEB_SLOWLY</span> <span class=cm>/*102*/</span><span class=o>:</span>
</span></span><span class=line><span class=ln>355</span><span class=cl>                        <span class=n>cpusOnLimit</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>];</span>
</span></span><span class=line><span class=ln>356</span><span class=cl>                        <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>357</span><span class=cl>                    <span class=k>case</span> <span class=n>ConnectivityLogManager</span><span class=o>.</span><span class=na>WIFI_POOR_LEVEL</span> <span class=cm>/*103*/</span><span class=o>:</span>
</span></span><span class=line><span class=ln>358</span><span class=cl>                        <span class=n>eventId</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>];</span>
</span></span><span class=line><span class=ln>359</span><span class=cl>                        <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>360</span><span class=cl>                    <span class=k>case</span> <span class=n>ConnectivityLogManager</span><span class=o>.</span><span class=na>WIFI_ACCESS_WEB_SLOWLY_EX</span> <span class=cm>/*104*/</span><span class=o>:</span>
</span></span><span class=line><span class=ln>361</span><span class=cl>                        <span class=n>payload</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>];</span>
</span></span><span class=line><span class=ln>362</span><span class=cl>                        <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>363</span><span class=cl>                    <span class=k>case</span> <span class=n>105</span><span class=o>:</span>
</span></span><span class=line><span class=ln>364</span><span class=cl>                        <span class=n>pid</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>];</span>
</span></span><span class=line><span class=ln>365</span><span class=cl>                        <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>366</span><span class=cl>                    <span class=k>case</span> <span class=n>CharacterSets</span><span class=o>.</span><span class=na>DEFAULT_CHARSET</span> <span class=cm>/*106*/</span><span class=o>:</span>
</span></span><span class=line><span class=ln>367</span><span class=cl>                        <span class=n>duration</span> <span class=o>=</span> <span class=n>values</span><span class=o>[</span><span class=n>loop</span><span class=o>];</span>
</span></span><span class=line><span class=ln>368</span><span class=cl>                        <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>369</span><span class=cl>                    <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=ln>370</span><span class=cl>                        <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>371</span><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=ln>372</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>373</span><span class=cl>            <span class=n>cpuTags</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>=</span> <span class=n>101</span><span class=o>;</span>
</span></span><span class=line><span class=ln>374</span><span class=cl>            <span class=n>cpuValues</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>=</span> <span class=n>cpusOn</span><span class=o>;</span>
</span></span><span class=line><span class=ln>375</span><span class=cl>            <span class=n>cpuTags</span><span class=o>[</span><span class=n>2</span><span class=o>]</span> <span class=o>=</span> <span class=n>ConnectivityLogManager</span><span class=o>.</span><span class=na>WIFI_ACCESS_WEB_SLOWLY</span><span class=o>;</span>
</span></span><span class=line><span class=ln>376</span><span class=cl>            <span class=n>cpuValues</span><span class=o>[</span><span class=n>2</span><span class=o>]</span> <span class=o>=</span> <span class=n>cpusOnLimit</span><span class=o>;</span>
</span></span><span class=line><span class=ln>377</span><span class=cl>            <span class=n>cpuTags</span><span class=o>[</span><span class=n>3</span><span class=o>]</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>378</span><span class=cl>            <span class=n>cpuValues</span><span class=o>[</span><span class=n>3</span><span class=o>]</span> <span class=o>=</span> <span class=n>powerType</span><span class=o>;</span>
</span></span><span class=line><span class=ln>379</span><span class=cl>            <span class=n>cpuTags</span><span class=o>[</span><span class=n>4</span><span class=o>]</span> <span class=o>=</span> <span class=n>20</span><span class=o>;</span>
</span></span><span class=line><span class=ln>380</span><span class=cl>            <span class=n>cpuValues</span><span class=o>[</span><span class=n>4</span><span class=o>]</span> <span class=o>=</span> <span class=n>onBCluster</span><span class=o>;</span>
</span></span><span class=line><span class=ln>381</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>382</span><span class=cl>                <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;perfConfigSet start handle set&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>383</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>384</span><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>tags</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>385</span><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>100</span> <span class=o>==</span> <span class=n>tags</span><span class=o>[</span><span class=n>i</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>386</span><span class=cl>                    <span class=k>switch</span> <span class=o>(</span><span class=n>values</span><span class=o>[</span><span class=n>i</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>387</span><span class=cl>                        <span class=k>case</span> <span class=n>0</span><span class=o>:</span>
</span></span><span class=line><span class=ln>388</span><span class=cl>                            <span class=n>handleIOSet</span><span class=o>(</span><span class=kc>true</span><span class=o>,</span> <span class=n>pid</span><span class=o>,</span> <span class=n>pkg_name</span><span class=o>);</span>
</span></span><span class=line><span class=ln>389</span><span class=cl>                            <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>390</span><span class=cl>                        <span class=k>case</span> <span class=n>1</span><span class=o>:</span>
</span></span><span class=line><span class=ln>391</span><span class=cl>                            <span class=n>handleIOSet</span><span class=o>(</span><span class=kc>false</span><span class=o>,</span> <span class=n>pid</span><span class=o>,</span> <span class=n>pkg_name</span><span class=o>);</span>
</span></span><span class=line><span class=ln>392</span><span class=cl>                            <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>393</span><span class=cl>                        <span class=k>case</span> <span class=n>2</span><span class=o>:</span>
</span></span><span class=line><span class=ln>394</span><span class=cl>                        <span class=k>case</span> <span class=n>3</span><span class=o>:</span>
</span></span><span class=line><span class=ln>395</span><span class=cl>                        <span class=k>case</span> <span class=n>5</span><span class=o>:</span>
</span></span><span class=line><span class=ln>396</span><span class=cl>                        <span class=k>case</span> <span class=n>6</span><span class=o>:</span>
</span></span><span class=line><span class=ln>397</span><span class=cl>                            <span class=n>handleCPUSet</span><span class=o>(</span><span class=n>duration</span><span class=o>,</span> <span class=n>cpuTags</span><span class=o>,</span> <span class=n>cpuValues</span><span class=o>);</span>
</span></span><span class=line><span class=ln>398</span><span class=cl>                            <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>399</span><span class=cl>                        <span class=k>case</span> <span class=n>12</span><span class=o>:</span>
</span></span><span class=line><span class=ln>400</span><span class=cl>                            <span class=n>handleEventSet</span><span class=o>(</span><span class=n>eventId</span><span class=o>,</span> <span class=n>pkg_name</span><span class=o>,</span> <span class=n>payload</span><span class=o>);</span>
</span></span><span class=line><span class=ln>401</span><span class=cl>                            <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>402</span><span class=cl>                        <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=ln>403</span><span class=cl>                            <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=ln>404</span><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=ln>405</span><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=ln>406</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>407</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>408</span><span class=cl>                <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;perfConfigSet ret = &#34;</span> <span class=o>+</span> <span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=ln>409</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>410</span><span class=cl>            <span class=k>return</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>411</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>412</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>413</span><span class=cl>
</span></span><span class=line><span class=ln>414</span><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>perfConfigGet</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>tags</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>values</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>415</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>Binder</span><span class=o>.</span><span class=na>getCallingUid</span><span class=o>()</span> <span class=o>!=</span> <span class=n>1000</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>416</span><span class=cl>            <span class=n>Log</span><span class=o>.</span><span class=na>i</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;Permission denied for the caller is not systemic&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>417</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>418</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>isInputInvalid</span><span class=o>(</span><span class=n>tags</span><span class=o>,</span> <span class=n>values</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>419</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>3</span><span class=o>;</span>
</span></span><span class=line><span class=ln>420</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>421</span><span class=cl>            <span class=kt>int</span> <span class=n>ret</span><span class=o>;</span>
</span></span><span class=line><span class=ln>422</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>1</span> <span class=o>==</span> <span class=n>usingPlatform</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>423</span><span class=cl>                <span class=n>ret</span> <span class=o>=</span> <span class=o>-</span><span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln>424</span><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>2</span> <span class=o>!=</span> <span class=n>usingPlatform</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>425</span><span class=cl>                <span class=n>ret</span> <span class=o>=</span> <span class=o>-</span><span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln>426</span><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>perfhubConfigGet</span><span class=o>(</span><span class=n>tags</span><span class=o>,</span> <span class=n>values</span><span class=o>)</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>427</span><span class=cl>                <span class=n>ret</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>428</span><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>429</span><span class=cl>                <span class=n>ret</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>430</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>431</span><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>HWDBG</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>432</span><span class=cl>                <span class=n>Log</span><span class=o>.</span><span class=na>d</span><span class=o>(</span><span class=n>TAG</span><span class=o>,</span> <span class=s>&#34;perfConfigGet ret = &#34;</span> <span class=o>+</span> <span class=n>ret</span><span class=o>);</span>
</span></span><span class=line><span class=ln>433</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>434</span><span class=cl>            <span class=k>return</span> <span class=n>ret</span><span class=o>;</span>
</span></span><span class=line><span class=ln>435</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>436</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>437</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div></details><p>这里查到PERF_CONFIG_SET = 2，也就是2</p><p>这边https://github.com/paladinzh/decompile-hw/blob/4c3efd95f3e997b44dd4ceec506de6164192eca3/decompile/framework/com.hisi.perfhub/com/hisi/perfhub/PerfHub.java</p><details><summary>内有 <del>完整</del> 版</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>  1</span><span class=cl><span class=kn>package</span> <span class=nn>com.hisi.perfhub</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  2</span><span class=cl>
</span></span><span class=line><span class=ln>  3</span><span class=cl><span class=kd>public</span> <span class=kd>final</span> <span class=kd>class</span> <span class=nc>PerfHub</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>  4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_CTRL_TYPE_HIGHPERF</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  5</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_CTRL_TYPE_LOW_TEMP_LOW_VOLTAGE</span> <span class=o>=</span> <span class=n>4</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  6</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_CTRL_TYPE_LOW_VOLTAGE</span> <span class=o>=</span> <span class=n>3</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  7</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_CTRL_TYPE_MAX</span> <span class=o>=</span> <span class=n>5</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  8</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_CTRL_TYPE_SPEC_SCENE</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>  9</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_CTRL_TYPE_THERMAL_PROTECT</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 10</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_ANIMATION</span> <span class=o>=</span> <span class=n>7</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 11</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_APP_START</span> <span class=o>=</span> <span class=n>4</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 12</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_BOOT_COMPLETE</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 13</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_DECODEBITMAP</span> <span class=o>=</span> <span class=n>4101</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 14</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_INTERACTION</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 15</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_IOP</span> <span class=o>=</span> <span class=n>4100</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 16</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_LANDSCAPE</span> <span class=o>=</span> <span class=n>4103</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 17</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_LIST_FLING</span> <span class=o>=</span> <span class=n>8</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 18</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_MAX</span> <span class=o>=</span> <span class=n>12</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 19</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_OFF</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 20</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_ON</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 21</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_PROBE</span> <span class=o>=</span> <span class=n>4097</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 22</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_PROBE_DRAWFRAME</span> <span class=o>=</span> <span class=n>4102</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 23</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_RAW_REQ</span> <span class=o>=</span> <span class=n>4096</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 24</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_RESTART</span> <span class=o>=</span> <span class=n>4098</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 25</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_ROTATING</span> <span class=o>=</span> <span class=n>6</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 26</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_SCREEN_OFF</span> <span class=o>=</span> <span class=n>10</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 27</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_SCREEN_ON</span> <span class=o>=</span> <span class=n>9</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 28</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_STATUSBAR</span> <span class=o>=</span> <span class=n>11</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 29</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_SUSTAINEDMODE</span> <span class=o>=</span> <span class=n>4099</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 30</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_VSYNC_OFF</span> <span class=o>=</span> <span class=n>3</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 31</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_VSYNC_ON</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 32</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_EVENT_WINDOW_SWITCH</span> <span class=o>=</span> <span class=n>5</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 33</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_HMP_POLICY_STATE_OFF</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 34</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_HMP_POLICY_STATE_ON</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 35</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_HMP_PRIORITY_0</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 36</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_HMP_PRIORITY_1</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 37</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_HMP_PRIORITY_2</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 38</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_HMP_PRIORITY_3</span> <span class=o>=</span> <span class=n>3</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 39</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_HMP_PRIORITY_4</span> <span class=o>=</span> <span class=n>4</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 40</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_HMP_PRIORITY_5</span> <span class=o>=</span> <span class=n>5</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 41</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_HMP_PRIORITY_MAX</span> <span class=o>=</span> <span class=n>6</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 42</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_IOPREFETCH_START</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 43</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_IOPREFETCH_STOP</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 44</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_STATE_OFF</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 45</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_STATE_ON</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 46</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_AVL_B_CPU_FREQ_LIST</span> <span class=o>=</span> <span class=n>35</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 47</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_AVL_DDR_FREQ_LIST</span> <span class=o>=</span> <span class=n>37</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 48</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_AVL_GPU_FREQ_LIST</span> <span class=o>=</span> <span class=n>36</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 49</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_AVL_L_CPU_FREQ_LIST</span> <span class=o>=</span> <span class=n>34</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 50</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_B_CPU_CUR</span> <span class=o>=</span> <span class=n>6</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 51</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_B_CPU_MAX</span> <span class=o>=</span> <span class=n>5</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 52</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_B_CPU_MIN</span> <span class=o>=</span> <span class=n>4</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 53</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_CTRL_TYPE</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 54</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_CTRL_TYPE_NEW</span> <span class=o>=</span> <span class=n>38</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 55</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DDR_CUR</span> <span class=o>=</span> <span class=n>12</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 56</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DDR_MAX</span> <span class=o>=</span> <span class=n>11</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 57</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DDR_MIN</span> <span class=o>=</span> <span class=n>10</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 58</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_B_CPU_MAX</span> <span class=o>=</span> <span class=n>24</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 59</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_B_CPU_MIN</span> <span class=o>=</span> <span class=n>23</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 60</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_DDR_MAX</span> <span class=o>=</span> <span class=n>28</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 61</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_DDR_MIN</span> <span class=o>=</span> <span class=n>27</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 62</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_GPU_MAX</span> <span class=o>=</span> <span class=n>26</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 63</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_GPU_MIN</span> <span class=o>=</span> <span class=n>25</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 64</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_HMP_DN_THRES</span> <span class=o>=</span> <span class=n>30</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 65</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_HMP_UP_THRES</span> <span class=o>=</span> <span class=n>29</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 66</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_IPA_CONTROL_TEMP</span> <span class=o>=</span> <span class=n>32</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 67</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_IPA_SUSTAINABLE_POWER</span> <span class=o>=</span> <span class=n>33</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 68</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_IPA_SWITCH_TEMP</span> <span class=o>=</span> <span class=n>31</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 69</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_L_CPU_MAX</span> <span class=o>=</span> <span class=n>22</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 70</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_DEF_L_CPU_MIN</span> <span class=o>=</span> <span class=n>21</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 71</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_GPU_CUR</span> <span class=o>=</span> <span class=n>9</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 72</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_GPU_MAX</span> <span class=o>=</span> <span class=n>8</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 73</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_GPU_MIN</span> <span class=o>=</span> <span class=n>7</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 74</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_HMP_DN_THRES</span> <span class=o>=</span> <span class=n>14</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 75</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_HMP_POLICY_STATE</span> <span class=o>=</span> <span class=n>16</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 76</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_HMP_PRIORITY</span> <span class=o>=</span> <span class=n>15</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 77</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_HMP_UP_THRES</span> <span class=o>=</span> <span class=n>13</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 78</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_IPA_CONTROL_TEMP</span> <span class=o>=</span> <span class=n>18</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 79</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_IPA_SUSTAINABLE_POWER</span> <span class=o>=</span> <span class=n>19</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 80</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_IPA_SWITCH_TEMP</span> <span class=o>=</span> <span class=n>17</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 81</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_L_CPU_CUR</span> <span class=o>=</span> <span class=n>3</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 82</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_L_CPU_MAX</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 83</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_L_CPU_MIN</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 84</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_MAX</span> <span class=o>=</span> <span class=n>39</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 85</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>PERF_TAG_TASK_FORK_ON_B_CLUSTER</span> <span class=o>=</span> <span class=n>20</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 86</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>REQUEST_FAILED</span> <span class=o>=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 87</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>REQUEST_SUCCEEDED</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 88</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>TAG</span> <span class=o>=</span> <span class=s>&#34;PF_API_JAVA&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 89</span><span class=cl>
</span></span><span class=line><span class=ln> 90</span><span class=cl>    <span class=kd>private</span> <span class=kd>native</span> <span class=kt>int</span> <span class=nf>native_perf_config_get</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>iArr</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>iArr2</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 91</span><span class=cl>
</span></span><span class=line><span class=ln> 92</span><span class=cl>    <span class=kd>private</span> <span class=kd>native</span> <span class=kt>int</span> <span class=nf>native_perf_config_set</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>iArr</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>iArr2</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 93</span><span class=cl>
</span></span><span class=line><span class=ln> 94</span><span class=cl>    <span class=kd>private</span> <span class=kd>native</span> <span class=kt>int</span> <span class=nf>native_perf_event</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>,</span> <span class=n>String</span> <span class=n>str</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>iArr</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 95</span><span class=cl>
</span></span><span class=line><span class=ln> 96</span><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>perfEvent</span><span class=o>(</span><span class=kt>int</span> <span class=n>eventId</span><span class=o>,</span> <span class=n>String</span> <span class=n>PackageName</span><span class=o>,</span> <span class=kt>int</span><span class=o>...</span> <span class=n>payload</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 97</span><span class=cl>        <span class=kt>int</span> <span class=n>ret</span> <span class=o>=</span> <span class=n>native_perf_event</span><span class=o>(</span><span class=n>eventId</span><span class=o>,</span> <span class=n>PackageName</span><span class=o>,</span> <span class=n>payload</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 98</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>ret</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 99</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>100</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>101</span><span class=cl>        <span class=k>return</span> <span class=n>ret</span><span class=o>;</span>
</span></span><span class=line><span class=ln>102</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>103</span><span class=cl>
</span></span><span class=line><span class=ln>104</span><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>perfConfigSet</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>tags</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>values</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>105</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>native_perf_config_set</span><span class=o>(</span><span class=n>tags</span><span class=o>,</span> <span class=n>values</span><span class=o>)</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>106</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>107</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>108</span><span class=cl>        <span class=k>return</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>109</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>110</span><span class=cl>
</span></span><span class=line><span class=ln>111</span><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>perfConfigGet</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>tags</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>values</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>112</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>native_perf_config_get</span><span class=o>(</span><span class=n>tags</span><span class=o>,</span> <span class=n>values</span><span class=o>)</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>113</span><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=ln>114</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>115</span><span class=cl>        <span class=k>return</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=ln>116</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>117</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div></details><p>可以看到set方法应该只有两个参数，但是我自己测下来前面还得加个参数2才能生效（不知道啥原因），后面两个参数一个是tag，另一个是要改的值，tag表示的意义可以在前面那个链接里查到，比如
PERF_TAG_GPU_MAX = 8（GPU最大频率）PERF_TAG_B_CPU_MAX = 5（CPU大核最大频率）</p><p>那就可以开始改了：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>service call perfhub <span class=m>2</span> i64 <span class=m>2</span> i64 <span class=m>5</span> i64 2304000（修改大核最大频率至2304）
</span></span><span class=line><span class=ln>2</span><span class=cl>service call perfhub <span class=m>2</span> i64 <span class=m>2</span> i64 <span class=m>8</span> i64 800000000（修改GPU最大频率至800）
</span></span></code></pre></div><p>不过，有些频率是改不了的，比如大核最低频率无法改到480（其实是有480这一挡的，而且我用起来也没啥问题）
4、降低perfhub默认大核boost频率
修改/vendor/etc/build.prop，把ro.config.hw_perfhub改成false，这样大核默认boost频率会从2304降低成2016，可配合大核降频使用。
5、禁用省电精灵后跑分降低的问题
主要问题在DDR频率上，省电精灵会在检测到跑分程序的时候把内存最低频率锁定在最高第二档上（P9上就是800，最高是933），禁用之后跑分时DDR频率基本不会超过最高第二档，导致跑分内存性能降低，如果手动锁定在最高频率，跑分成绩就和原来的差不多了</p><p><strong>华为P10固件反编译</strong><a class=link href=https://github.com/paladinzh/decompile-hw target=_blank rel=noopener>GitHub - paladinzh/decompile-hw</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><blockquote><p>搞机工具集合 <a class=link href=http://bbs.ydss.cn/thread-1525060-1-1.html target=_blank rel=noopener>http://bbs.ydss.cn/thread-1525060-1-1.html</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>6x解锁全过程 <a class=link href=https://blog.csdn.net/keyiis_sh/article/details/131490490 target=_blank rel=noopener>https://blog.csdn.net/keyiis_sh/article/details/131490490</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>X9升级降级 <a class=link href=https://coco56.blog.csdn.net/article/details/126863581 target=_blank rel=noopener>https://coco56.blog.csdn.net/article/details/126863581</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p></blockquote><details><summary>骁龙版本的海外华为解锁方式</summary><p>Bootloader解锁前准备华为/荣耀手机：</p><p>基本上在这里，在进入引导加载程序模式之前，您必须启用以下两件事：<br>– 在您拥有的 PC（Windows、Linux 或 MAC）上安装 ADB 和 Fastboot 实用程序。<br>– 启用 OEM 解锁<br>– 启用 USB 调试</p><p>在您的 PC 上安装 ADB 和 Fastboot。 如果您还没有这样做，请根据您的 PC 遵循以下指南之一：</p><p>先启用开发者选项然后只有你可以 启用 OEM 解锁和 USB 调试
转到设置 > 关于手机，然后在内部版本号上单击 7 次以启用开发人员选项。</p><p>转到设置 > 开发人员选项 > 启用 OEM 解锁</p><p>转到设置 > 开发人员选项 > USB 调试<br>启用 USB 调试。</p><p>现在将手机连接到 PC。 （现在你必须安装 ADB 和 fastboot）<br>当您将手机连接到 PC 时，它会要求您 <strong>允许USB调试</strong> 获取手机上的 PC 权限。</p><p><strong>注意:</strong> 如果您使用的是个人系统，那么您可以选择 <strong>始终允许从此计算机</strong> 然后单击“确定”</p><p>当您处于引导加载程序模式时，只需在控制台上执行以下命令即可解锁引导加载程序：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>fastboot oem unlock
</span></span></code></pre></div><p>– 当您执行上述命令时，手机的引导加载程序屏幕上会出现一条确认消息。<br>– 按提高音量键选择 <strong>是的，解锁引导加载程序</strong> 选项<br>– 然后按下电源按钮继续解锁引导加载程序。</p><p>电话 <strong>将重置/擦除数据并重新启动</strong></p></details><h2 id=华为平板c5bzt-w09拆机刷机教程-定制rom硬刷>华为平板C5(BZT-W09)拆机刷机教程 定制rom硬刷</h2><blockquote><p><a class=link href=https://www.bilibili.com/read/cv16726669/ target=_blank rel=noopener>https://www.bilibili.com/read/cv16726669/</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p></blockquote><p>本文适用于定制ROM（如学生平板）刷机至正常平板（C00），如您需要同时使用两种ROM的功能请至文末链接</p><p>这篇专栏提供了一个刷机思路，如果您的平板与C5相近（如AGS2-W09，KIRIN659系列等），同样可以参考这个方法，但需要您自行寻找刷机包，并用解包工具解开</p><p>特别说明：本文中所有方括号仅作标注，实际操作时应当去掉。</p><p>刷机之前，请您至少拥有以下技能：熟悉命令行的操作，了解windows系统驱动和设备端口相关知识，知道华为设备fastboot，recovery，com1.0三种模式，熟悉Windows系统基本操作，一定的动手能力</p><p>准备工作</p><p>软件</p><ul><li><p>HISUITE（华为手机助手，推荐10.x版本）</p></li><li><p>POTATONV（GITHUB开源项目：https://github.com/mashed-potatoes/PotatoNV）</p></li><li><p>HuaweiUpdateExtractor（华为解包工具，可选）</p></li><li><p>FASTBOOT命令行工具（可从安卓官网获取）</p></li><li><p>HUAWEI TEST POINT驱动</p></li><li><p>HS2T（GITHUB开源项目：https://github.com/mashed-potatoes/hs2t）</p></li><li><p>HISUITE PROXY（可选，GITHUB开源项目：https://github.com/ProfessorJTJ/HISuite-Proxy）</p></li></ul><p>外加一把金属镊子。<strong>请确保设备有充足的电量</strong></p><p>正文</p><p>1.安装华为手机助手和测试点驱动程序</p><p>2.拆开平板，并没有什么好的办法，此处仅提供一点小的建议：可以用手指甲从角上沿边缘划动先撬开一个卡扣，然后再用手指甲沿屏幕边缘划开其他卡扣，<strong>注意主板和屏幕间有排线，不要弄断；拆机极易损坏屏幕，您可以参考其他风险更低的方法</strong>。</p><p>3.**短接。先将平板关机，**将如图所示的测试点和金属屏蔽短接，保持短接的情况下，用数据线连接电脑。如果驱动安装正确，在设备管理器中“端口（COM和LPT）”下会出现“HUAWEI USB COM 1.0”，若已连接但驱动未正确安装则会显示“USB SER”</p><p>短接测试点</p><p>4.启动potatoNV，</p><p>启动后，TARGET DEVICE选择HUAWEI USB COM 1.0，BOOTLOADER选择Kirin 65x(B)。<strong>两个复选框只选择第二个</strong></p><p>应当勾选第二个复选框，此处图片有误</p><p>点击START，如一切顺利会出现如下图所示的界面，最后一行是设备新的BL解锁码</p><p>下文所有运行potatonv指按要求选择上述两个选择项后点击start，另，短接后potatonv中出现HUAWEI USB COM 1.0时就可以停止短接了。</p><p>**5.解锁，**在fastboot命令行工具所在文件夹下运行cmd（在fastboot所在文件夹的地址栏输入cmd并回车），输入指令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>fastboot oem unlock <span class=o>[</span>解锁码<span class=o>]</span>
</span></span></code></pre></div><p>。然后平板会提示解锁，初中水平的英语就能读懂，选择YES后会恢复出厂设置（可能失败，但没有影响）</p><p>执行这一步的时候请您确保您的平板处于fastboot模式下（正常第四步结束后会直接进入）</p><p>**6.备份（救砖必需），**不怕出砖可以跳过</p><p>重新短接、运行POTATONV（此时两个复选框均不要选），在hs2t所在文件夹下运行cmd（同理），输入指令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>hs2t list partitions      //列出所有分区
</span></span><span class=line><span class=ln>2</span><span class=cl>hs2t dump all --output .<span class=se>\\</span>  //提取分区镜像
</span></span></code></pre></div><p>，可以在文件夹中看到备份出的分区镜像**，**<strong>但由于大小限制，可能不包含部分分区（如system，userdata等）。</strong></p><p>到此处救砖已经足够，继续下面的备份可以备份出原系统（但解过锁数据肯定已经没有了），如果您备份只为救砖，那么可以进行下一步了</p><p>刷入twrp，使用指令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>fastboot flash recovery_ramdisk <span class=o>[</span>twrp镜像位置<span class=o>]</span>
</span></span></code></pre></div><p>重启进入recovery（电源键+音量上键），并插入SD卡（尽量大一些，userdata分区较大，否则可能备份失败），如果没有足够大的SD卡可以使用USB+OTG替代，挂载所有分区，使用终端指令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>dd <span class=k>if</span><span class=o>=</span>/dev/block/platform/hi_mci.0/by-name/<span class=o>[</span>分区名<span class=o>]</span> <span class=nv>of</span><span class=o>=</span>/external_sd/<span class=o>[</span>分区名<span class=o>]</span>.img //使用SD卡
</span></span><span class=line><span class=ln>2</span><span class=cl>dd <span class=k>if</span><span class=o>=</span>/dev/block/platform/hi_mci.0/by-name/<span class=o>[</span>分区名<span class=o>]</span> <span class=nv>of</span><span class=o>=</span>/usbotg/<span class=o>[</span>分区名<span class=o>]</span>.img //使用USB+OTG
</span></span></code></pre></div><p>，将分区备份至SD卡或USB的对应img文件，此过程较为漫长，视存储大小和读写速度而定，直至终端回显内容为结束。至此，已经得到平板所有的分区备份。</p><p>对于userdata分区，如果您不愿浪费很长时间，请至少将/data/hw_init/文件夹（如果有）拷贝出来</p><p>您也可以直接刷入twrp进行备份，但会因此丢失recovery_ramdisk的镜像</p><p>twrp中的备份功能实测会大量报错，因此此处选择dd指令直接拷贝。</p><p>另外您应当注意，使用hs2t提取的镜像并不保证完整，因为原作者在代码仓库中讲</p><blockquote><p>Basically&mldr; I don&rsquo;t care if your device will be bricked with a backup created by hs2t.</p></blockquote><p>就挺无语……所以还是建议使用twrp备份</p><p><strong>7.刷机，<strong>重新短接、运行POTATONV</strong>（此时两个复选框均不要选）</strong></p><p>如果您使用链接（见评论区顶置）中的刷机包，请继续往下阅读；若使用自己准备的刷机包，请做完第11条后再继续向下。</p><p>双击运行UPDATE.app文件夹下的0flash.bat，等待命令运行完成（可能有部分分区刷写失败为正常现象，大面积报错为异常）</p><p>双击运行update_BZT-W09_all_cn.app文件夹下的0flash.bat，等待命令运行完成</p><p>如果希望最小限度的改变分区，可以不必执行以上两个脚本，而只用fastboot指令刷写userdata和version分区</p><p><strong>有一个已经用MAGISK修补过的内核，需要的话一并刷进去，<strong>在fastboot命令行工具所在文件夹下运行cmd，输入指令</strong></strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln>1</span><span class=cl>fastboot flash ramdisk <span class=o>[</span>magisk文件地址<span class=o>]</span>
</span></span></code></pre></div><p>如果出现了“Commend not allowed"这样的错误，是因为处于原设备的fastboot下，重新短接、运行POTATONV进入potatoNV的fastboot以解决。</p><p>8.重启设备，长按电源键或者使用指令“fastboot reboot”，如果解了BL锁会有警告，忽略即可。</p><p>如果您的设备已经可用，那么恭喜您可以结束了。如果出砖，请参阅第9条；如果没有声音，请参阅第10条。</p><p>9.<strong>还原（救砖）</strong>，短接并运行potatonv（两个复选框均不选），将备份的镜像移动至同一文件夹，并将fastboot.exe和recovery.bat移动进来，运行recovery.bat</p><p>10.对于声音功能缺失和5G频段WIFI不可用等问题，您可以尝试按照如下步骤升级系统</p><p>安装华为手机助手10.x版本，打开hisuite proxy，并点击setup</p><p>打开网址https://professorjtj.github.io/，在model一栏输入BZT-W09进行筛选，</p><p>前三个任意一个点击ADD ROM，不过建议您直接升级至320（第一个），此时hisuite proxy如图所示，并勾选Old firmware </p><p>打开华为手机助手并连接手机，点击系统更新</p><p>若出现了无法连接网络的错误，请检查网络代理、VPN、防火墙保持关闭，若有杀软干扰则关闭杀软。但似乎仍有人反馈依然无法连接网络，我的环境没能复现这样的错误。</p><p>11.准备刷机包。您从网络上下载的刷机包多为卡刷包，而本文使用fastboot线刷的方式，因此需要对卡刷包进行一定处理。</p><p>首先，您拿到的刷机包中应当包含一个dload目录，目录下有一个名为update_sd.zip的文件和一个名为BZT-W09_all_cn的文件夹，文件夹下有update_sd_BZT-W09_all_cn.zip的文件。</p><p>将两个压缩文件分别解压，得到UPDATE.APP和update_BZT-W09_all cn.APP。创建并将两文件分别放入其相应名称的文件夹中。</p><p>打开HuaweiUpdateExtractor，将settings一栏extract中三个复选框全部取消勾选</p><p>将解压得到的APP文件拖入，右键选择extract all，等待解包完成。</p><p>将链接中对应的0flash.bat脚本分别拷贝到两个对应的文件夹中（注意两个脚本不一样），再将fastboot命令行工具（或者把platform-tools文件夹下所有文件）同时拷贝进去，形成链接中的两个文件夹的目录结构。</p><p>然后您可以接第7条继续操作了。</p><p><strong><strong>（8月7日更新）已经定位到部分平板小概率出砖问题原因，系刷机包中dts分区与平板不兼容所致，因此在8月7日的更新中已将刷机脚本中对dts分区的刷写去除（您可以用指令刷写），另发现部分平板刷完后无法使用声音相关功能，暂未发现具体原因，建议还原至原系统。</strong></strong></p><p><strong><strong>（9月11日更新）解决声音功能缺失问题，详见第10条</strong></strong></p><p><strong><strong>（23年5月1日更新）添加使用自己刷机包的操作方法，详见第11条。另修改部分语段使之更加清晰。</strong></strong></p><p>如果您需要同时使用定制ROM和正常ROM，请参阅（但不建议）</p><h2 id=适用于华为平板c5bzt-w09的双系统>适用于华为平板C5(BZT-W09)的双系统</h2><blockquote><p><a class=link href=https://www.bilibili.com/read/cv17991709 target=_blank rel=noopener>https://www.bilibili.com/read/cv17991709</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p></blockquote><p>该方法或许不仅适用于该平板，但up只在该平板上做过测试</p><p>C5平板系华为面向企业的定制机型，因此其定制ROM的功能往往局限而特殊，这篇专栏将讨论如何在保存原系统的情况下使用正常ROM功能。</p><p>如标题所示，我们将使用双系统的方式实现。</p><p>首先，需要向平板中刷入twrp（此处不再赘述），另为以防万一请做好备份。</p><p>下面我们将通过修改分区挂载点使系统在启动时从SD卡挂载分区，因此您需要容量较大且速度较快的SD卡（up测试时用的低速SD卡，系统卡顿很严重）。</p><p>以下两步均在twrp下执行（没有截图），请先在twrp下重新挂载所有分区</p><ul><li><p>为SD卡分区</p><p>1.将parted放入/system/bin/文件夹下，并将读写权限设置为755.</p><p>2.在终端中输入命令**&ldquo;parted /dev/block/mmcblk1&rdquo;**进入parted操作SD卡（终端会由"~#&ldquo;变为”(parted)"）。</p><p>3.输入指令**&ldquo;mklable gpt&rdquo;**重建gpt分区表，这一步将清除SD卡所有数据。</p><p>4.为保证平板可以正常识别SD卡，将第一个分区建立为FAT32的正常分区，输入指令</p><p><strong>“mkpart primary fat32 0% 10%&rdquo;</strong></p><p>此处up为其分配了10%的空间（其实可以更小）</p><p>5.下面您可以建立多个分区以刷入正常ROM的分区，但up实际只修改了version，product，userdata三个分区，事实上这也已经足够，此处up输入的指令为</p><p><strong>”mkpart product ext4 10% 15%"</strong></p><p><strong>&ldquo;mkpart version ext4 15% 18%&rdquo;</strong></p><p><strong>&ldquo;mkpart userdata xfs 18% 100%&rdquo;</strong></p><p>事实上，userdata分区应为f2fs文件系统，但up用的GUN PARTED为3.2版本，3.4及以上版本支持创建f2fs分区，后面几步中会做出调整。</p><p>6.输入指令**&ldquo;p&rdquo;**以查看分区情况</p><p>7.输入指令**“q“**以退出parted</p><p>mkpart指令用法：mkpart [分区名] [文件系统] [起始位置] [终止位置] （位置支持b，kb，mb，gb或者百分数）</p></li><li><p>将镜像写入SD卡分区</p><p>此处使用dd指令，其格式为"dd if=[镜像位置] of=[分区]"</p><p>例如up刚刚创建了四个分区，第二个为product，第三个为version，第四个为userdata，up又将镜像临时放在了data分区下，那么此处应当输入的指令为</p><p><strong>”dd if=/data/product.img of=/dev/block/mmcblk1p2"</strong></p><p><strong>&ldquo;dd if=/data/version.img of=/dev/block/mmcblk1p3&rdquo;</strong></p><p>（mmcblk0表示本机存储，mmcblk1表示SD卡，后面p表示分区序号）</p><p>至于userdata分区，up写入后反而无法启动，索性直接将其格式化为空分区</p><p><strong>“make_f2fs /dev/block/mmcblk1p4"</strong></p></li><li><p>修改挂载点</p><p>华为C5平板的挂载点为**/vendor/etc/fstab.hi6250**这个文件</p><p>将对应分区修改为SD卡中对应的分区</p><p>同时去除了userdata的分区加密（将”**fileencryption=aes-256-xts:aes-256-cts"**删除）</p></li><li><p>修改开机脚本</p><p>修改位于**/vendor/etc/init/hw/init.hi6250.rc**文件</p><p>在on fs下的mount_all语句下方添加</p><p><strong>&ldquo;umount /version&rdquo;</strong></p><p><strong>&ldquo;mount ext4 /dev/block/mmcblk1p3&rdquo;</strong></p></li></ul><p>至此，重新启动系统便会从SD卡的分区中启动，如果要切换回原系统只需将原来的挂载点和脚本替换回去，因此您可以在SD卡中同时保留两份文件，切换时只需在twrp中复制粘贴文件即可在两个系统中切换。</p><p><strong>（8月17日更新）现发现/vendor/etc中的fstab.hi6250文件仅为副本，用于接管init进程完成分区提前装载后的访问，而system等分区实际已在init进程中完成挂载，因此修改副本的部分分区并无作用，正在寻求新的解决方案</strong></p><p><strong>（9月3日更新） 增加修改开机脚本部分以修正8月17日发现的问题，在fs阶段重新挂载部分分区，但如/system  /vendor此类分区的挂载可能不生效。事实上如果您只需要使用两个系统而不要求完全从SD卡启动，这个方案已经足够</strong></p><h2 id=华为平板c5升级鸿蒙>华为平板C5升级鸿蒙</h2><blockquote><p><a class=link href=https://www.bilibili.com/read/cv18236607 target=_blank rel=noopener>https://www.bilibili.com/read/cv18236607</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p></blockquote><p><strong>写在开头</strong></p><p>如果对鸿蒙系统没有很大的需求，就不建议乱来了，毕竟麒麟659+3G内存也没什么可折腾的了，如果一定要升级鸿蒙的话，也请先做好备份，以免驱动和设备信息不兼容。</p><p><strong>正文</strong></p><p>事实上，官方并不支持C5升级鸿蒙（EMUI9也不支持），但C5由M5青春版修改而来，而M5青春版可以升级鸿蒙，所以应当先将BZT-W09修改为BAH2-W09。</p><p>1.<strong>刷入BAH2-W09的ROM</strong>，刷机包放在链接里了，不赘述了，可以参考上一篇专栏（刷机那一步里两个批处理文件换成链接里FB线刷里的就可以了）</p><p>2.<strong>修改型号</strong>，完成上面一步后启动系统，会发现设备型号显示“unknown”，系统版本是奇怪的system一串，这是由于本机信息仍为BZT-W09。</p><p>此处使用猎人修改（无法在win11、高版本win10及虚拟机中运行）。先短接，再USB COM 1.0一栏中，CPU Type选择hisi_659，port选择COM 1.0 对应的端口，点击start</p><p>COM1.0</p><p>完成后在Update Hw Set_Ver一栏中修改为如图所示，复选框不要勾选，点击start</p><p>修改型号为BAH2-W09</p><p>完成以上两步，恢复出厂，再开机，应该就可以进行系统更新了……吧</p><p>然后……151收不到OTA更新？！（震惊，华为的奇怪操作又增加了）</p><p>如果您用的其他刷机包并且可以进行系统更新，那么您一步步向上升级就可以了。</p><p>如果您不能进行系统更新或者希望减少升级的次数，请继续往下看。</p><p>3.安装华为手机助手<strong>10.x</strong>版本（此处使用10.1.0.550_OVE，不能使用11.x版本）</p><p>4.解压hisuite proxy并运行，先点击SETUP修补华为手机助手</p><p>点击SETUP</p><p>5.打开网页https://professorjtj.github.io/，PHONE MODEL填入BAH2-W09进行筛选，下拉找到<strong>476236（BAH2-W09 9.1.0.156(C00E134R1P7)）</strong>，点击Add Rom</p><p>查找固件</p><p>可以看到hisuite proxy中已经添加了对应固件，<strong>勾选Old Firmware</strong></p><p>已添加固件</p><p>6.打开华为手机助手并连接手机，点击系统更新，出现下图所示界面为正常，进行升级即可</p><p>升级EMUI9.1</p><p>之后会进入下载和安装两个阶段，中间hisuite proxy会弹出警告（大意是您的设备经过修改，是否建立验证桥），选择yes即可，安装完成后平板重启进入erecovery进行升级，升级完成后的系统就可以自己检查更新（不出意外的话会先升级到170，再次检查更新会更新到鸿蒙）</p><p><strong>写在结尾</strong></p><p>如果要还原至原系统，建议一步步降级（HarmonyOS2&#187;EMUI9.1&#187;EMUI8），然后再刷回BZT-W09，以免出现一些奇奇怪怪的问题（实测确实出现了各种各样的奇怪问题，如横屏变竖屏、型号错误等等）</p><p>浅析科大讯飞华为设备启动流程</p><blockquote><p><a class=link href=https://www.bilibili.com/read/cv18066068 target=_blank rel=noopener>https://www.bilibili.com/read/cv18066068</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p></blockquote><p><strong>本文转载自up的一位同学（https://github.com/hicode002/studentpad-hack/blob/main/docs/huawei_iflytek_boot_process.md）</strong></p><p>与其他安卓设备不同，使用麒麟芯片的华为设备有其独特的分区和独特的启动流程。</p><p>科大讯飞设备BZT-W09使用华为mediapad c5。</p><p>科大讯飞不会改变任何华为启动过程和底层系统组件。</p><p>科大讯飞只是利用华为提供的version和userdata分区来实现其有限的系统。</p><p>科大讯飞不会更改除version和userdata分区之外的任何分区。</p><p>所以科大讯飞的定制系统和C00普通系统是一样的。</p><p>但是它只是更改version分区的一些xml和txt文件来禁用和启用某些配置，并更改userdata分区以安装自己的软件并使用AES加密userdata分区。但是加密密钥在正常空间，而不是安全空间。</p><p>华为使用 GPT 分区表，不使用标准 UEFI 引导。</p><h2 id=华为麒麟开机流程>华为麒麟开机流程：</h2><p>BootROM(PBL)：初始化LPMCU和SRAM。</p><p>PBL 检查 xloader 的签名并加载 xloader。</p><p>xloader 检查 uce 或 fastboot 的签名并加载 uce/fastboot</p><p>麒麟659(BZT-W09)没有uce，所以xloader直接加载fastboot。</p><p>华为使用自己的安全启动。</p><p>签名的算法是 SHA256（很难破解）</p><p>它存储在 OTP(efuse) 中，一个只读区域。</p><p>一旦写完，就不能再改写了。</p><p>所以我们不能重写签名。</p><p>华为会在开机时检查签名，如果不匹配，设备将无法开机。</p><p>签名密钥是华为生产的，是保密的，所以我们不知道。</p><p>同一模型的签名密钥共享相同。</p><p>但是OTP也有一个特殊的区域，它的数值只能增加不能减少。</p><p>它存储您的版本号。</p><p>所以您只能升级到较新的版本，但不能回滚（但对于某些设备，这配置并不友好）</p><p>它还存储主要版本号（C923）</p><p>所以没有解BL锁，您不应该刷C00正常系统，否则你的设备可能会变砖。</p><p>在 fastboot 中，主 ACPU(CPU) 将初始化。</p><p>真正的RAM初始化。</p><p>fastboot teeos xloader PBL 都在 EL3 中运行。</p><p>fastboot 将检查 dts（device tree）分区的签名并加载它。</p><p>device tree就像计算机的驱动程序。</p><p>它存储屏幕和其他硬件的驱动程序信息。</p><p>因此，如果它不兼容，屏幕将不会打开。</p><p>不同型号设备的 dts 不兼容。</p><p>同型号不同版本的dts不兼容。</p><p>但是对于 BZT-W09，我们发现了一些有趣的东西。</p><p>相同的版本和相同的型号，但不同设备的dts可能不兼容！</p><p>因此，我们需要在进行任何刷机之前备份自己的 dts分区，以确保您的设备可以恢复。</p><p>加载 dts 后，fastboot 会检查 bootloader 是否解锁（我们不确定即使 bootloader 已解锁，是否仍会检查 dts 的签名）</p><p>如果 bootloader已解锁，它可以加载任何kernel和 ramdisk。</p><p>但是如果被锁住了，就只能加载带有华为自己签名的kernel和ramdisk。</p><p>这称为 USERLOCK</p><p>除麒麟710和麒麟710a外，麒麟960及以下均可解锁。（UP：麒麟710实际上可以通过IDT解锁）</p><p>您需要设备解锁码来解锁设备。</p><p>您需要使用“fastboot oem unlock unlock_number”指令来解锁您的设备。</p><p>unlock_number 是 16 位长度的数字。</p><p>它不存储在设备中。</p><p>但它的 SHA256 存储在 nvme 分区中。</p><p>所以我们可以重写nvme分区来使用我们自己的解锁码。</p><p>如果引导加载程序已解锁，或签名匹配，则设备开始加载kernel和 ramdisk。</p><p>ramdisk 将启动init进程加载Android系统。</p><p>system分区是主要的Android系统。</p><p>然后就完成了常见的Android开机流程。</p><p>对于科大讯飞 BZT-W09</p><p>科大讯飞会将 StudentLaucher 加载为桌面。</p><p>并使用华为mdm服务启动受控系统。</p><p>所以如果我们修改version和userdata分区，就可以使用正常系统，无需其他更改。</p><h2 id=recovery模式>recovery模式</h2><p>对于EMUI8.0，recovery的kernel和普通系统的kernel是共用的。</p><p>如果内核加载成功，但 ramdisk 加载失败。</p><p>设备将使用 recovery_ramdisk 分区启动进入recovery模式。</p><p>在recovery中，我们可以恢复出厂设置，但是华为官方recovery的功能非常有限。</p><p>但是，科大讯飞禁止恢复出厂设置。</p><p>但recovery的签名仍然在 fastboot 中检查。</p><h2 id=fastboot模式>Fastboot模式</h2><p>华为使用安卓fastboot协议</p><p>但实际上却有很大不同。</p><p>华为的fastboot在EL3上运行，但在kernel在EL中加载！正常系统则运行在EL1。</p><p>它的fastboot功能非常有限。</p><p>fastboot reset</p><p>fastboot oem get-bootinfo（用户锁定状态）</p><p>fastboot oem lock-state info（USERLOCK 状态和 FBLOCK 状态）</p><p>fastboot flash（如果FBLOCK被锁定，只能刷rrecovery_ramdisk recovery_vbmeta vbmeta system ramdisk kernel userdata，如果没有锁定，它可以刷任何分区）</p><p>fastboot erase（同上）</p><p>在 fastboot 中，我们可以恢复变砖的设备，或者刷入不同的系统。</p><p>但是要启用完整的fastboot功能，我们需要解锁 FBLOCK</p><p>FBLOCK 状态存储在 nvme 分区中。</p><p>所以我们可以重写它来解锁FBLOCK。</p><p>但是在正常的fastboot中，我们不能修改nvme分区。</p><p>如果 USERLOCK 已解锁，Fastboot 还会显示解锁警告，除非您再次锁定 USERLOCK，否则无法禁用它。</p><h2 id=erecovery模式>eRecovery模式</h2><p>与recovery分区几乎相同</p><p>但它有自己的内核和供应商</p><p>erecovery_kernel</p><p>erecovery_vendor</p><p>erecovery_ramdisk</p><p>erecovery_vbmeta</p><h2 id=下载模式vcom-模式>下载模式（VCOM 模式）</h2><p>这是最重要的部分。</p><p>我们可以短接主板中的测试点。</p><p>然后我们可以进入VCOM模式。</p><p>在这种模式下，我们可以上传任何 xloader 和 fastboot 而无需检查。</p><p>所以我们可以加载工厂fastboot来修改分区。</p><p>然后我们可以解锁FBLOCK并重写解锁代码。</p><p>它提供了计算机和设备之间的连接。</p><p>它不依赖于任何分区，而是依赖于 PBL。</p><p>但是对于麒麟970 k710 710a 980 990，VCOM也会检查xloader和fastboot的签名，但是bug很多，所以还是可以破解的。</p><p>但最新的研究报告了这一点。</p><p>因此，华为在推送这些芯片的OTA更新时禁用了VCOM模式。</p><p>幸运的是，BZT-W09 没有受到影响。</p><h2 id=华为手机折腾>华为手机折腾</h2><h2 id=前言-1>前言</h2><p>华为手机解锁bl锁似乎一直都只能依赖淘宝付费解锁。我在前天发现了一种不需要花任何钱就可以解bl锁的方法，为此我突然想玩一下刷机。但中间遇到了一些问题，写个文章记录一下。</p><p>注：我所使用的是华为荣耀9，型号为STF-AL10。其他型号的手机也可以参考本文的思路</p><p>一般来说荣耀9都会有emui8或者emui9，甚至鸿蒙系统的系统推送。但是需要申请，而花粉俱乐部现在已经死了。我的手机一直没有收到推送，还处于emui5版本。</p><h2 id=解锁bootloader>解锁bootloader</h2><p>对于处理器为麒麟960及以下的华为手机，我们可以使用一个叫PotatoNV的工具，强行向手机中注入一个解锁码，这样我们就可以用注入的解锁码来解锁bootloader</p><p>首先安装驱动，<a class=link href=https://syxz.lanzoui.com/iS6s0nq4ofc target=_blank rel=noopener>https://syxz.lanzoui.com/iS6s0nq4ofc</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>然后进入PotatoNV的项目地址，<a class=link href=https://github.com/mashed-potatoes/PotatoNV target=_blank rel=noopener>https://github.com/mashed-potatoes/PotatoNV</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>其中可以看到支持的CPU和肯定不支持的CPU，荣耀9的CPU是麒麟960，刚好支持</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823082322.webp width=566 height=294 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823082322_hu1a59113b2c4ad7e26cc2465caceaa09e_9164_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823082322_hu1a59113b2c4ad7e26cc2465caceaa09e_9164_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ截图20220823082322.webp class=gallery-image data-flex-grow=192 data-flex-basis=462px></p><p>支持的</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823082332.webp width=620 height=48 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823082332_hu4553092b853afc29e64dc847fe4f985b_5782_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823082332_hu4553092b853afc29e64dc847fe4f985b_5782_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ截图20220823082332.webp class=gallery-image data-flex-grow=1291 data-flex-basis=3100px></p><p>肯定不支持的</p><p>在右侧Releases中下载</p><p>然后，我们需要将手机短接。需要将手机后盖拆开，并找一个能导电的东西来短接。建议选择镊子，但我这里没有镊子，就找了个铜丝</p><p>你需要有一张TP短接图来告诉你短接哪个位点。对于荣耀9，我这里找到了一个</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823083338.webp width=593 height=411 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823083338_hu172e8c2dd4d63300cc171168417c4b5e_22332_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823083338_hu172e8c2dd4d63300cc171168417c4b5e_22332_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ截图20220823083338.webp class=gallery-image data-flex-grow=144 data-flex-basis=346px></p><p>上图的意思是，你需要将导体（我这里是铜丝）的一端接触图上画红圈的点，然后另一端往旁边金属壳随便一接触即可。</p><p>注意，你需要在手机<strong>关机状态下</strong>，<strong>数据线不可以连接电脑</strong>，然后短接，不能只短接一下，你需要一直让<strong>导体接触这两个地方</strong>，然后再连接数据线。你可以提前打开设备管理器观察。当连接数据线时，如果设备管理器出现下面这个东西，说明短接成功</p><p><img src=/QQ%E6%88%AA%E5%9B%BE20220821133550.webp loading=lazy alt=QQ截图20220821133550.webp></p><p>接着你就可以打开PotatoNV，选择好Target device和处理器，点击Start就会进行解锁码注入</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823084121.webp width=450 height=500 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823084121_hu431f3d4068265a4cbd0d4ea65eeed24e_20686_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823084121_hu431f3d4068265a4cbd0d4ea65eeed24e_20686_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ图片20220823084121.webp class=gallery-image data-flex-grow=90 data-flex-basis=216px></p><p>保存好你的解锁码，以后可能还会用</p><p>接着就可以解锁bl了。下载工具箱：https://pan.baidu.com/s/1u4rHv2r6vjWCuiulgaqTiA，提取码：myty</p><p>启动手机，将手机连接到电脑，确保usb调试打开，然后打开工具箱，点击解除bootloader，输入解锁码并确定。如果一切顺利的话手机会重启进入fastboot模式，询问你是否要解锁bl，选择YES即可</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220821205732.webp width=520 height=533 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220821205732_hu0bfe582705eaa5596dc584c93bd1d8a5_36058_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220821205732_hu0bfe582705eaa5596dc584c93bd1d8a5_36058_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ截图20220821205732.webp class=gallery-image data-flex-grow=97 data-flex-basis=234px></p><p>如果没有重启，你可以自行进入fastboot模式。</p><blockquote><p>一个比较优雅的进入fastboot的方法</p><p>在关机状态下，不连接数据线，按住音量-键，不按电源键，然后再把数据线插进去，就可以100%进入fastboot模式</p></blockquote><blockquote><p>注意</p><p>开启bl锁之后，手机每次开机都会出现警告，但无伤大雅。当你解锁bl后，手机会自动进行恢复出厂设置，注意数据的备份</p></blockquote><h2 id=升级到emui8>升级到EMUI8</h2><p>如果想要刷入类原生系统，则必须需要手机支持ProjectTreble。而这个东西是安卓8才有的.为此我们需要先升级到emui8</p><h2 id=刷入twrp>刷入TWRP</h2><p>对于emui5，网上可用的twrp比较少（大多数都是emui8的twrp，不能用到emui5上），这里我用的是KVIP的twrp，链接：<a class=link href=https://pan.baidu.com/s/1hsABt20 target=_blank rel=noopener>https://pan.baidu.com/s/1hsABt20</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>下载完成后，点击其中的Run.bat按照提示进行刷入即可。</p><blockquote><p>注意</p><p>我在xda论坛看到，这个twrp的作者由于没有对应的设备，所以没有进行测试。实际上，这个twrp并不支持中文，而且也不能挂载手机的分区。但我们后面会想办法解决</p></blockquote><blockquote><p>注意</p><p>刷入之后手机的触摸按键和手电筒将不可用。不过你可以选择使用悬浮按钮来代替触摸按键。相关问题的修复方法可以参考：<a class=link href=https://forum.xda-developers.com/t/oreo-twrp-3-2-1-0-0-3-capacitive-fix.3754483/ target=_blank rel=noopener>https://forum.xda-developers.com/t/oreo-twrp-3-2-1-0-0-3-capacitive-fix.3754483/</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p></blockquote><h2 id=刷入emui8>刷入EMUI8</h2><p>我们需要准备emui8的强刷包，链接：<a class=link href=https://pan.baidu.com/s/1Ia8Q0MSgBArdZjieQbWgEQ target=_blank rel=noopener>https://pan.baidu.com/s/1Ia8Q0MSgBArdZjieQbWgEQ</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln> 1</span><span class=cl>荣耀9 EMUI8.0 B350官方固件包
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl>公共文件一：下载 update.zip 不用改名
</span></span><span class=line><span class=ln> 4</span><span class=cl>http://update.hicloud.com:8180/TDS/data/files/p3/s15/G2310/g1699/v150213/f1/full/update.zip
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl>公共文件二：下载 update_data_full_public.zip 并改名为：update_data_public.zip
</span></span><span class=line><span class=ln> 7</span><span class=cl>http://update.hicloud.com:8180/TDS/data/files/p3/s15/G2310/g1699/v150213/f1/full/public/update_data_full_public.zip
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>公共文件三：根据自己的手机型号下载对应文件，并改名为：update_all_hw.zip（手机型号可以在：”设置-关于手机里面“看到，或者手机背后可以看到）
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl>型号：STF-AL10 下载此文件并改名为：update_all_hw.zip
</span></span><span class=line><span class=ln>13</span><span class=cl>http://update.hicloud.com:8180/TDS/data/files/p3/s15/G2310/g1699/v150213/f1/full/STF-AL10_all_cn/update_full_STF-AL10_all_cn.zip
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl>型号：STF-AL00 下载此文件并改名为：update_all_hw.zip
</span></span><span class=line><span class=ln>16</span><span class=cl>http://update.hicloud.com:8180/TDS/data/files/p3/s15/G2310/g1699/v150213/f1/full/STF-AL00_all_cn/update_full_STF-AL00_all_cn.zip
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>型号：STF-TL10 下载此文件并改名为：update_all_hw.zip
</span></span><span class=line><span class=ln>19</span><span class=cl>http://update.hicloud.com:8180/TDS/data/files/p3/s15/G2310/g1699/v150213/f1/full/STF-TL10_cmcc_cn/update_full_STF-TL10_cmcc_cn.zip
</span></span></code></pre></div><p>如果你直接点进这个链接进行下载的话，会弹出下面这个界面</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823091646.webp width=499 height=120 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823091646_hud22cc3fb8f606f1a4e1cd9bc8b8aec45_3888_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823091646_hud22cc3fb8f606f1a4e1cd9bc8b8aec45_3888_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ截图20220823091646.webp class=gallery-image data-flex-grow=415 data-flex-basis=998px></p><p>你需要使用迅雷。将你要下载的文件先离线下载到迅雷云盘上，再从迅雷云盘上下载~（迅雷云盘好像不限速，好评~</p><p>再下载HuRUpdater，<a class=link href="https://pan.baidu.com/s/1KqLBhbhtIzwMSyeKMjpESA?fid=653326701347000" target=_blank rel=noopener>https://pan.baidu.com/s/1KqLBhbhtIzwMSyeKMjpESA?fid=653326701347000</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>这些都下载完后，按照上面所说的修改文件名，并把这四个文件放到一个文件夹中，并复制到u盘（或者sd卡都可以）</p><p><img src=/QQ%E6%88%AA%E5%9B%BE20220823092112.webp loading=lazy alt=QQ截图20220823092112.webp></p><p>然后将u盘通过otg线连接到手机。进入twrp，点击”Mount“，将其中的”USB OTG“打上对勾。然后返回，点击”Install“，选择u盘中的HuRUpdater_0.3.zip进行刷机。脚本执行完毕之后，就可以进入手机了。</p><p>你会发现系统成功升级为emui8，并且数据甚至都没有丢失</p><h2 id=使用更好的twrp>使用更好的TWRP</h2><p>刷入emui8之后，之前刷入的twrp就会被新的官方recovery覆盖。如果你还需要使用twrp的话，你可以再刷一个更好用的twrp</p><p>你可以到这里：<a class=link href="https://cloud.189.cn/web/share?code=7r6BfmBvEFvi" target=_blank rel=noopener>https://cloud.189.cn/web/share?code=7r6BfmBvEFvi</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>下载由wzsx150大神适配的twrp。下载后依然可以直接使用压缩包内自带的bat脚本进行刷入。这里不多解释</p><p>值得注意的是，如果你是emui5的话，你是不能直接刷入这个twrp的。这就是为什么我们要先刷一个差点的twrp然后升级到emui8</p><h2 id=救砖>救砖</h2><p>emui8已经可以支持ProjectTreble了，于是我直接用twrp将DotOS直接刷到system分区，手机就不断进行重启了。并且rec进不去，卡在启动界面。erecovery也不能恢复。三键强刷也没有成功。</p><p>这时候你需要另一个神奇的twrp</p><p>链接：<a class=link href="https://pan.baidu.com/s/1FAWCr-snmD9C0GhSZzcPqA?pwd=t0pd" target=_blank rel=noopener>https://pan.baidu.com/s/1FAWCr-snmD9C0GhSZzcPqA?pwd=t0pd</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span><br>提取码：t0pd</p><p>下载后，将手机进入fastboot模式并连接电脑，在命令行中输入<code>fastboot flash recovery_ramdisk 文件路径</code> 进行刷入，然后重启进入recovery模式，就进到了这个twrp了</p><p>你可以在这个twrp中再次重复上面的步骤把emui8刷进去</p><h2 id=升级到emui9>升级到EMUI9</h2><p>首先你需要官方固件包。在万维论坛中可以找到。链接：<a class=link href=https://www.rom100.com/forum.php target=_blank rel=noopener>https://www.rom100.com/forum.php</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>你可以在其中搜索你的手机型号，就可以找到对应的固件包</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823094755.webp width=744 height=596 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823094755_hua7f02e48a1532a9be5ff9a223f5f3d1f_60650_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823094755_hua7f02e48a1532a9be5ff9a223f5f3d1f_60650_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ截图20220823094755.webp class=gallery-image data-flex-grow=124 data-flex-basis=299px></p><p>但是你需要回复帖子才能获得下载链接，而回复需要登录，等于需要邀请码，邀请码付费。你可以去加一些有关刷机的群，在群里向大佬们借一个论坛账号。我在这里给到我所用的固件包的下载链接</p><p>链接：<a class=link href="https://pan.baidu.com/s/1bEU-GzU2JCg1KTi7JdffDQ?pwd=d1wp" target=_blank rel=noopener>https://pan.baidu.com/s/1bEU-GzU2JCg1KTi7JdffDQ?pwd=d1wp</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span><br>提取码：d1wp</p><p>（可能会有解压密码，解压密码就是压缩包里有个没扩展名的文件的文件名）</p><blockquote><p>“高维禁用”</p><p>”高维禁用“指的是这个固件包是华为高级维修店专用的刷机包，禁止公开的意思。可以不用理会这四个字</p></blockquote><p>使用百度云下载速度很是问题。我最终选择向百度云妥协，交了25块钱。如果你不想向百度云妥协，你可以选择antdownload，目前可用的一个下载百度云工具</p><p>链接：https://www.aliyundrive.com/s/sjwN7DRipCU <br>提取码：6666</p><p>下载完毕后，解压，将压缩包中的dload文件夹复制到u盘上。然后，进入twrp，选择”安装“。先点击”update_sd.zip“，然后，再添加一个压缩包，再把”update_sd_STF-AL10_all_cn.zip“加进去，再进行刷入。</p><p>如果你u盘速度比较慢的话，会卡在”skipping digest check: no digest file found“这里。如果一小时之后，或者手机电量快不足了，还卡在这里没有动静，你就可以直接把u盘拔掉重启。重启后就是emui9了</p><p>如果在刷的时候报错，出现了一堆红字，并且最终显示”Fail”的话，不去管他，直接重启，就进入emui9了</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823103605.webp width=381 height=281 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823103605_hu3b40db1657780da317114cb144fa716f_4220_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E6%88%AA%E5%9B%BE20220823103605_hu3b40db1657780da317114cb144fa716f_4220_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ截图20220823103605.webp class=gallery-image data-flex-grow=135 data-flex-basis=325px></p><h2 id=刷入类原生>刷入类原生</h2><p>在刷入类原生之前，你需要确保recovery是官方的recovery，这很重要！</p><p>首先下载treble check，链接：<a class=link href=https://www.cr173.com/soft/938868.html target=_blank rel=noopener>https://www.cr173.com/soft/938868.html</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>安装后可以看到系统是否支持ProjectTreble。实际上emui8及以后的版本都支持</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823101815-374x1024.webp width=374 height=1024 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823101815-374x1024_hu9176f17af1ecb8c1289427f5bfc31a28_26204_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823101815-374x1024_hu9176f17af1ecb8c1289427f5bfc31a28_26204_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ图片20220823101815-374x1024.jpg class=gallery-image data-flex-grow=36 data-flex-basis=87px></p><p>比如我这个是这样的。虽然是A Only分区，但是由于System-as-root的存在，还是需要刷入AB的GSI的包。</p><p>你可以去网上自行寻找想刷的类原生系统。我这里使用Havoc OS 2.9。</p><p>一般你会下载到一个.xz格式的文件，使用压缩工具解压，得到.img文件。将手机进入fastboot模式，连接电脑，输入 <code>fastboot flash system 文件路径</code> 即可进行刷入</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823102559.webp width=1004 height=488 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823102559_huc5023f387e4519f9dc121c3048ed62ad_33060_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823102559_huc5023f387e4519f9dc121c3048ed62ad_33060_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ图片20220823102559.jpg class=gallery-image data-flex-grow=205 data-flex-basis=493px></p><p>如果出现cannot load错误，如下图，你可能需要换一个类原生系统</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823102516.webp width=803 height=55 srcset="/post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823102516_hue5d7a22368df758e440ac3aaa7f80748_7042_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/QQ%E5%9B%BE%E7%89%8720220823102516_hue5d7a22368df758e440ac3aaa7f80748_7042_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=QQ图片20220823102516.webp class=gallery-image data-flex-grow=1460 data-flex-basis=3504px></p><p>刷完后直接重启即可。</p><p>如果手机不断黑屏由重启，那么可能有下面原因</p><ul><li>你刷的系统和你原来的系统的安卓版本对不上。比如我拿emui8刷havoc就无限重启。但是升级到emui9就可以正常刷入了</li><li>没有清理data分区。你需要清理data分区。但是不要使用twrp上的清理data分区。你需要在官方recovery中选择恢复出厂设置，这就是为什么要保持rec为官方的</li><li>你刷的类原生系统不适配你的手机</li></ul><p>此时你可能需要按照上面所说的救砖步骤，重新刷回emui了</p><p>由于我刷完havoc，系统非常不稳定，有一堆问题，所以选择回到EMUI9了</p><h2 id=刷入面具>刷入面具</h2><p>首先你需要解包工具，链接：<a class=link href=http://www.mz6.net/soft/18553.html#downurl target=_blank rel=noopener>http://www.mz6.net/soft/18553.html#downurl</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>下载完毕后打开工具，你需要先按照如下设置</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/%E6%8D%951%E8%8E%B7.webp width=434 height=191 srcset="/post/huawei-kirin-flash-tutorial-resources/%E6%8D%951%E8%8E%B7_hu8270d566c4bffe6cd5af96d606f6200f_5910_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/%E6%8D%951%E8%8E%B7_hu8270d566c4bffe6cd5af96d606f6200f_5910_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=捕1获.webp class=gallery-image data-flex-grow=227 data-flex-basis=545px></p><p>然后，在你之前下载到的”update_sd.zip“中，将”UPDATE.APP“解压出来，然后用这个解包工具打开”UPDATE.APP“，在其中找到这个</p><p><img src=/post/huawei-kirin-flash-tutorial-resources/%E6%8D%95%E8%8E%B7.webp width=848 height=102 srcset="/post/huawei-kirin-flash-tutorial-resources/%E6%8D%95%E8%8E%B7_hu69aa2cfd0cbdf9578e7f31366e5fb170_14618_480x0_resize_q75_h2_box_2.webp 480w, /post/huawei-kirin-flash-tutorial-resources/%E6%8D%95%E8%8E%B7_hu69aa2cfd0cbdf9578e7f31366e5fb170_14618_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=捕获.webp class=gallery-image data-flex-grow=831 data-flex-basis=1995px></p><p>右键，将其提取出来并传到手机上</p><p>接着，在手机中安装Magisk，点击”安装“，”下一步“，”选择并修补一个文件“，选择刚才提取出来的那个文件。等待Magisk修复完之后，再把修复好的文件传到电脑上</p><p>手机进入fastboot模式，连接到电脑，命令行输入 <code>fastboot flash recovery_ramdisk 文件路径</code> 把面具修复好的rec刷进去。注意，刷完之后重启不能直接进入系统，你必须要首先进入recovery模式，进去之后面具会自动引导你进入系统，并成功安装好面具。</p><p>如果你手残直接进入了系统，你需要重新刷一遍recovery</p><blockquote><p>补充</p><p>网上大多数面具安装教程都是修补boot.img。但你会发现使用解包工具，没有看到boot.img。实际上，华为对此进行了魔改，你只需要修复recovery即可。另外，如果你强行使用将boot.img导出并用面具修补，然后在刷入，你的手机会变砖</p></blockquote><h2 id=参考>参考</h2><p><a class=link href=https://zhuanlan.zhihu.com/p/397173427 target=_blank rel=noopener>https://zhuanlan.zhihu.com/p/397173427</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p><a class=link href="http://www.rootbbs.com/?id=343" target=_blank rel=noopener>http://www.rootbbs.com/?id=343</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>【【全网首发】华为刷机入门【保姆级教程】华为手机刷机-魔鬼级难度刷机-小白也能看懂！】 <a class=link href="https://www.bilibili.com/video/BV1HV4y1E7uo?share_source=copy_web" target=_blank rel=noopener>https://www.bilibili.com/video/BV1HV4y1E7uo?share_source=copy_web</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p>【玩机必看！带你入坑安卓刷机，小白也能看懂的ROOT基础指南来啦！】 <a class=link href="https://www.bilibili.com/video/BV1BY4y1H7Mc?share_source=copy_web" target=_blank rel=noopener>https://www.bilibili.com/video/BV1BY4y1H7Mc?share_source=copy_web</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><p><a class=link href=https://www.bilibili.com/read/cv15133756 target=_blank rel=noopener>https://www.bilibili.com/read/cv15133756</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p><hr><p>有了解锁码接下来干什么，解锁刷TWRP刷面具嘛。全套教程奉上，大家照做就是了。</p><p>如何Root你的华为旧机？ 来自 某贼 - 酷安
https://​www.coolapk.com/feed/26320412</p><p>关于刷第三方ROM，我个人这里是不建议的，华为刷机很容易变砖且不方便救，浪费时间精力。不过如果你真的是短接过来的，那你可以随意，因为实在不行你还可以短接救砖。</p><p>华为麒麟深刷救砖［变砖绝杀技］ 来自 某贼 - 酷安
https://​www.coolapk.com/feed/26830366</p><p>如果你没能力短接还不小心变砖了，这里有一些常规的救砖方法：</p><p>华为旧机自助救砖 来自 某贼 - 酷安
https://​www.coolapk.com/feed/26205215</p><p>咳咳，都推荐这么多了，这篇降级的也推荐一下吧（虽然没啥关系），想成为华为刷机小能手，你一定要会的</p><p>华为麒麟の系统降级教程 来自 某贼 - 酷安
https://​www.coolapk.com/feed/27132475</p><hr><p>那么教程到这里就结束啦！不过因为难度较大，不知道有多少人能实践的，成功的机油记得点赞转发在评论区晒成果哦！</p><blockquote><p>更新于2021.11.18</p></blockquote><p>都说华为刷机难，事实上确实如此。相比小米，一加等机型，华为刷机的难度要高出不少。不仅在于解锁相对比较困难，即便解了锁也不意味着你能为所欲为。下面是入坑华为刷机一定要知道的一些东西，花几分钟看看省几小时百度。</p><p>本文主要针对麒麟和高通，华为联发科因为解不了BL不做讨论。</p><h2 id=一-解bl锁困难>一 ，解BL锁困难</h2><p>华为官方早在18年就关停了官方获取解锁码通道，而且愈发走向封闭。所以再想<strong>从官方拿解锁码是不可能的</strong>了。但是我们仍然可以选择通过第三方软件读解锁码：</p><p>或者手动拆机短接改解锁码：</p><p>其实我个人是不推荐麒麟980，990以及更高的手机解锁玩机的，原因很简单，限制太多，成本太高，没有什么可玩性。真想搞买个二手的小米不是舒服得多。</p><h2 id=二bl解锁不完全>二，BL解锁不完全</h2><p>不像小米一加，<strong>华为通过解锁码解锁BL是不完全的</strong>。华为的BL解锁分两级，一个是用户BL（userbl），一个是工厂BL。用户BL即为通过解锁码解锁的BL锁，只开放少数分区比如system，boot，recovery，userdata等，很多分区比如product你是没有权限操作的。工厂BL则开放全分区，但需要第三方软件解锁，而且只能在Fastboot里临时解锁，重启即失效。而我说的第三方软件大家应该都明白，基本都是大几百起步了。也就是说普通用户就只能解用户BL。这样会带来什么问题后面讲。</p><h2 id=三不要轻易动data>三，不要轻易动data</h2><p>很多刷习惯了小米一加的机油都喜欢随手双清或者格式化data，但是在华为这里你要注意了，如果你用的是华为官方系统，<strong>请不要动data！！！<strong>包括双清和格式化data都不要做！我知道华为这里很多TWRP不支持解密data，那就别要解密了，插SD卡或者adb sideload刷包。之所以不要动data，是因为华为把一部分系统组件放到data里了，比如主题相关组件，甚至webview。华为官方Recovery格式化的时候应该是会避开这些东西，但是第三方Recovery不认啊，你一格式化都没有了，轻者丢主题丢系统APP，重者直接不开机。已经有</strong>无数</strong>这类惨痛的例子了。</p><h2 id=四官方包难找>四，官方包难找</h2><p>大概在去年吧华为关闭了官网上的ROM下载通道，FirmwareFinder（FF）也基本残废了，所以华为官方包就不那么好找了。我一般是去<strong>万维论坛</strong>找，算是比较齐全了。</p><h2 id=五救砖困难>五，救砖困难</h2><p>这里主要针对麒麟讲，高通略有不同。</p><p>刷机总免不了要救砖，然而华为救砖并没有那么简单。这主要是由于<strong>华为官方并没有给用户提供传统意义上的卡刷和线刷方式</strong>。华为官方包是.APP格式，这个东西基本就是一堆分区镜像，一般是在升级模式用的（即所谓“三键强刷”包）。但是升级模式是官方Recovery的一部分，在里面刷包 校验是很严格的，包括华为签名（是否官方包），系统版本（差太多一般不行）等等。很明显升级模式是很难满足我们救砖的需要的。卡刷？对不起，官方没有卡刷包。APP外边套的那层zip一般是不能直接拿来卡刷的。Fastboot线刷？借助第三方工具确实可以用APP包线刷，但是前面我说了，用户BL解锁不完全啊，80％的分区都刷不进去。而实现全分区临时解锁除了借助第三方工具，唯一自己能操作的办法就是拆机短接：</p><p>其实华为官方还是有给用户提供官方救砖途径的，即eRecovery恢复和Hisuite修复，只不过这个途径又被华为自己封死了……这两个救砖方法都是从官方服务器下载包然后恢复，可是不知道从何时起，很多老机型都无法再从官方获取到包，也就无法再走官方救砖（还能联网下包的机型庆幸吧）。似乎华为是不打算再给这些老机型提供支持，而刷机的大多都是老机型。</p><h2 id=六刷第三方包容易变砖>六，刷第三方包容易变砖</h2><p>包括官改移植类原生。具体原因可能很多吧，总之<strong>没什么刷机经验的不建议刷第三方包</strong>，就官方包Root一下就行了。而且第三方包很少有适配的那么完美的，多少有点BUG，而就像我上面说的，刷回官方又很麻烦。</p><h2 id=七华为的各个模式>七，华为的各个模式</h2><p>注意，以下操作里会提到“插线”，意思是用能传输数据的数据线连接电脑。单纯充电线是不行的。有时候插线和不插进的模式是不同的。</p><p><strong>Recovery</strong>：不连接电脑，关机状态长按电源键和音量加，出现logo松开电源键继续按住音量加，直到进入。</p><p><strong>eRecovery</strong>：关机状态插线，长按电源键和音量加。</p><p><strong>Fastboot</strong>：关机状态插线，长按电源键和音量减。</p><p><strong>升级模式</strong>（所谓三键强刷）：关机状态下，长按电源键，音量加和音量减。如果你的系统包在手机存储里，则不需要插线直接按，如果你想要用电脑工具辅助，则需要插线。</p><p>关于Recovery和eRecovery</p><p>Recovery和eRecovery是有区别的。Recovery就是我们熟知的那个Recovery，而eRecovery是独立于Recovery的另一个分区。二者功能不同，在Recovery里我们可以做恢复出厂，清除cache等本地操作，而在eRecovery里可以连接WiFi下载适用于你的手机的系统包并自动安装恢复。刷TWRP只是替换掉了Recovery，eRecovery仍然保留。</p><blockquote><p>本篇文章我将慢慢完善排版</p></blockquote></section><footer class=article-footer><section class=article-tags><a href=/tags/%E5%88%B7%E6%9C%BA/>刷机</a>
<a href=/tags/%E5%8D%8E%E4%B8%BA%E5%88%B7%E6%9C%BA/>华为刷机</a>
<a href=/tags/android/>Android</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span><p>转载需要保留原始链接，未经明确许可，禁止商业使用。<a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener>CC BY-NC-SA 4.0</a>
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></p></span></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>最后更新于 2023-10-01 15:09 UTC</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/ios-app-download-old/><div class=article-image><img src=/post/ios-app-download-old/_hu91f58f32addccee32ba45597c0709dbf_50794_d13f626ef6b00ddd98a8759fce096d02.webp width=250 height=150 loading=lazy alt="Featured image of post IOSApp任意版本抓包降级教程" data-key=ios-app-download-old data-hash="md5-QntOyHgNjll9C190iz6r2g=="></div><div class=article-details><h2 class=article-title>IOSApp任意版本抓包降级教程</h2></div></a></article><article><a href=/post/phone-termux/><div class=article-details><h2 class=article-title>Termux 使用配置教程</h2></div></a></article><article><a href=/post/android-xmr/><div class=article-details><h2 class=article-title>使用闲置Android手机挖门罗币</h2></div></a></article><article><a href=/post/phone-web/><div class=article-details><h2 class=article-title>旧手机来做网站服务器</h2></div></a></article></div></div></aside><script src=//lib.baomitu.com/waline/2.14.8/waline.min.js></script>
<link href=//lib.baomitu.com/waline/2.14.8/waline.min.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script>Waline.init({dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://unpkg.com/@waline/emojis@1.1.0/bilibili","https://unpkg.com/@waline/emojis@1.1.0/alus","https://unpkg.com/@waline/emojis@1.1.0/bmoji"],lang:"zh-CN",locale:{admin:"站长",placeholder:"您在博客中所发表的评论仅代表您的个人观点与本博客立场无关，您发布的所有评论都需要由站长进行审核才能公开。"},pageview:!1,requiredMeta:["nick","email"],serverURL:"https://pl.xpdbk.com"})</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2023 XiaoPang版权所有</section><section class=powerby><b><a href=https://shengming.xpdbk.com/ target=_blank>免责声明</a></b> <b><a href=https://blog0.xpdbk.com/share/iGagIgzX4V2CAUov/%E5%8D%9A%E5%AE%A2 target=_blank>访客统计</a></b> <a href=https://blog.xpdbk.com/sitemap.xml target=_blank>站点地图</a> <a href=https://blog.xpdbk.com/index.xml target=_blank>RSS订阅</a><br>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.20.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计
<span>• 由LEl_FENG用❤️魔改</span></section><a href="https://icp.gov.moe/?keyword=20230087" target=_blank>萌ICP备20230087号</a><section class=powerby>作者共咕咕了 283.61k 字 · 共水了 87篇文章.</br><span><p></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/photoswipe/4.1.3/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-y/photoswipe/4.1.3/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/photoswipe/4.1.3/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/photoswipe/4.1.3/photoswipe.min.css crossorigin=anonymous></main></div><script src=/js/vibrant.min.js crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400&display=swap" rel=stylesheet><script src=https://lib.baomitu.com/ribbon.js/1.0.1/ribbon.min.js integrity=sha384-xC0eH8k8Nq6WKXlooH5kB+xWjFX/08AfAgcGiKWXj4+kYvrRuDr9MU2+MTrx2Jc6 crossorigin=anonymous size=150 alpha=0.5 zindex=-1 defer></script><!doctype html><html><head><link rel=stylesheet href=https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css></head><body><div class=demo><div id=player1></div></div><script>async function loadAPlayer(){return new Promise((e,t)=>{const n=document.createElement("script");n.src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js",n.onload=e,n.onerror=t,document.head.appendChild(n)})}window.addEventListener("load",()=>{loadAPlayer().then(()=>{var e=new APlayer({element:document.getElementById("player1"),fixed:!0,autoplay:!1,mini:!0,theme:"#f8f4fc",loop:"all",order:"random",preload:"none",volume:.5,mutex:!0,listFolded:!1,listMaxHeight:90,lrcType:0,music:[{name:"超燃歌曲",url:"/music/chaoran2077.mp3",artists:"2077游戏公司",cover:"/avatar.webp"},{name:"2077边缘行者1",url:"/music/2077R.mp3",artists:"2077游戏公司",cover:"/avatar.webp"},{name:"2077边缘行者2",url:"/music/2077.mp3",artists:"2077游戏公司",cover:"/avatar.webp"}]})}).catch(e=>{console.log("APlayer加载失败:",e)})})</script></body><a href=# id=back-to-top title=返回顶部></a><style>#back-to-top{display:none;position:fixed;bottom:20px;right:55px;width:55px;height:55px;border-radius:7px;background-color:rgba(64,158,255,.5);box-shadow:var(--shadow-l2);font-size:30px;text-align:center;line-height:50px;cursor:pointer}#back-to-top:before{content:' ';display:inline-block;position:relative;top:0;transform:rotate(135deg);height:10px;width:10px;border-width:0 0 2px 2px;border-color:var(--back-to-top-color);border-style:solid}#back-to-top:hover:before{border-color:#2674e0}@media screen and (max-width:768px){#back-to-top{bottom:20px;right:20px;width:40px;height:40px;font-size:10px}}@media screen and (min-width:1024px){#back-to-top{bottom:20px;right:40px}}@media screen and (min-width:1280px){#back-to-top{bottom:20px;right:55px}}@media screen and (min-width:1536px){#back-to-top{visibility:hidden}}</style><script>function backToTop(){document.documentElement.scrollIntoView({behavior:"smooth"})}window.onload=function(){let t=this.document.documentElement.scrollTop||this.document.body.scrollTop,e=this.document.getElementById("back-to-top");t>0?e.style.display="inline":e.style.display="none"},window.onscroll=function(){let t=this.document.documentElement.scrollTop||this.document.body.scrollTop,e=this.document.getElementById("back-to-top");t<200?e.style.display="none":(e.style.display="inline",e.addEventListener("click",backToTop,!1))}</script><script>var CURSOR;Math.lerp=(e,t,n)=>(1-n)*e+n*t;const getStyle=(e,t)=>{try{return window.getComputedStyle?window.getComputedStyle(e)[t]:e.currentStyle[t]}catch{}return""};class Cursor{constructor(){this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}move(e,t){this.cursor.style.left=`${e}px`,this.cursor.style.top=`${t}px`}create(){this.cursor||(this.cursor=document.createElement("div"),this.cursor.id="cursor",this.cursor.classList.add("hidden"),document.body.append(this.cursor));var e=document.getElementsByTagName("*");for(let t=0;t<e.length;t++)getStyle(e[t],"cursor")=="pointer"&&this.pt.push(e[t].outerHTML);document.body.appendChild(this.scr=document.createElement("style")),this.scr.innerHTML=`* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='.5'/></svg>") 4 4, auto}`}refresh(){this.scr.remove(),this.cursor.classList.remove("hover"),this.cursor.classList.remove("active"),this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}init(){document.onmouseover=e=>this.pt.includes(e.target.outerHTML)&&this.cursor.classList.add("hover"),document.onmouseout=e=>this.pt.includes(e.target.outerHTML)&&this.cursor.classList.remove("hover"),document.onmousemove=e=>{this.pos.curr==null&&this.move(e.clientX-8,e.clientY-8),this.pos.curr={x:e.clientX-8,y:e.clientY-8},this.cursor.classList.remove("hidden")},document.onmouseenter=e=>this.cursor.classList.remove("hidden"),document.onmouseleave=e=>this.cursor.classList.add("hidden"),document.onmousedown=e=>this.cursor.classList.add("active"),document.onmouseup=e=>this.cursor.classList.remove("active")}render(){this.pos.prev?(this.pos.prev.x=Math.lerp(this.pos.prev.x,this.pos.curr.x,.15),this.pos.prev.y=Math.lerp(this.pos.prev.y,this.pos.curr.y,.15),this.move(this.pos.prev.x,this.pos.prev.y)):this.pos.prev=this.pos.curr,requestAnimationFrame(()=>this.render())}}(()=>{CURSOR=new Cursor})()</script><script src=//lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js type=module></script></body></html>