<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>工具 on LEl_FENG的小屋</title><link>https://blog.xpdbk.com/categories/tool/</link><description>Recent content in 工具 on LEl_FENG的小屋</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><atom:link href="https://blog.xpdbk.com/categories/tool/index.xml" rel="self" type="application/rss+xml"/><item><title>CE自写插件反汇编硬追基址提供LUA接口实现pvz僵尸绘制</title><link>https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/</link><pubDate>Mon, 17 Jul 2023 21:20:43 +0700</pubDate><guid>https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/</guid><description>&lt;blockquote>
&lt;p>本文为转载文，看此文之前请看本站的声明&lt;/p>
&lt;/blockquote>
&lt;h2 id="硬追前言">硬追前言：&lt;/h2>
&lt;p>看了很多有关植物大战僵尸的教程，比较少看到用汇编来找基址的，大多是用&amp;quot;找出是什么访问了这个地址&amp;quot;来找的&lt;/p>
&lt;p>但是这种方法存在弊端，一是可能存在多个指针，二是不一定搜的到&lt;/p>
&lt;p>今天给大家带来CE反汇编硬追pvz的僵尸数组头部教程&lt;/p>
&lt;p>适合学习人群：比萌新稍微强一丝丝足矣&lt;/p>
&lt;h2 id="事前准备">事前准备&lt;/h2>
&lt;p>本人使用的工具：CE7.2汉化版（不用在意版本问题） PS：OD什么的不需要啦&lt;/p>
&lt;p>本人使用的游戏：植物大战僵尸原版的汉化版(非年度版)        就是阳光基址是006A9EC0+768+5560的那个&lt;/p>
&lt;h2 id="教程内容">教程内容&lt;/h2>
&lt;h2 id="找到僵尸血量">找到僵尸血量&lt;/h2>
&lt;p>首先瞄准一只普通僵尸，搜索得到它的血量&lt;/p>
&lt;p>PS:普通僵尸的初始血量是270 豌豆射手的攻击是20 （模糊搜索可以找到这些数据）&lt;br>
&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128193537060.webp"
width="804"
height="656"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128193537060_hu5d6b8eaae283bde8e4f45cc43a230a43_69392_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128193537060_hu5d6b8eaae283bde8e4f45cc43a230a43_69392_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-mage-20210128193537060"
class="gallery-image"
data-flex-grow="122"
data-flex-basis="294px"
>&lt;/p>
&lt;p>所以我们先搜270&lt;br>
&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128193756710.webp"
width="1308"
height="909"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128193756710_huaead7241e72ac8761cdaf0ffe914236e_92310_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128193756710_huaead7241e72ac8761cdaf0ffe914236e_92310_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210128193756710"
class="gallery-image"
data-flex-grow="143"
data-flex-basis="345px"
>&lt;/p>
&lt;p>然后命中之后再搜250，过滤得到&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129000559707.webp"
width="1278"
height="54"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129000559707_hu3112bafbdf798ce3799c617a658983c0_4258_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129000559707_hu3112bafbdf798ce3799c617a658983c0_4258_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129000559707"
class="gallery-image"
data-flex-grow="2366"
data-flex-basis="5680px"
>&lt;/p>
&lt;p>很轻松地得到这一只僵尸的血量，先把僵尸的血量改成9999（接下来要让它被狠狠地揍，我们好断点追踪），然后右键&amp;quot;找出是什么改写了这个地址&amp;quot;&lt;br>
&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128194254141.webp"
width="1094"
height="636"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128194254141_hub0f1ae1671367744682b6a52dd056462_43352_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128194254141_hub0f1ae1671367744682b6a52dd056462_43352_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210128194254141"
class="gallery-image"
data-flex-grow="172"
data-flex-basis="412px"
>&lt;/p>
&lt;p>接下来点击&amp;quot;显示反汇编程序&amp;quot;即可开启我们的反汇编之旅&lt;/p>
&lt;h2 id="开始反汇编追踪之旅">开始反汇编追踪之旅&lt;/h2>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128194429846.webp"
width="1819"
height="1207"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128194429846_hu63f472c40f6bb446196b76f664154eba_256240_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128194429846_hu63f472c40f6bb446196b76f664154eba_256240_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-image-20210128194429846"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="361px"
>&lt;/p>
&lt;p>反汇编窗口如上所示，贴上代码:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nasm" data-lang="nasm">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">131319&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">89&lt;/span> &lt;span class="nv">BD&lt;/span> &lt;span class="nv">C8000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">ebp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">000000&lt;/span>&lt;span class="nv">C8&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">edi&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>从这句我们可以得到ebp+c8这个地址里存的值就是这只僵尸的血量&lt;/p>
&lt;p>于是问题转化为ebp从何而来？&lt;/p>
&lt;p>我们在这里F5下个断点 顺便给这里加上备注&lt;br>
&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128195008278.webp"
width="1819"
height="1207"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128195008278_hu139dc47c7db0ae8aae41d2c2323ad711_265580_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128195008278_hu139dc47c7db0ae8aae41d2c2323ad711_265580_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-image-20210128195008278"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="361px"
>&lt;/p>
&lt;p>然后回到游戏，等待僵尸被攻击后，断下&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129000720679.webp"
width="2360"
height="2012"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129000720679_hu1616a629446d07f3a8e441405052e29b_484466_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129000720679_hu1616a629446d07f3a8e441405052e29b_484466_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129000720679"
class="gallery-image"
data-flex-grow="117"
data-flex-basis="281px"
>&lt;/p>
&lt;p>这里我们可以看到EBP=14EE1914  ，暂且记下&lt;/p>
&lt;p>大家都知道代码是从上往下执行的，于是我们以这行代码为起点，向上查找是什么给EBP赋值的&lt;/p>
&lt;p>再贴代码:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nasm" data-lang="nasm">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">D0&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">EC&lt;/span> &lt;span class="mi">08&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">sub&lt;/span> &lt;span class="nb">esp&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">08&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">D3&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">44&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">D7&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">53&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">ebx&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> {这里是函数头部}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">D8&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">55&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">ebp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">D9&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">ebp&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   {&lt;/span>&lt;span class="nb">ebp&lt;/span>&lt;span class="err">在这里被赋值}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">DD&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">56&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">DE&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">F0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">esi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">eax&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">E0&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">E6&lt;/span> &lt;span class="mi">08&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">and&lt;/span> &lt;span class="nb">esi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">08&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">E3&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">57&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">E4&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">89&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">E8&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="mi">07&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">F1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">EA&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">C7&lt;/span> &lt;span class="mi">45&lt;/span> &lt;span class="mi">54&lt;/span> &lt;span class="mi">19000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">ebp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">54&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="mi">00000019&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">25&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">F1&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">A8&lt;/span> &lt;span class="mi">04&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="nb">al&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">04&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">F3&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">09&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">FE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">F5&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="nv">A&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="mi">00&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">F7&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C5&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ebp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">F9&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="mi">52&lt;/span>&lt;span class="nv">F6FFFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">130950&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1312&lt;/span>&lt;span class="nv">FE&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">BD&lt;/span> &lt;span class="nv">C8000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">edi&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">ebp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">000000&lt;/span>&lt;span class="nv">C8&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">131304&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C5&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ebp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">131306&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">89&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">13130&lt;/span>&lt;span class="nv">A&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="nv">C4FFFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="nv">D710&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">13130&lt;/span>&lt;span class="nv">F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">sub&lt;/span> &lt;span class="nb">edi&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">131313&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">89&lt;/span> &lt;span class="mi">44&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">eax&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">131317&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C5&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ebp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">131319&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">89&lt;/span> &lt;span class="nv">BD&lt;/span> &lt;span class="nv">C8000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">ebp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">000000&lt;/span>&lt;span class="nv">C8&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">edi&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="err">血量被赋值}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我们找到了mov ebp,[esp+14] 并认为ebp就是在这里被赋值的，为了验证这一点，我们在这个位置下断点，并断下&lt;br>
&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129000936360.webp"
width="2360"
height="2012"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129000936360_hudc5b5ed768d3bc00ccdf1996c604cd43_445148_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129000936360_hudc5b5ed768d3bc00ccdf1996c604cd43_445148_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-image-20210129000936360"
class="gallery-image"
data-flex-grow="117"
data-flex-basis="281px"
>&lt;/p>
&lt;p>我们可以看到此时的ebp尚且为14，F8单步步过以后果然发现EBP变成了14EE1914   &lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001041030.webp"
width="2346"
height="849"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001041030_hud47480005dba13caeca68c33b264afa3_176422_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001041030_hud47480005dba13caeca68c33b264afa3_176422_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129001041030"
class="gallery-image"
data-flex-grow="276"
data-flex-basis="663px"
>&lt;/p>
&lt;p>这时的EBP则转化为了[esp+14]，这时照理来说我们应该重复之前的操作去找esp，但实则不然&lt;/p>
&lt;p>因为：&lt;/p>
&lt;p>（1）ESP：栈指针寄存器(extended stack pointer)，其内存放着一个指针，该指针永远指向系统栈最上面一个栈帧的栈顶。&lt;br>
（2）EBP：基址指针寄存器(extended base pointer)，其内存放着一个指针，该指针永远指向系统栈最上面一个栈帧的底部。&lt;/p>
&lt;p>萌新看到这里可能一脸懵逼：这是啥子呀，这里我也不说什么堆栈平衡的话了，通俗来说，ebp和esp都是临时的指针，只有像eax、ebx、edx、esi、edi这类寄存器我们才要向上去找是什么去赋值的，而遇到这种mov ebp,[esp+14]这类的，我们&lt;strong>要去找之前push xxx的xxx,或者在前面直接就有mov [esp+xx],xxx的&lt;/strong>&lt;/p>
&lt;p>为什么呢：&lt;strong>一个push会让esp减少4&lt;/strong>，我们会发现,这里的ebp是[esp+14]得来的，但我们又能看到上面有一个sub esp,08&lt;/p>
&lt;p>也就相当于mov ebp[esp-08+14]即mov ebp[esp+c]，这里主义mov []里面的值是十六进制的，14=16*1+4=20 20-8=12&lt;/p>
&lt;p>不知道进制转换的直接拿计算器算即可&lt;br>
&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128201024895.webp"
width="1259"
height="1128"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128201024895_hu61cccd1ed84aebf51868bcbf92676088_21986_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128201024895_hu61cccd1ed84aebf51868bcbf92676088_21986_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210128201024895"
class="gallery-image"
data-flex-grow="111"
data-flex-basis="267px"
>&lt;/p>
&lt;p>12=4*3 即3个push xxx，是不是感觉有点意义不明☆，&lt;strong>暂且记下&lt;/strong>&lt;/p>
&lt;p>接着向上找，发现已经到达了函数的头部，于是我们&lt;strong>得到上一层去寻找&lt;/strong>了，如何判断到达头部? 看到 ret 还有一串int3就是了&lt;/p>
&lt;p>也可以右键选择当前函数，然后找到选中的第一个，就可以得到函数的头部&lt;br>
&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128201630955.webp"
width="1649"
height="97"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128201630955_huf48188fe8b1c137acbb8137e6f4d8395_17950_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210128201630955_huf48188fe8b1c137acbb8137e6f4d8395_17950_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210128201630955"
class="gallery-image"
data-flex-grow="1700"
data-flex-basis="4080px"
>&lt;br>
回到刚才我们的那个mov [ebp+000000C8],edi，下一个断点，下完断点后回到游戏，等游戏再被断下以后,可以用shift+f8执行到返回，也可以一直手动按f8直到遇到一个ret&lt;/p>
&lt;p>这里我用了后面那种方式，得到了：&lt;br>
&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001324786.webp"
width="2360"
height="2012"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001324786_huc2cf78117f6fe26bebb92a4b4b515fff_425146_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001324786_huc2cf78117f6fe26bebb92a4b4b515fff_425146_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129001324786"
class="gallery-image"
data-flex-grow="117"
data-flex-basis="281px"
>&lt;/p>
&lt;p>此时这个pop edi上面的那个call 就是我们刚才那个函数，如果在那个call那里下断，然后F7单步步入就可以进入我们刚才的地方&lt;/p>
&lt;p>然后我们在call这里做个断点,并给它一个标记call1（书签也可以设置一下,避免找不到）&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001446346.webp"
width="2360"
height="2012"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001446346_hu73702e6a269e0f6906b4ed6460539453_425380_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001446346_hu73702e6a269e0f6906b4ed6460539453_425380_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129001446346"
class="gallery-image"
data-flex-grow="117"
data-flex-basis="281px"
>&lt;/p>
&lt;p>&lt;strong>此时我们发现call之前有3个push，而这里的esi正好是第三个push，而esi的值也&amp;quot;正好&amp;quot;等于之前的14EE1914&lt;/strong>   &lt;/p>
&lt;p>所以我们可以知道，之前的mov ebp,[esp+14]，其实就是将esi的值赋给了它，这边主要是说明一下值的由来，其实大家都不难发现之前就是ESI=EBP=14EE1914了&lt;/p>
&lt;p>于是&lt;strong>我们的问题便又变成了&lt;/strong>[ebp+c8]-&amp;gt;ebp-&amp;gt;esi-&amp;gt;[esi+c8]&lt;/p>
&lt;p>我们接着向上找ESI是由谁给它赋值的,我们发现上面没有给esi赋值的语句，那会不会是上面的call给esi赋值的呢，有这个可能，但是我们可以在call之前设置断点，发现call之前esi就已经被赋值了，一路往上直到函数头部发现ESI的值都已经是被赋值了，得出结论&lt;strong>是从上一层给我们ESI赋值&lt;/strong>的。&lt;/p>
&lt;p>于是我们故技重施，直接在call这里下断点，然后执行到返回,得到:&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001830915.webp"
width="2353"
height="1389"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001830915_hu1ce17a9f4fd2dcee2641fbbda55db4e0_289680_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001830915_hu1ce17a9f4fd2dcee2641fbbda55db4e0_289680_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129001830915"
class="gallery-image"
data-flex-grow="169"
data-flex-basis="406px"
>&lt;/p>
&lt;p>贴上代码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nasm" data-lang="nasm">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E004&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">55&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">ebp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E005&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">56&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E006&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">57&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E007&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">F0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">esi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   {&lt;/span>&lt;span class="nb">esi&lt;/span>&lt;span class="err">是由&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="err">赋值的}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E009&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">F9&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">edi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ecx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E00B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">56&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E00C&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C7&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E00E&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nv">DFDFFFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">DD30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E013&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">F&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">ebx&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">edi&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E016&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">FB&lt;/span> &lt;span class="mi">06&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">ebx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">06&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">6&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E019&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="mi">21&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E03C&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E01B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">85&lt;/span> &lt;span class="nv">F6&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="nb">esi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E01D&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nv">D&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E03C&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E01F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">46&lt;/span> &lt;span class="mi">24&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esi&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E022&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">F8&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">16&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">22&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E025&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="nv">E&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E065&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E027&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">F8&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E02A&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">39&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E065&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E02C&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">86&lt;/span> &lt;span class="nv">D8000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esi&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">000000&lt;/span>&lt;span class="nv">D8&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E032&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">F8&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">01&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E035&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="nv">E&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E065&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E037&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">F8&lt;/span> &lt;span class="mi">03&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">03&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E03A&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">29&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E065&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E03C&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">FB&lt;/span> &lt;span class="mi">03&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">ebx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">03&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E03F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="nv">A&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E04B&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E041&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">FB&lt;/span> &lt;span class="mi">05&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">ebx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">05&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E044&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">05&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E04B&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E046&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">FB&lt;/span> &lt;span class="mi">06&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">ebx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">06&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">6&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E049&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nv">A&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E065&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E04B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">FB&lt;/span> &lt;span class="mi">06&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">ebx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">06&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">6&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E04E&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="mb">0B&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E05B&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E050&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">85&lt;/span> &lt;span class="nv">F6&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="nb">esi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E052&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">07&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E05B&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E054&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C6&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E056&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="nv">E54A0C00&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">132&lt;/span>&lt;span class="nv">B40&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E05B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">56&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E05C&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C7&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E05E&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="nv">DF3FFFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D390&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E063&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">EB&lt;/span> &lt;span class="mb">1B&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jmp&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E065&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">85&lt;/span> &lt;span class="nv">F6&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="nb">esi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E067&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E069&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C6&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E06B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="nv">C0F1FFFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D230&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E070&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">D&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">B&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">lea&lt;/span> &lt;span class="nb">ecx&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">ebx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nb">ebx&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E073&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">14&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">D&lt;/span> &lt;span class="nv">C8F16900&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">edx&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">ecx&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="nv">F1C8&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E07A&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">52&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">edx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E07B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="mi">40370&lt;/span>&lt;span class="nv">C00&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1317&lt;/span>&lt;span class="nv">C0&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="nv">call2&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我们向上找可以发现 mov esi,eax，说明esi是由eax得来的&lt;/p>
&lt;p>问题再次转化为[ebp+c8]-&amp;gt;ebp-&amp;gt;esi-&amp;gt;[esi+c8]-&amp;gt;[eax+c8]&lt;/p>
&lt;p>这时我们发现又到了函数头部，再次故技重施，下断并执行到返回，再来到上一层&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001954312.webp"
width="2351"
height="1377"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001954312_hu21849ccd10c773ec7778c4a11d53a2b7_275642_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129001954312_hu21849ccd10c773ec7778c4a11d53a2b7_275642_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129001954312"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="409px"
>&lt;/p>
&lt;p>贴上代码:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nasm" data-lang="nasm">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D04E&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">F&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">pop&lt;/span> &lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D04F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">E&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">pop&lt;/span> &lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D050&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">D&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">pop&lt;/span> &lt;span class="nb">ebp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D051&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">B&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">pop&lt;/span> &lt;span class="nb">ebx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D052&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">C4&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">add&lt;/span> &lt;span class="nb">esp&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">20&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D055&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">C2&lt;/span> &lt;span class="mi">0400&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">ret&lt;/span> &lt;span class="mi">0004&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D058&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="nv">E3FCFFFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD40&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="nb">EAX&lt;/span>&lt;span class="err">在这里面}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D05D&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">D0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">edx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> {&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="err">被&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="err">赋值}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D05F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">85&lt;/span> &lt;span class="nv">D2&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="nb">edx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">edx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D061&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="nv">EB&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D04E&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D063&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">80&lt;/span> &lt;span class="nv">BA&lt;/span> &lt;span class="nv">BE000000&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="kt">byte&lt;/span> &lt;span class="nv">ptr&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mb">000000B&lt;/span>&lt;span class="nv">E&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D06A&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mb">0B&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D077&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D06C&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">CD&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">ecx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ebp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D06E&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nv">D000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D090&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D073&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">84&lt;/span> &lt;span class="nv">C0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="nb">al&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">al&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D075&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="nv">D7&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D04E&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D077&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C2&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> {&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="err">被&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="err">赋值}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D079&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">CD&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">ecx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ebp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">D07B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="mi">800&lt;/span>&lt;span class="nv">F0000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">E000&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="nv">call3&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不难发现，我们这里的eax是由edx赋值的；再向上找到mov edx,eax，edx又变成了eax所以我们还是要找eax&lt;/p>
&lt;p>这里其实还遇到了一个小问题，就是在mov edx,eax 这里要下断点证明是不是eax将值赋给了edx，但是设置了断点以后，一进游戏就断下来了，并且eax的值并不是14EE1914，这个时候可能就有人觉得这里不是赋值处了，但其实这里就是赋值的地方，它是一个&lt;strong>共用段&lt;/strong>，于是我们要通过&lt;strong>条件断点&lt;/strong>来过滤，条件断点设置如下&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129002638911.webp"
width="2353"
height="886"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129002638911_hu4b2feffd35d05f732ba5b518d70d111d_202244_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129002638911_hu4b2feffd35d05f732ba5b518d70d111d_202244_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129002638911"
class="gallery-image"
data-flex-grow="265"
data-flex-basis="637px"
>&lt;/p>
&lt;p>通过条件断点后，果然断下了&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129003109596.webp"
width="2363"
height="910"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129003109596_huaaa3805d4a0bda50d39119d3cc5111ca_200144_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129003109596_huaaa3805d4a0bda50d39119d3cc5111ca_200144_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129003109596"
class="gallery-image"
data-flex-grow="259"
data-flex-basis="623px"
>&lt;/p>
&lt;p>再往上看只有一个CALL 了，要么EAX就是在CALL里被赋值的，要么就是在上一层被赋值的&lt;/p>
&lt;p>怎么确认呢？我们可以在CALL 这里下个条件断点，如果是上一层赋值的，则会断下，否则不会断下&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129003330136.webp"
width="1860"
height="429"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129003330136_hu5f3374a7c86a45bb3e536d3bc67b392b_92758_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129003330136_hu5f3374a7c86a45bb3e536d3bc67b392b_92758_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129003330136"
class="gallery-image"
data-flex-grow="433"
data-flex-basis="1040px"
>&lt;/p>
&lt;p>设置条件断点以后发现并没有断下，得出结论，EAX是在CALL里面被赋值的&lt;/p>
&lt;p>于是我们先设置一个普通的断点，然后F7单步步入CALL中，然后找到CALL的尾部（跳出CALL之前肯定EAX已经被赋值完毕了）,于是我们右键选择当前函数，然后找到被选中的最后一行，如图：&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129003745902.webp"
width="2342"
height="1195"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129003745902_hu08843edd8c06aa629c9041218a121b5a_251894_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129003745902_hu08843edd8c06aa629c9041218a121b5a_251894_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129003745902"
class="gallery-image"
data-flex-grow="195"
data-flex-basis="470px"
>&lt;/p>
&lt;p>代码如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nasm" data-lang="nasm">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE5F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">CFAFAFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8F0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE64&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">84&lt;/span> &lt;span class="nv">C0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="nb">al&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">al&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE66&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="nv">F85&lt;/span> &lt;span class="mi">25&lt;/span>&lt;span class="nv">FFFFFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD91&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE6C&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">44&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="err">被赋值&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE70&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">F&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">pop&lt;/span> &lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE71&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">E&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">pop&lt;/span> &lt;span class="nb">esi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE72&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">D&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">pop&lt;/span> &lt;span class="nb">ebp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE73&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">B&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">pop&lt;/span> &lt;span class="nb">ebx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE74&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">83&lt;/span> &lt;span class="nv">C4&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">add&lt;/span> &lt;span class="nb">esp&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">30&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">48&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE77&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">C2&lt;/span> &lt;span class="mi">0400&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">ret&lt;/span> &lt;span class="mi">0004&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>从下往上找，不难找到mov eax,[esp+18] 这一句，验证一下，在这一句下方设置条件断点&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004014334.webp"
width="1847"
height="416"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004014334_hu3c0cf16c80a23a5dcebecd95ba4f16e5_80738_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004014334_hu3c0cf16c80a23a5dcebecd95ba4f16e5_80738_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129004014334"
class="gallery-image"
data-flex-grow="443"
data-flex-basis="1065px"
>&lt;/p>
&lt;p>断下&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004050900.webp"
width="2349"
height="1312"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004050900_hub474cde9358c923f2a018a82af602943_257528_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004050900_hub474cde9358c923f2a018a82af602943_257528_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129004050900"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="429px"
>&lt;/p>
&lt;p>根据前面的经验，我们知道[esp+xxx]是之前入栈的某个地址，而这里ebx正好等于eax，所以我们就可以将问题转为找ebx&lt;/p>
&lt;p>从下往上接着寻找可以找到&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nasm" data-lang="nasm">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CDF9&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">DE&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">ebx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">esi&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="nb">ebx&lt;/span>&lt;span class="err">被赋值&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>于是ebx又变成了esi，接着往上找可以找到&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nasm" data-lang="nasm">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD70&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">D&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">lea&lt;/span> &lt;span class="nb">esi&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   {这里的&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="err">正好和下面赋值对应}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD74&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">89&lt;/span> &lt;span class="mi">44&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">eax&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD78&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">89&lt;/span> &lt;span class="mi">44&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">eax&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD7C&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">89&lt;/span> &lt;span class="mi">44&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">eax&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD80&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">E8&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="nv">BFBFAFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8F0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="nv">call&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD85&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">84&lt;/span> &lt;span class="nv">C0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="nb">al&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">al&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD87&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="nv">F84&lt;/span> &lt;span class="nv">DF000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">je&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CE6C&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD8D&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">ebp&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD91&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">74&lt;/span> &lt;span class="mi">24&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">esi&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   {&lt;/span> &lt;span class="nb">esi&lt;/span>&lt;span class="err">被赋值&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD95&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">46&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esi&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD98&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">47&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">sub&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">edi&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="nv">CD9B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">BB&lt;/span> &lt;span class="mi">19000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">ebx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">00000019&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这里我们可以找到mov esi,[esp+14],在这里的下一句下条件断点，验证是否是esi被赋值&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004650120.webp"
width="1864"
height="361"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004650120_hu8c591133321ee79fe7fb6147f9839b41_71240_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004650120_hu8c591133321ee79fe7fb6147f9839b41_71240_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129004650120"
class="gallery-image"
data-flex-grow="516"
data-flex-basis="1239px"
>&lt;/p>
&lt;p>果然断下了,但这里我们发现没有寄存器的值和ESI相同，说明寄存器在&lt;strong>入栈&lt;/strong>之后，又被改变了&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004810875.webp"
width="2351"
height="721"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004810875_hubf3cb6feff663c9e771a551b6d8e47ff_179774_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129004810875_hubf3cb6feff663c9e771a551b6d8e47ff_179774_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129004810875"
class="gallery-image"
data-flex-grow="326"
data-flex-basis="782px"
>&lt;/p>
&lt;p>于是我们只能接着向上找push xxx，或者mov [esp+xx],xx ，这里找的是mov [esi]，xx 因为上面的lea esi,[esp+14]是传址指令，相当于mov [esi],xx = mov [esp+14],xx&lt;/p>
&lt;p>我们很快看到上面有个mov [esp+14],eax 在那里的下一句设置条件断点EAX==0x14EE1914，很可惜并没有断下，说明CALL里面有压入的参数，于是我们直接进入CALL中查看&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129005559296.webp"
width="433"
height="185"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129005559296_hu7cf022e1d380ff86987f484fcfeb54d7_13562_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129005559296_hu7cf022e1d380ff86987f484fcfeb54d7_13562_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129005559296"
class="gallery-image"
data-flex-grow="234"
data-flex-basis="561px"
>&lt;/p>
&lt;p>直接Ctrl+G，然后输入CALL后面的地址0041C8F0 即可跳转到CALL里面进行查看&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129005916187.webp"
width="3354"
height="1357"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129005916187_hubba8f5a8bd4b0635ee039ae710f1a7ff_266124_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129005916187_hubba8f5a8bd4b0635ee039ae710f1a7ff_266124_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129005916187"
class="gallery-image"
data-flex-grow="247"
data-flex-basis="593px"
>&lt;/p>
&lt;p>CALL里面的代码如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nasm" data-lang="nasm">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8F0&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">57&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">push&lt;/span> &lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8F1&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">BF&lt;/span> &lt;span class="mi">0000&lt;/span>&lt;span class="nv">FFFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">edi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">FFFF0000&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">65536&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8F6&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">06&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esi&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8F8&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">85&lt;/span> &lt;span class="nv">C0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">eax&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8FA&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="mi">08&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C904&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8FC&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">82&lt;/span> &lt;span class="mi">90000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">00000090&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C902&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">EB&lt;/span> &lt;span class="mi">05&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jmp&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C909&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C904&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">05&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">C010000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">add&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0000015&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">348&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C909&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">A&lt;/span> &lt;span class="mi">94000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">ecx&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">00000094&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C90F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">69&lt;/span> &lt;span class="nv">C9&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">C010000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">imul&lt;/span> &lt;span class="nb">ecx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ecx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0000015&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">348&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C915&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">03&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">A&lt;/span> &lt;span class="mi">90000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">add&lt;/span> &lt;span class="nb">ecx&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">00000090&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C91B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C1&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ecx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C91D&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">73&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jae&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C931&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C91F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">90&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">nop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C920&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">85&lt;/span> &lt;span class="nv">B8&lt;/span> &lt;span class="mi">58010000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">00000158&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C926&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C93B&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C928&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">05&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">C010000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">add&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0000015&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">348&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C92D&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C1&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ecx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C92F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">72&lt;/span> &lt;span class="nv">EF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jb&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C920&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C931&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">C7&lt;/span> &lt;span class="mi">06&lt;/span> &lt;span class="nv">FFFFFFFF&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">esi&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nv">FFFFFFFF&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C937&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="nv">C0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">xor&lt;/span> &lt;span class="nb">al&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">al&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C939&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">F&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">pop&lt;/span> &lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C93A&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">C3&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">ret&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C93B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">89&lt;/span> &lt;span class="mi">06&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">esi&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">eax&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="err">赋值}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C93D&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">80&lt;/span> &lt;span class="nv">B8&lt;/span> &lt;span class="nv">EC000000&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="kt">byte&lt;/span> &lt;span class="nv">ptr&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">000000&lt;/span>&lt;span class="nv">EC&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C944&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="nv">B0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8F6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C946&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">B0&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">al&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">01&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C948&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">F&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">pop&lt;/span> &lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C949&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">C3&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">ret&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个CALL比较简短,我们直接从下面找起 ,一下就找到了mov [esi],eax 可以下个条件断点验证一下&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129011029891.webp"
width="1867"
height="404"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129011029891_hu42afa3cdc88f944d226f0cfeaaeec77b_86434_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129011029891_hu42afa3cdc88f944d226f0cfeaaeec77b_86434_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129011029891"
class="gallery-image"
data-flex-grow="462"
data-flex-basis="1109px"
>&lt;/p>
&lt;p>果然断下&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129011127073.webp"
width="2363"
height="1136"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129011127073_hueff73dc5467b016c04dbfb0e7b6c846a_257078_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129011127073_hueff73dc5467b016c04dbfb0e7b6c846a_257078_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129011127073"
class="gallery-image"
data-flex-grow="208"
data-flex-basis="499px"
>&lt;/p>
&lt;p>于是问题又变成了找eax（这个14EE1914我们转了多少手寄存器了？？？）&lt;/p>
&lt;p>接着向上找EAX，这里EAX上方是RET，则肯定是从上方的语句跳转过来的，&lt;/p>
&lt;p>不难找到跳转过来的语句:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nasm" data-lang="nasm">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C926&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C93B&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>于是从跳转过来的语句接着向上找EAX的赋值&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nasm" data-lang="nasm">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8F6&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">06&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">esi&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> {&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="err">赋值为&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">esi&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">内部的值}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8F8&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">85&lt;/span> &lt;span class="nv">C0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> {判断&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="err">是否为&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8FA&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="mi">08&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C904&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   {为&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="err">则不跳转}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C8FC&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">82&lt;/span> &lt;span class="mi">90000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">00000090&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> {&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="err">赋值为&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">90&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C902&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nv">EB&lt;/span> &lt;span class="mi">05&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jmp&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C909&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C904&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">05&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">C010000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">add&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0000015&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">348&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C909&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">A&lt;/span> &lt;span class="mi">94000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">mov&lt;/span> &lt;span class="nb">ecx&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">00000094&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C90F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">69&lt;/span> &lt;span class="nv">C9&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="nv">C010000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">imul&lt;/span> &lt;span class="nb">ecx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ecx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0000015&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="err">{&lt;/span> &lt;span class="mi">348&lt;/span> &lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C915&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">03&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nv">A&lt;/span> &lt;span class="mi">90000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">add&lt;/span> &lt;span class="nb">ecx&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="nb">edx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">00000090&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C91B&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="nv">B&lt;/span> &lt;span class="nv">C1&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">cmp&lt;/span> &lt;span class="nb">eax&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">ecx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C91D&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">73&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jae&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C931&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C91F&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">90&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">nop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C920&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">85&lt;/span> &lt;span class="nv">B8&lt;/span> &lt;span class="mi">58010000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">test&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">eax&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">00000158&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nb">edi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C926&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nv">jne&lt;/span> &lt;span class="nv">PlantsVsZombies.exe&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="nv">C93B&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我们通过汇编语句不难得出 EAX刚开始是由[ESI]赋值的，但刚开始为0的话则为[EDX+90]赋值,也可以从外面对CALL下断，分析EAX的赋值过程得到：头部由来是[EDX+00000090],每个僵尸的大小是15C，这里其实我们已经得到了僵尸数组的动态头部地址[EDX+90]，我们接着追溯EDX，这里可以看一下动态地址的头部14EE0CD8，和我们的14EE1914相减得到C3C=3132        15C=348        3132/348=9，说明我们这个僵尸是由头部地址偏移了9个僵尸~~ 然后记录一下&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129013745019.webp"
width="2354"
height="776"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129013745019_hu8082ac87129b06f60a64369cf9398cb0_182586_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129013745019_hu8082ac87129b06f60a64369cf9398cb0_182586_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129013745019"
class="gallery-image"
data-flex-grow="303"
data-flex-basis="728px"
>&lt;/p>
&lt;p>接着就是找EDX，此时EDX的值为14EDB520&lt;/p>
&lt;p>到这里找EDX就直接在CE里搜索了（也可以汇编里接着向上找，但一是出于篇幅问题，二是留给大家练手当作业吧）&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122247763.webp"
width="1305"
height="714"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122247763_hud2ea8a312a0e0af7d50f3414e3465009_95702_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122247763_hud2ea8a312a0e0af7d50f3414e3465009_95702_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129122247763"
class="gallery-image"
data-flex-grow="182"
data-flex-basis="438px"
>&lt;/p>
&lt;p>CE里直接搜索14EDB520，也就是EDX的值，然后去掉第一个动态的地址，第二个就是了，这个大家应该都很熟练了&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122404999.webp"
width="1372"
height="856"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122404999_hu7e515f1dda61db3c8d12ac87a467699b_132958_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122404999_hu7e515f1dda61db3c8d12ac87a467699b_132958_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129122404999"
class="gallery-image"
data-flex-grow="160"
data-flex-basis="384px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122425097.webp"
width="842"
height="734"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122425097_hu1c7d128353f9c88ce4d17e6d759d701b_54228_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122425097_hu1c7d128353f9c88ce4d17e6d759d701b_54228_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129122425097"
class="gallery-image"
data-flex-grow="114"
data-flex-basis="275px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122509689.webp"
width="1644"
height="730"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122509689_hu1bbd503309a465d47a698541385392dd_110652_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122509689_hu1bbd503309a465d47a698541385392dd_110652_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129122509689"
class="gallery-image"
data-flex-grow="225"
data-flex-basis="540px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122547256.webp"
width="815"
height="87"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122547256_hue2a1815227d8ba0989347c92fe0e0c84_9970_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122547256_hue2a1815227d8ba0989347c92fe0e0c84_9970_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129122547256"
class="gallery-image"
data-flex-grow="936"
data-flex-basis="2248px"
>&lt;/p>
&lt;p>基址找到了,手动添加验证一下:&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122652158.webp"
width="1094"
height="678"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122652158_hu096940f473cb92c3047b6d32bfe306ba_42624_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210129122652158_hu096940f473cb92c3047b6d32bfe306ba_42624_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210129122652158"
class="gallery-image"
data-flex-grow="161"
data-flex-basis="387px"
>&lt;/p>
&lt;p>正确得到当前的僵尸血量~~~我们的反汇编追踪之旅算是告一段落了&lt;/p>
&lt;h2 id="作业">作业&lt;/h2>
&lt;p>实践是检验真理的唯一标准。这不来两份热乎的作业温习温习？&lt;/p>
&lt;p>第一份作业就是上面说的，继续通过反汇编的方式，从下往上跟踪EDX，然后找到基址&lt;/p>
&lt;p>第二份作业则利用到了我们找到的这个僵尸数组头部的赋值语句，我们都知道所有僵尸的产生都会在这里的代码通过，那么能否在这块代码HOOK，让僵尸直接GO DIE呢？这种全屏秒杀才算是真正的全屏秒杀，直接从源头将你弄死~~~现在大多数的全屏秒杀都是通过在僵尸移动的那一块代码直接修改僵尸的状态来实现的，但是别忘了最后的僵尸BOSS，它貌似没有移动吧？因此僵尸王无法被秒杀，秒杀不够完美。第二份作业要求：&lt;strong>HOOK僵尸头部的这块代码，实现可以秒杀包括僵尸BOSS在内的所有僵尸&lt;/strong>&lt;/p>
&lt;h2 id="总结注意事项">总结(注意事项)&lt;/h2>
&lt;p>反汇编找基址其实就是&lt;strong>从下往上&lt;/strong>，寻找目标寄存器的来源，最终找到目标&lt;/p>
&lt;p>寄存器中比较特殊的&lt;strong>EBP和ESP&lt;/strong>，要通过寻找之前入栈的寄存器来获得赋值来源&lt;/p>
&lt;p>入栈操作不仅仅是push xxx 指令 还有 mov [esp+xxx],xxx 或者先lea xxx,[esp+xxx]，再mov [xxx],xxx等等&lt;/p>
&lt;p>有的时候向上追代码的时候，会遇到明明还没攻击到僵尸却引发了中断，并且此时寄存器锏哪谌荻疾欢裕锌赡苁�&lt;strong>共用代码段&lt;/strong>，需要用&lt;strong>条件断点&lt;/strong>来进行判断&lt;/p>
&lt;p>找到赋值语句以后可以在那里下个断点，看是否执行以后寄存器内容被修改，&lt;strong>验证语句来源的正确性&lt;/strong>&lt;/p>
&lt;p>有时候会遇到很多跳转，但要记住，如果我们的语句执行了，那么跳过我们语句的跳转肯定是没有跳的，不然我们怎么执行？&lt;/p>
&lt;p>遇事不决的时候找不到来源的时候&lt;strong>多下断点&lt;/strong>，看看寄存器的变化，实在找不到就去函数头部下断，然后一步步单步步过，看在哪里寄存器的值发生了改变&lt;/p>
&lt;h2 id="个人感言无关技术可跳过">个人感言（无关技术，可跳过）&lt;/h2>
&lt;p>白嫖了网络教程资源这么多年，都没写过技术教程，这次算是我的首次技术教程吧，能力不足，水平有限，欢迎大家指出我的不当之处,也请大家多多包涵一下，希望能够一起变强。&lt;/p>
&lt;p>最后碎碎念一下：这个教程肝了我一晚上，&lt;strong>太肝了&lt;/strong>。出这个教程的初衷是看到现在的找基址教程十个有九个是PVZ（夸张），但一个汇编追基址的都没有（可能有？），于是出一期看看反响如何，之后可能会接着出&lt;strong>汇编硬追代码&lt;/strong>的系列教程，视大家的&lt;strong>热情程度&lt;/strong>而定吧&lt;/p>
&lt;h2 id="上篇前言">上篇前言：&lt;/h2>
&lt;p>CE支持LUA和Plugin已经有一段时间了，但是相关的教程却并不是很多。LUA和Plugin的功能属实强大，今天就借着pvz绘制僵尸血量这个例子给大家侃侃CE的这两大功能&lt;/p>
&lt;p>本教程分成两部分：&lt;/p>
&lt;ul>
&lt;li>LUA的使用&lt;/li>
&lt;li>Plugin的开发&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>本上篇教程为LUA的使用部分&lt;/strong>&lt;/p>
&lt;p>PS：原本是打算直接用LUA写个绘制就好，但没想到LUA里没有&lt;strong>直接&lt;/strong>提供获取窗口位置信息的函数，如WIN32提供的GetWindowRect，为此就自己&lt;strong>写个插件提供接口给LUA调用&lt;/strong>&lt;/p>
&lt;h2 id="效果图">效果图&lt;/h2>
&lt;p>先给大家看看效果&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/pvz.gif"
width="783"
height="578"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/pvz_hufdfdc836e0cb53ad1bdabd4b149c4849_1589572_480x0_resize_box_1.gif 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/pvz_hufdfdc836e0cb53ad1bdabd4b149c4849_1589572_1024x0_resize_box_1.gif 1024w"
loading="lazy"
alt="pvz"
class="gallery-image"
data-flex-grow="135"
data-flex-basis="325px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210014449374.webp"
width="547"
height="173"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210014449374_hub1d10dbfdd6c2fc4e82974e54d0bdb88_7184_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210014449374_hub1d10dbfdd6c2fc4e82974e54d0bdb88_7184_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210014449374"
class="gallery-image"
data-flex-grow="316"
data-flex-basis="758px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210014518897.webp"
width="955"
height="559"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210014518897_hu3b766808b5086ed1a769128323a2e359_20858_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210014518897_hu3b766808b5086ed1a769128323a2e359_20858_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210014518897"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="410px"
>&lt;/p>
&lt;h2 id="事前准备-1">事前准备&lt;/h2>
&lt;p>本人使用的工具：CE7.2汉化版（这次要&lt;strong>注意版本&lt;/strong>，插件和CE版本相关，汉化与否不影响）&lt;/p>
&lt;p>论坛有：&lt;a class="link" href="https://down.52pojie.cn/Tools/Debuggers/Cheat%20Engine%20v7.2.exe" target="_blank" rel="noopener"
>https://down.52pojie.cn/Tools/Debuggers/Cheat%20Engine%20v7.2.exe&lt;/a>&lt;/p>
&lt;p>VS2015 （可以&lt;strong>兼容XP&lt;/strong>的插件开发）&lt;/p>
&lt;p>&lt;a class="link" href="https://my.visualstudio.com/Downloads?q=visual%20studio%202015&amp;amp;wt.mc_id=o~msft~vscom~older-downloads" target="_blank" rel="noopener"
>https://my.visualstudio.com/Downloads?q=visual%20studio%202015&amp;amp;wt.mc_id=o~msft~vscom~older-downloads&lt;/a>&lt;/p>
&lt;p>本人使用的游戏：植物大战僵尸&lt;strong>原版&lt;/strong>的汉化版(非年度版)     就是阳光基址是006A9EC0+768+5560的那个（ps:劳模植物大战僵尸）&lt;/p>
&lt;p>CE7.2源码一份:&lt;a class="link" href="https://github.com/cheat-engine/cheat-engine/archive/7.2.zip" target="_blank" rel="noopener"
>https://github.com/cheat-engine/cheat-engine/archive/7.2.zip&lt;/a>&lt;/p>
&lt;h2 id="需要知道的pvz数据">需要知道的pvz数据&lt;/h2>
&lt;p>前面我们通过汇编硬追基址知道了&lt;/p>
&lt;p>僵尸头部数组的地址是0x6a9ec0+0x768+0x90，僵尸数量上限地址为0x6a9ec0+0x768+0x94&lt;/p>
&lt;p>僵尸血量为僵尸地址+0xc8，僵尸x坐标为僵尸地址+0x8，僵尸y坐标为僵尸地址+0xc&lt;/p>
&lt;p>不知道的朋友们可以戳这里看之前的教程：&lt;a class="link" href="https://www.52pojie.cn/thread-1361473-1-1.html" target="_blank" rel="noopener"
>https://www.52pojie.cn/thread-1361473-1-1.html&lt;/a>&lt;/p>
&lt;p>知道了这些以后开启我们的LUA之旅&lt;/p>
&lt;h2 id="教程内容-1">教程内容&lt;/h2>
&lt;h2 id="编写我们的lua绘制脚本">编写我们的LUA绘制脚本&lt;/h2>
&lt;h3 id="tip遇到不懂的方法或属性可以查看下方提供的lua参考文档">tip:&lt;strong>遇到不懂的方法或属性可以查看下方提供的LUA参考文档&lt;/strong>&lt;/h3>
&lt;p>想要测试一个LUA脚本可以先打开LUA脚本窗口：表单→显示CT表的Lua脚本(Ctrl+Alt+L)&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210209212720399.webp"
width="1015"
height="901"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210209212720399_hu8a99a77e33651e5ffe56625e137b456b_9324_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210209212720399_hu8a99a77e33651e5ffe56625e137b456b_9324_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210209212720399"
class="gallery-image"
data-flex-grow="112"
data-flex-basis="270px"
>&lt;/p>
&lt;h3 id="创建一个透明窗口">创建一个透明窗口&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">createTransparentWindow&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">createForm&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--创建窗体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">canvas&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">form.Canvas&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--获取canvas&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mh">0x000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--设置窗体颜色为黑色 和透明相关&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.Width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">getScreenWidth&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--设置窗体宽度为屏幕宽度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.Height&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">getScreenHeight&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--设置窗体高度为屏幕高度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.FormStyle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;fsSystemStayOnTop&amp;#39;&lt;/span>&lt;span class="err">  &lt;/span>&lt;span class="c1">--设置窗体风格为fsSystemStayOnTop,详见上方参考文档 这里为将窗口置顶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.BorderStyle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;bsNone&amp;#39;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--设置窗体边界风格为bsNone，详见上方参考文档        这里为设置无边框      &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.setLayeredAttributes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">LWA_COLORKEY&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">--设置窗口透明，详见上方参考文档&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="在透明窗口里绘制">在透明窗口里绘制&lt;/h3>
&lt;p>如果要测试的话，记得要加上上面的createTransparentWindow代码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--设置画笔&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Pen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Color&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mh">0xff00ff&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Pen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Width&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--设置字体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">Font&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Font&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Color&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mh">0xff00ff&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Font&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Size&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制文字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">textOut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Font&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--设置字体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Brush&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--设置画刷颜色&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.textOut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--输出文字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画椭圆&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">ellipse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.ellipse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画圆&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">circle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.ellipse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画线&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sourcex&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sourcey&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationy&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sourcex&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sourcey&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationy&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画虚线矩形&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">drawFocusRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Font&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.drawFocusRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制圆角矩形&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">roundRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">ry&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.roundRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">ry&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制矩形rect(x1,y1,x2,y2,Color,Width,b)如果b=true则绘制填充矩形&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">~=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="kr">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.Brush&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Color&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mh">0xff00ff&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.fillRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.Brush&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--刷新绘制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">Refresh&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">form.repaint&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制 传入function&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">draw&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mydraw&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">form.OnPaint&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">mydraw&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--设置OnPaint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--创建窗口&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">createTransparentWindow&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">draw&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--在这里写绘制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">400&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">400&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">700&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">450&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0xBC8F8F&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">123&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">321&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">222&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0xBC8F8F&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">800&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0xADFF2F&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">circle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">400&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">50&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0x000080&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">textOut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;要输出的文字&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0xDC143C&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Refresh&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行结果&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210002131867.webp"
width="1920"
height="1022"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210002131867_hu5c20b2ee9db1366aece7cc76ac490164_27380_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210002131867_hu5c20b2ee9db1366aece7cc76ac490164_27380_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210002131867"
class="gallery-image"
data-flex-grow="187"
data-flex-basis="450px"
>&lt;/p>
&lt;h3 id="添加时钟实时绘制绘制模板">添加时钟实时绘制(绘制模板)&lt;/h3>
&lt;p>该模板没有用到我的插件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="n">lua&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--表示下面的代码为lua&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--语法检测，如果语法有误则不执行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">syntaxcheck&lt;/span> &lt;span class="kr">then&lt;/span> &lt;span class="kr">return&lt;/span> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ENABLE&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--code from here to &amp;#39;[DISABLE]&amp;#39; will be used to enable the cheat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">createTransparentWindow&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">createForm&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--创建窗体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">canvas&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">form.Canvas&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--获取canvas&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mh">0x000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--设置窗体颜色为黑色 和透明相关&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.Width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">getScreenWidth&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--设置窗体宽度为屏幕宽度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.Height&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">getScreenHeight&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--设置窗体高度为屏幕高度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.FormStyle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;fsSystemStayOnTop&amp;#39;&lt;/span>&lt;span class="err">  &lt;/span>&lt;span class="c1">--设置窗体风格为fsSystemStayOnTop,详见上方参考文档 这里为将窗口置顶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.BorderStyle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;bsNone&amp;#39;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--设置窗体边界风格为bsNone，详见上方参考文档        这里为设置无边框&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.setLayeredAttributes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">LWA_COLORKEY&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">--设置窗口透明，详见上方参考文档&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--设置画笔&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Pen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Color&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mh">0xff00ff&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Pen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Width&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--设置字体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">Font&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Font&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Color&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mh">0xff00ff&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Font&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Size&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制文字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">textOut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Font&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--设置字体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Brush&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--设置画刷颜色&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.textOut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--输出文字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画椭圆&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">ellipse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.ellipse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画圆&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">circle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.ellipse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画线&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sourcex&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sourcey&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationy&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sourcex&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sourcey&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationy&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画虚线矩形&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">drawFocusRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Font&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.drawFocusRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制圆角矩形&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">roundRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">ry&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.roundRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">ry&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制矩形rect(x1,y1,x2,y2,Color,Width,b)如果b=true则绘制填充矩形&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">~=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="kr">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.Brush&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Color&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mh">0xff00ff&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.fillRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.Brush&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--刷新绘制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">Refresh&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">form.repaint&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制 传入function&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">draw&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mydraw&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">form.OnPaint&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">mydraw&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--设置OnPaint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">createTransparentWindow&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cnt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--计数，用来表示动态刷新数值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">draw&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--在这里写绘制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cnt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cnt&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">400&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">400&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">700&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">450&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0xBC8F8F&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">123&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">321&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">222&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0xBC8F8F&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">800&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0xADFF2F&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">circle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">400&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">50&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0x000080&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">textOut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">cnt&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0xDC143C&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--创建Timer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Timer&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">createTimer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">getMainForm&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--时钟周期设置为0.1s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Timer.Interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--添加时钟周期执行的函数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Timer.OnTimer&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">timer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--刷新绘制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Refresh&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">DISABLE&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--code from here till the end of the code will be used to disable the cheat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Timer.Enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Timer.destroy&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">form.destroy&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行结果&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/%E7%BB%98%E5%88%B6%E6%A8%A1%E6%9D%BF.gif"
loading="lazy"
alt="绘制模板"
>&lt;/p>
&lt;h3 id="lua和asm混用">lua和asm混用&lt;/h3>
&lt;p>Auto assembler scripts support section written in Lua.You can start such a section using the &lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Auto_Assembler:LUA_ASM" target="_blank" rel="noopener"
>{$lua}&lt;/a> keyword, and end it with &lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Auto_Assembler:LUA_ASM" target="_blank" rel="noopener"
>{$asm}&lt;/a>.&lt;/p>
&lt;p>自动汇编脚本支持部分用Lua来写，你可以开始一段lua代码以 {$lua} 开始，以{$asm}结束lua代码&lt;/p>
&lt;p>例:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="n">asm&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alloc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">newmem&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2048&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="n">lua&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;this is lua&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="n">asm&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">label&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">originalcode&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="修改绘制模板实现pvz僵尸血量绘制需要加载插件">修改绘制模板实现pvz僵尸血量绘制（需要加载插件）&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="n">lua&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--表示下面的代码为lua&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--语法检测，如果语法有误则不执行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">syntaxcheck&lt;/span> &lt;span class="kr">then&lt;/span> &lt;span class="kr">return&lt;/span> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ENABLE&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--code from here to &amp;#39;[DISABLE]&amp;#39; will be used to enable the cheat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">createTransparentWindow&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">createForm&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--创建窗体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">canvas&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">form.Canvas&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--获取canvas&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mh">0x000000&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--设置窗体颜色为黑色 和透明相关&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.Width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">getScreenWidth&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--设置窗体宽度为屏幕宽度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.Height&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">getScreenHeight&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--设置窗体高度为屏幕高度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.FormStyle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;fsSystemStayOnTop&amp;#39;&lt;/span>&lt;span class="err">  &lt;/span>&lt;span class="c1">--设置窗体风格为fsSystemStayOnTop,详见上方参考文档 这里为将窗口置顶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.BorderStyle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;bsNone&amp;#39;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--设置窗体边界风格为bsNone，详见上方参考文档        这里为设置无边框&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">form.setLayeredAttributes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">LWA_COLORKEY&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">--设置窗口透明，详见上方参考文档&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--设置画笔&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Pen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Color&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mh">0xff00ff&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Pen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Width&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--设置字体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">Font&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Font&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Color&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mh">0xff00ff&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Font&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Size&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制文字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">textOut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Font&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Size&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--设置字体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.Brush&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--设置画刷颜色&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.textOut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--输出文字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画椭圆&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">ellipse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.ellipse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画圆&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">circle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.ellipse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画线&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sourcex&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sourcey&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationy&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sourcex&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sourcey&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">destinationy&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--画虚线矩形&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">drawFocusRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Font&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.drawFocusRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制圆角矩形&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">roundRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">ry&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">canvas.roundRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">ry&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制矩形rect(x1,y1,x2,y2,Color,Width,b)如果b=true则绘制填充矩形&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Pen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">~=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="kr">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.Brush&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Color&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mh">0xff00ff&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.fillRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="n">canvas.Brush&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--刷新绘制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">Refresh&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">form.repaint&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--绘制 传入function&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">draw&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mydraw&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">form.OnPaint&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">mydraw&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--设置OnPaint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">createTransparentWindow&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--获取窗口句柄    --这里的窗口类名MainWindow是事先用Spy++查看的 根据窗口类名得到窗口句柄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">handle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">findWindow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;MainWindow&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--获取窗口标题&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">caption&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">getWindowCaption&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">handle&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--print(ansiToUtf8(caption))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">draw&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--在这里写绘制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--调用插件提供的函数获取窗口的位置信息&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">left&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">right&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">bottom&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">GetWindowRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">handle&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">num&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">readInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;[[006a9ec0]+768]+94&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="c1">--得到僵尸数上限&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--print(num)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">addr&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">readInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;[[006a9ec0]+768]+90&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--得到僵尸数组头部地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cnt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--记录僵尸个数，达到数量上限则停止循环&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--开始遍历僵尸数组并绘制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">while&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">addr&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">cnt&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mh">0x15c&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">--获得僵尸地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">readInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mh">0xc8&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--读取血量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">readInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mh">0x8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">readInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mh">0xc&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="kr">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="mi">800&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">hp&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">then&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--判断位置是否在屏幕外和血量是否归零&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">rect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">left&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">50&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">left&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">180&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0xBC8F8F&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">textOut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">left&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mh">0xDC143C&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="c1">--print(&amp;#34;僵尸&amp;#34;,cnt+1,&amp;#34;号&amp;#34;,&amp;#34;hp:&amp;#34;,hp)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="c1">--print(&amp;#34;僵尸&amp;#34;,cnt+1,&amp;#34;号&amp;#34;,&amp;#34;x坐标:&amp;#34;,x)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="c1">--print(&amp;#34;僵尸&amp;#34;,cnt+1,&amp;#34;号&amp;#34;,&amp;#34;y坐标:&amp;#34;,y)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">cnt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cnt&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="kr">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cnt&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="kr">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--创建Timer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Timer&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">createTimer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">getMainForm&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--时钟周期设置为0.1s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Timer.Interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--添加时钟周期执行的函数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Timer.OnTimer&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">timer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--刷新绘制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Refresh&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">DISABLE&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--code from here till the end of the code will be used to disable the cheat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Timer.Enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Timer.destroy&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">form.destroy&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210015207888.webp"
width="752"
height="579"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210015207888_hu2ba41a0a84f052689332027d18573482_56250_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210015207888_hu2ba41a0a84f052689332027d18573482_56250_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210015207888"
class="gallery-image"
data-flex-grow="129"
data-flex-basis="311px"
>&lt;/p>
&lt;p>可以将以上代码复制到自动汇编窗口里然后 文件→分配到当前的CT表以后执行&lt;/p>
&lt;h4 id="不使用插件插件使用lua间接调用">不使用插件插件使用LUA间接调用&lt;/h4>
&lt;p>上述代码加上这个方法即无需插件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="nf">GetWindowRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hWnd&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--创建一个内存流&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">My&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">createMemoryStream&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--设置流的大小&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">My.Size&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mi">16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--获取要调用的方法地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--user32为要调用的模块名 后面的GetWindowRect为要调用的方法（该方法在user32模块中）,hWnd是要调用的参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--调用win32 API&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">executeCodeLocalEx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;user32.GetWindowRect&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">hWnd&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">My.Memory&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">left&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">My.readDword&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">left&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mh">0xffffff&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">left&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mh">0xfffffffe&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">top&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">My.readDword&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">right&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">My.readDword&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">bottom&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">My.readDword&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">My.destroy&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">return&lt;/span> &lt;span class="n">left&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">right&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">bottom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="lua参考文档">LUA参考文档&lt;/h2>
&lt;h2 id="lua文档查询">LUA文档查询&lt;/h2>
&lt;p>CE Lua的相关接口可以参考：&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua" target="_blank" rel="noopener"
>https://wiki.cheatengine.org/index.php?title=Lua&lt;/a>&lt;/p>
&lt;p>具体函数的内容通过 帮助(H)→Cheat Engine Lua文件来查看：&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210209184722820.webp"
width="1594"
height="1426"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210209184722820_hubca69d095ebb608d132fffafd91ade30_222462_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210209184722820_hubca69d095ebb608d132fffafd91ade30_222462_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210209184722820"
class="gallery-image"
data-flex-grow="111"
data-flex-basis="268px"
>&lt;/p>
&lt;h2 id="lua常用函数介绍">LUA常用函数介绍&lt;/h2>
&lt;h3 id="数据读取相关">数据读取相关&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">readInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Address&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">integer&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Reads a DWORD (4 bytes) at the given address and interprets them as an integer&lt;/p>
&lt;p>在给定的地址读取一个DWORD（4字节）并且将他们以integer(整型)类型返回&lt;/p>
&lt;ul>
&lt;li>参数:要读取的地址&lt;/li>
&lt;li>参数类型： &lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=CEAddressString" target="_blank" rel="noopener"
>CEAddressString&lt;/a> 或 Integer&lt;/li>
&lt;li>返回值：地址里存储的数据&lt;/li>
&lt;li>返回值类型：integer&lt;/li>
&lt;/ul>
&lt;p>CEAddressString是CE自己定义的一种数据类型，是CE内部的一种格式化的字符串，作为 internal symbol handler(内部符号handler)用来表示一个地址，例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">sun&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">readInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;[[006a9ec0]+768]+5560&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>读取阳光的数值，[]代表读取地址里面的值，这里面的偏移默认就是十六进制&lt;/p>
&lt;p>同样的也可以写成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">addr&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">readInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mh">0x6a9ec0&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--这里注意要加上0x 表示十六进制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">addr&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">addr&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mh">0x768&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--一级偏移&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">addr&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">readInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">addr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">addr&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">addr&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mh">0x5560&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--二级偏移&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sun&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">readInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">addr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>和数据读取相关的函数还有很多，如&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua:readBytes" target="_blank" rel="noopener"
>readBytes&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua:readSmallInteger" target="_blank" rel="noopener"
>readSmallInteger&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua:readQword" target="_blank" rel="noopener"
>readQword&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua:readPointer" target="_blank" rel="noopener"
>readPointer&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua:readFloat" target="_blank" rel="noopener"
>readFloat&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua:readDouble" target="_blank" rel="noopener"
>readDouble&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua:readString" target="_blank" rel="noopener"
>readString&lt;/a>&lt;/p>
&lt;p>其使用方法大同小异，我这里就不每个都介绍了，感兴趣的可以自己去研究研究&lt;/p>
&lt;p>而我的教程里只用到了readInteger于是接着介绍其它Lua函数了&lt;/p>
&lt;p>接下来介绍有关绘制的相关类，主要是&lt;strong>自己翻译和补充了&lt;/strong>一下参考文档，之前&lt;strong>绘制透明窗口用到相关的类&lt;/strong>，类的来源在这里&lt;/p>
&lt;h3 id="绘制相关类参考文档">绘制相关类(参考文档)&lt;/h3>
&lt;h4 id="form-class">Form Class&lt;/h4>
&lt;p>(Inheritance: ScrollingWinControl-&amp;gt;CustomControl-&amp;gt;WinControl-&amp;gt;Control-&amp;gt;Component-&amp;gt;Object)&lt;/p>
&lt;p>&lt;strong>Form的Canvas属性继承自CustomControl、Color属性继承自Control&lt;/strong>&lt;/p>
&lt;p>&lt;strong>Form的setLayeredAttributes方法继承自WinControl&lt;/strong>&lt;/p>
&lt;p>这里的Form是&lt;strong>Delphi&lt;/strong>绘制的Form，Form属性可参考DelPhi的Form，PS：&lt;strong>CE的文档并不是很全&lt;/strong>&lt;/p>
&lt;p>Delphi Form参考链接:&lt;a class="link" href="http://docwiki.embarcadero.com/Libraries/Sydney/en/Vcl.Forms.TForm_Properties" target="_blank" rel="noopener"
>http://docwiki.embarcadero.com/Libraries/Sydney/en/Vcl.Forms.TForm_Properties&lt;/a>&lt;/p>
&lt;p>属性（列举了CE文档里没有的）&lt;/p>
&lt;p>FormStyle（窗体样式）:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Value（值）&lt;/th>
&lt;th>&lt;strong>Meaning&lt;/strong>（意义）&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>fsNormal&lt;/td>
&lt;td>该窗体既不是MDI父窗口，也不是MDI子窗口&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fsMDIChild&lt;/td>
&lt;td>该窗体是一个MDI子窗口&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fsMDIForm&lt;/td>
&lt;td>该窗体是一个MDI父窗口&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fsStayOnTop&lt;/td>
&lt;td>该窗体始终在桌面和项目中的其他窗体的顶部，但FormStyle设置为fsStayOnTop的其他窗体除外。如果一个fsStayOnTop窗体启动另一个fsStayOnTop窗体，那么两个表单都不会始终保持在顶部&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>参考链接：&lt;a class="link" href="http://docwiki.embarcadero.com/Libraries/Sydney/en/Vcl.Forms.TForm.FormStyle" target="_blank" rel="noopener"
>http://docwiki.embarcadero.com/Libraries/Sydney/en/Vcl.Forms.TForm.FormStyle&lt;/a>&lt;/p>
&lt;p>BorderStyle（边界样式）&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;strong>Value&lt;/strong>（值）&lt;/th>
&lt;th>&lt;strong>Meaning&lt;/strong>（意义）&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>bsDialog&lt;/td>
&lt;td>不能调整大小的;没有菜单最小化或最大化&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bsSingle&lt;/td>
&lt;td>没有可调整大小的;有最小化或最大化菜单&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bsNone&lt;/td>
&lt;td>没有可调整大小的;无可见边界线&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bsSizeable&lt;/td>
&lt;td>标准可调整大小的边界&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bsToolWindow&lt;/td>
&lt;td>像bsSingle，但是标题更小&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bsSizeToolWin&lt;/td>
&lt;td>像bsSizeable但标题要小一些&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>参考链接：&lt;a class="link" href="http://docwiki.embarcadero.com/Libraries/Sydney/en/Vcl.Forms.TCustomForm.BorderStyle" target="_blank" rel="noopener"
>http://docwiki.embarcadero.com/Libraries/Sydney/en/Vcl.Forms.TCustomForm.BorderStyle&lt;/a>&lt;/p>
&lt;h4 id="custmcontrol-class">CustmControl class&lt;/h4>
&lt;p>(CustomControl-&amp;gt;WinControl-&amp;gt;Control-&amp;gt;Component-&amp;gt;Object)&lt;/p>
&lt;p>属性&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Canvas&lt;/strong>(画布) : 在控件中用来绘制的画布对象&lt;/li>
&lt;li>OnPaint: 一个OnPaint 事件，你可以设置它来做一些额外的绘制&lt;/li>
&lt;/ul>
&lt;p>方法&lt;/p>
&lt;ul>
&lt;li>getCanvas() : 在给定的对象(这个对象继承自customControl)中返回Canvas对象&lt;/li>
&lt;/ul>
&lt;h4 id="wincontrol-class">WinControl Class&lt;/h4>
&lt;p>属性&lt;/p>
&lt;ul>
&lt;li>Handle（句柄）: Integer - The internal windows handle（内部窗口局部）&lt;/li>
&lt;li>DoubleBuffered（双缓冲）: boolean - Graphical updates will go to a offscreen bitmap which will then be shown on the screen instead of directly to the screen. May reduce flickering（图形更新将转到屏幕外的位图，然后该位图将显示在屏幕上，而不是直接显示在屏幕上。可减少闪烁）&lt;/li>
&lt;li>ControlCount(控件数) : integer - The number of child controls of this wincontrol(这个控件的子控件数)&lt;/li>
&lt;li>Control[] （子控件数组）: Control - Array to access a child control（子控件数组 用来访问子控件）&lt;/li>
&lt;li>OnEnter（进入事件） : function - Function to be called when the WinControl gains focus（当该控件获取焦点时被调用的事件）&lt;/li>
&lt;li>OnExit （退出事件）: function - Function to be called when the WinControl loses focus（当该控件失去焦点时被调用的事件）&lt;/li>
&lt;/ul>
&lt;p>方法&lt;/p>
&lt;ul>
&lt;li>getControlCount()  Returns the number of Controls attached to this class（返回依附此类的控件数）&lt;/li>
&lt;li>getControl(index) : Returns a WinControl class object（返回一个WinControl 类对象）&lt;/li>
&lt;li>getControlAtPos(x,y):  Gets the control at the given x,y position relative to the wincontrol&amp;rsquo;s position（获取相对于wincontrol位置的给定x，y位置的控件）&lt;/li>
&lt;li>canFocus(): returns true if the object can be focused（返回真如果如果该对象可被聚焦）&lt;/li>
&lt;li>focused(): returns boolean true when focused（返回真如果该对象正获得焦点）&lt;/li>
&lt;li>setFocus(): tries to set keyboard focus the object（尝试设置对象的键盘焦点）&lt;/li>
&lt;li>setShape(Region): Sets the region object as the new shape for this wincontrol（设置region对象作为该控件的新形状）&lt;/li>
&lt;li>setShape(Bitmap):&lt;/li>
&lt;li>setOnEnter(function) : Sets an onEnter event. (Triggered on focus enter)（设置一个进入事件 当焦点进入时触发）&lt;/li>
&lt;li>getOnEnter()&lt;/li>
&lt;li>setOnExit(function) : Sets an onExit event. (Triggered on lost focus)(设置一个退出事件 当焦点失去时触发)&lt;/li>
&lt;li>getOnExit()&lt;/li>
&lt;li>&lt;strong>setLayeredAttributes(Key, Alpha, Flags)&lt;/strong> : Sets the layered state for the control if possible (Only Forms are supported in in windows 7 and earlier) （如果可行的话 为控件设置层次状态（windows 7及更早版本中仅支持窗体））flags can be a combination of LWA_ALPHA and/or LWA_COLORKEY （标志可以是 LWA_ALPHA 和/或LWA_COLORKEY ）&lt;br>
See msdn SetLayeredWindowAttributes for more information（参考msdn的SetLayeredWindowAttributes 来获取更多信息）&lt;/li>
&lt;/ul>
&lt;p>LWA_ALPHA时：crKey参数无效，bAlpha参数有效；&lt;/p>
&lt;p>LWA_COLORKEY：&lt;a class="link" href="https://baike.baidu.com/item/%E7%AA%97%E4%BD%93" target="_blank" rel="noopener"
>窗体&lt;/a>中的所有颜色为crKey的地方将变为透明，bAlpha参数无效。其常量值为1。&lt;/p>
&lt;p>LWA_ALPHA | LWA_COLORKEY：crKey的地方将变为全透明，而其它地方根据bAlpha参数确定透明度。&lt;/p>
&lt;h4 id="control-class">Control Class&lt;/h4>
&lt;p>(Inheritance: Component-&amp;gt;Object)&lt;/p>
&lt;p>属性&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Caption（标题）: string - The text of a control（控件文本）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Top（顶部） : integer - The x position（x位置）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Left （左边）: integer - The y position（y位置）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Width （宽）: integer - The width of the control（控件宽度）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Height （高）: integer - The height of the control（控件高度）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ClientWidth（Client宽度）: integer - The usable width inside the control (minus the borders)（在控件里的可用宽度,减少边界）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ClientHeight（Client高度）: integer - The usable height the control (minus the borders)（在控件里的可用高度,减少边界）  &lt;/p>
&lt;/li>
&lt;li>
&lt;p>Align(对齐): AlignmentOption - Alignment of the control（控件对齐）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Enabled（启用）: boolean - Determines if the object is usable or greyed out（决定对象是否可用）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Visible（可见）: boolean - Determines if the object is visible or not（决定对象是否可见）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Color&lt;/strong>（颜色）: ColorDefinition/RGBInteger - The color of the object. Does not affect the caption（对象的颜色，不影响标题）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>RGBColor（RGB颜色）: RGBInteger - The color of the object in RGB formatting（对象的颜色，RGB格式）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Parent（父类）: WinControl - The owner of this control（这个控件的拥有者）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>PopupMenu（弹出菜单）: PopupMenu - The popup menu that shows when rightclicking the control&lt;/p>
&lt;p>弹出菜单（在右键控件时显示）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Font（字体）: Font - The font class associated with the control&lt;/p>
&lt;p>和控件绑定的字体类&lt;/p>
&lt;/li>
&lt;li>
&lt;p>OnClick(点击事件): function(sender) - The function to call when a button is pressed&lt;/p>
&lt;p>当按钮按下后被调用的方法&lt;/p>
&lt;/li>
&lt;li>
&lt;p>OnChangeBounds（改变Bounds事件）:function(sender) - Called when the size or position of the control changes&lt;/p>
&lt;p>当控件的大小或位置改变时调用的方法&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="canvas-class">Canvas Class&lt;/h4>
&lt;p>(Inheritance: CustomCanvas-&amp;gt;Object)&lt;/p>
&lt;p>属性&lt;/p>
&lt;ul>
&lt;li>Brush（画刷）: Brush - The brush object&lt;/li>
&lt;li>Pen（画笔）: Pen - The pen object&lt;/li>
&lt;li>Font（字体）: Font - The font object&lt;/li>
&lt;li>Width（宽）: integer - Width of the canvas&lt;/li>
&lt;li>Height（高）: integer - Height of the canvas&lt;/li>
&lt;li>Handle（句柄）: integer - DC handle of the canvas&lt;/li>
&lt;/ul>
&lt;p>方法&lt;/p>
&lt;ul>
&lt;li>
&lt;p>getBrush(): Returns the brush object of this canvas（返回该画布的画刷对象）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getPen(): Returns the pen object of this canvas（返回该画布的画笔对象）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getFont(): Returns the font object of this canvas（返回该画布的字体对象）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getWidth()（返回画布宽度）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getHeight()（返回画布高度）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getPenPosition()（获得画笔位置）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>setPenPosition(x,y)（设置画笔位置）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>clear() - Clears the canvas（清空画布）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>line(sourcex, sourcey, destinationx, destinationy)（画线，参数为(起点x坐标，起点y坐标，终点x坐标，终点y坐标)）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>lineTo(destinationx, destinationy)（添加一个新点，然后创建从该点到画布中最后指定点的线条）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>moveTo(destinationx, destinationy)（开始一条路径，移动到位置 x,y）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>rect(x1,y1,x2,y2) - Draws a rectangle（画一个矩形 参数（矩形左上顶点x,矩形左上顶点y，矩形右下顶点x，矩形右下顶点y））&lt;/p>
&lt;/li>
&lt;li>
&lt;p>fillRect(x1,y1,x2,y2) - Draws a filled rectangle(画一个填充的矩形)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>roundRect(x1,y1,x2,y2,rx,ry) - Draws a rectangle with rounded corners（画一个圆角矩形）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>drawFocusRect(x1,y1,x2,y2) - Draws the focus rectangle shape（画一个焦点矩形）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>textOut(x,y, text)（输出文字）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>textRect(rect,x,y,text): write the text within the given rectangle. The text supports some ansi escape characters&lt;/p>
&lt;p>在给定的矩形内写下文本。文本支持一些ansi转义字符&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getTextWidth(text)（获取文本宽度）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getTextHeight(text)（获取文本高度）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getPixel(x,y)（获得指定坐标点的像素的&lt;a class="link" href="https://baike.baidu.com/item/RGB/342517" target="_blank" rel="noopener"
>RGB&lt;/a>颜色值）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>setPixel(x,y,color)（设置指定坐标点的像素的&lt;a class="link" href="https://baike.baidu.com/item/RGB/342517" target="_blank" rel="noopener"
>RGB&lt;/a>颜色值）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>floodFill(x,y, color OPTIONAL default=brush.Color, filltype OPTIONAL default=fsSurface): Fills the picture till/with a color.(颜色填充)&lt;br>
filltype can be&lt;br>
fsSurface: fill till the color (it fills all except this color)&lt;br>
fsBorder:  fill this color (it fills only connected pixels of this color)      &lt;/p>
&lt;/li>
&lt;li>
&lt;p>ellipse(x1,y1,x2,y2)（画椭圆）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>gradientFill(x1,y1,x2,y2, startcolor, stopcolor, direction) : Gradient fills a rectangle. Direction can be 0 or 1. 0=Vertical 1=Horizontal&lt;/p>
&lt;p>填充三角形和矩形颜色 可参考https://baike.baidu.com/item/GradientFill/6377439?fr=aladdin&lt;/p>
&lt;/li>
&lt;li>
&lt;p>copyRect(dest_x1,dest_y1,dest_x2,dest_y2, sourceCanvas, source_x1,source_y1,source_x2,source_y2) : Draws an image from one source to another. Useful in cases of doublebuffering&lt;/p>
&lt;p>将图像从一个源绘制到另一个源。在双重缓冲的情况下有用&lt;/p>
&lt;/li>
&lt;li>
&lt;p>strectDraw(rectdraw(x,y, graphic) : Draw the image of a specific Graphic class&lt;/p>
&lt;p>绘制特定图形类的图像&lt;/p>
&lt;/li>
&lt;li>
&lt;p>stretchDraw(rect, graphic): Draw the image of a specific Graphic class and stretch it so it fits in the given rectangle&lt;/p>
&lt;p>绘制特定图形类的图像并拉伸它，使其适合给定的矩形&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getClipRect() : Returns a table containing the fields Left, Top, Right and Bottom, which define the invalidated region of the graphical object. Use this to only render what needs to be rendered in the onPaint event of objects&lt;/p>
&lt;p>返回包含字段Left、Top、Right和Bottom的表，这些字段定义图形对象的无效区域。使用此选项仅渲染对象的onPaint事件中需要渲染的内容&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="pen-class">Pen Class&lt;/h4>
&lt;p>(Inheritance: CustomPen-&amp;gt;CanvasHelper-&amp;gt;Object)&lt;/p>
&lt;p>属性&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Color: Integer - The color of the pen （画笔颜色）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Width: integer - Thickness of the pen（画笔的粗细宽度）&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>方法&lt;/p>
&lt;ul>
&lt;li>
&lt;p>getColor()    (获取颜色)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>setColor(color)（设置颜色）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getWidth() （获取宽度）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>setWidth(width)（设置宽度）&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="brush-class">Brush Class&lt;/h4>
&lt;p>(Inheritance: CustomBrush-&amp;gt;CanvasHelper-&amp;gt;Object)&lt;/p>
&lt;p>属性&lt;/p>
&lt;ul>
&lt;li>Color : Integer（颜色）&lt;/li>
&lt;/ul>
&lt;p>方法&lt;/p>
&lt;ul>
&lt;li>getColor()    (获取颜色)&lt;/li>
&lt;li>setColor(color)（设置颜色）&lt;/li>
&lt;/ul>
&lt;h4 id="font-class">Font Class&lt;/h4>
&lt;p>(Inheritance: CustomFont-&amp;gt;CanvasHelper-&amp;gt;Object)&lt;/p>
&lt;p>属性&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Name: string（名字）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Size: integer（大小）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Height: integer（高度）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Orientation: integer（旋转角度, 单位是 1/10 度）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Pitch: string - &amp;lsquo;fpDefault&amp;rsquo;, &amp;lsquo;fpVariable&amp;rsquo;, &amp;lsquo;fpFixed&amp;rsquo;&lt;/p>
&lt;p>字间距相关的, 有三个枚举值可选&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Color: integer（颜色）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>CharSet: integer（字符集, 是个整数）&lt;/p>
&lt;p>ANSI_CHARSET    = 0;&lt;br>
DEFAULT_CHARSET   = 1;&lt;br>
SYMBOL_CHARSET   = 2;&lt;br>
SHIFTJIS_CHARSET  = 128;&lt;br>
HANGEUL_CHARSET   = 129;&lt;br>
GB2312_CHARSET   = 134;&lt;br>
CHINESEBIG5_CHARSET = 136;&lt;br>
OEM_CHARSET     = 255;&lt;br>
JOHAB_CHARSET    = 130;&lt;br>
HEBREW_CHARSET   = 177;&lt;br>
ARABIC_CHARSET   = 178;&lt;br>
GREEK_CHARSET    = 161;&lt;br>
TURKISH_CHARSET   = 162;&lt;br>
VIETNAMESE_CHARSET = 163;&lt;br>
THAI_CHARSET    = 222;&lt;br>
EASTEUROPE_CHARSET = 238;&lt;br>
RUSSIAN_CHARSET   = 204;&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Quality: string - &amp;lsquo;fqDefault&amp;rsquo;, &amp;lsquo;fqDraft&amp;rsquo;, &amp;lsquo;fqProof&amp;rsquo;, &amp;lsquo;fqNonAntialiased&amp;rsquo;, &amp;lsquo;fqAntialiased&amp;rsquo;, &amp;lsquo;fqCleartype&amp;rsquo;, &amp;lsquo;fqCleartypeNatural&amp;rsquo;&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;strong>Value&lt;/strong>(值)&lt;/th>
&lt;th>&lt;strong>Meaning&lt;/strong>（含义）&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>fqDefault&lt;/td>
&lt;td>quality 由系统设置决定&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fqDraft&lt;/td>
&lt;td>对于光栅字体，启用缩放；字体大小可以增加，但质量可能会降低。如果需要，字体还支持粗体、斜体、下划线或删除线。The quality is less important than when Proof is used.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fqProof&lt;/td>
&lt;td>字符的quality很重要，因此对于光栅字体，禁用缩放，并选择大小最接近的字体&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fqNonAntialiased&lt;/td>
&lt;td>字体从不抗锯齿&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fqAntialiased&lt;/td>
&lt;td>如果字体支持抗锯齿，它总是抗锯齿的。字体大小不能太小或太大&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fqClearType&lt;/td>
&lt;td>字体使用ClearType抗锯齿方法渲染&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fqClearTypeNatural&lt;/td>
&lt;td>字体使用ClearTypeNatural抗锯齿方法渲染&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;li>
&lt;p>Style: string set - [&amp;lsquo;fsBold&amp;rsquo;, &amp;lsquo;fsItalic&amp;rsquo;, &amp;lsquo;fsStrikeOut&amp;rsquo;, &amp;lsquo;fsUnderline&amp;rsquo;]&lt;/p>
&lt;p>fsBold 粗体&lt;br>
fsItalic 斜体&lt;br>
fsUnderline 下划线&lt;br>
fsStrikeOut 删除线&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>方法&lt;/p>
&lt;ul>
&lt;li>
&lt;p>getName(): Gets the fontname of the font&lt;/p>
&lt;p>获取字体的字体名&lt;/p>
&lt;/li>
&lt;li>
&lt;p>setName(string): Sets the fontname of the font&lt;/p>
&lt;p>设置字体的字体名&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getSize(): Gets the size of the font&lt;/p>
&lt;p>获取字体大小&lt;/p>
&lt;/li>
&lt;li>
&lt;p>setSize(integer): Sets the size of the font&lt;/p>
&lt;p>设置字体大小&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getColor(): Gets the color of the font&lt;/p>
&lt;p>获取字体颜色&lt;/p>
&lt;/li>
&lt;li>
&lt;p>setColor(integer): Sets the color of the font&lt;/p>
&lt;p>设置字体颜色&lt;/p>
&lt;/li>
&lt;li>
&lt;p>assign(font): Copies the contents of the font given as parameter to this font&lt;/p>
&lt;p>将作为参数给定的字体的内容复制到此字体&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="时钟类参考文档">时钟类（参考文档）&lt;/h3>
&lt;h4 id="timer-class">Timer Class&lt;/h4>
&lt;p>(Inheritance: Component-&amp;gt;object)&lt;/p>
&lt;p>属性&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Interval: integer - The number of milliseconds (1000=1 second) between executions&lt;/p>
&lt;p>时钟周期，单位为毫秒即千分之一秒&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Enabled: boolean（是否激活）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>OnTimer: function(timer) - The function to call when the timer triggers&lt;/p>
&lt;p>计时器触发时要调用的函数&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>方法&lt;/p>
&lt;ul>
&lt;li>
&lt;p>getInterval() 获取时钟周期&lt;/p>
&lt;/li>
&lt;li>
&lt;p>setInterval(interval) : Sets the speed on how often the timer should trigger. In milliseconds (1000=1 second)   &lt;/p>
&lt;p>设置时钟周期&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getOnTimer()   获取时钟事件&lt;/p>
&lt;/li>
&lt;li>
&lt;p>setOnTimer(function(timer)) 设置时钟事件&lt;/p>
&lt;/li>
&lt;li>
&lt;p>getEnabled() 获取是否激活&lt;/p>
&lt;/li>
&lt;li>
&lt;p>setEnabled(boolean) 设置是否激活&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="内存流相关类参考文档">内存流相关类（参考文档）&lt;/h3>
&lt;h4 id="memorystream-class">MemoryStream Class&lt;/h4>
&lt;p>(Inheritance: Stream-&amp;gt;Object)&lt;/p>
&lt;p>MemoryStream的Size属性继承自Stream Class&lt;/p>
&lt;p>属性&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Memory: Integer - The address in Cheat Engine&amp;rsquo;s memory this stream is loaded (READONLY, tends to change on size change)&lt;/p>
&lt;p>内存 此流加载的CE内存中的地址 （只读，随size变化而变化）&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>方法&lt;/p>
&lt;ul>
&lt;li>
&lt;p>loadFromFile(filename) : Replaces the contents in the memory stream with the contents of a file on disk&lt;/p>
&lt;p>用磁盘上文件的内容替换内存流中的内容&lt;/p>
&lt;/li>
&lt;li>
&lt;p>saveToFile(filename) : Writes the contents of the memory stream to the specified file&lt;/p>
&lt;p>将内存流的内容写入指定的文件&lt;/p>
&lt;/li>
&lt;li>
&lt;p>loadFromFileNoError(filename):boolean,string - Replaces the contents in the memory stream with the contents of a file on disk. On success returns true, else false with a secondary return the error message&lt;/p>
&lt;p>用磁盘上文件的内容替换内存流中的内容。成功时返回true，否则返回false，并返回错误消息&lt;/p>
&lt;/li>
&lt;li>
&lt;p>saveToFileNoError(filename):boolean,string - Writes the contents of the memory stream to the specified file. On success returns true, else false with a secondary return the error message&lt;/p>
&lt;p>将内存流的内容写入指定的文件。成功时返回true，否则返回false，并返回错误消息&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="stream-class">Stream Class&lt;/h4>
&lt;p>属性&lt;/p>
&lt;ul>
&lt;li>Size: integer（流的大小）&lt;/li>
&lt;li>Position: integer（流的位置）&lt;/li>
&lt;/ul>
&lt;p>方法&lt;/p>
&lt;ul>
&lt;li>
&lt;p>copyFrom(stream, count) - Copies count bytes from the given stream to this stream&lt;/p>
&lt;p>将给定流中的count字节复制到此流&lt;/p>
&lt;/li>
&lt;li>
&lt;p>read(count): bytetable - Returns a bytetable containing the bytes of the stream. This increases the position&lt;/p>
&lt;p>返回包含流字节的字节表。这会增加position&lt;/p>
&lt;/li>
&lt;li>
&lt;p>write(bytetable, count OPTIONAL)- Writes the given bytetable to the stream&lt;/p>
&lt;p>将给定的bytetable写入流&lt;/p>
&lt;/li>
&lt;li>
&lt;p>readByte(): integer&lt;/p>
&lt;/li>
&lt;li>
&lt;p>writeByte(integer)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>readWord(): integer&lt;/p>
&lt;/li>
&lt;li>
&lt;p>writeWord(integer)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>readDword(): integer&lt;/p>
&lt;/li>
&lt;li>
&lt;p>writeDword(integer)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>readQword(): integer&lt;/p>
&lt;/li>
&lt;li>
&lt;p>writeQword(integer)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>readAnsiString(): string&lt;/p>
&lt;/li>
&lt;li>
&lt;p>writeAnsiString(string)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="其它绘制用到的方法参考方法">其它绘制用到的方法（参考方法）&lt;/h3>
&lt;h4 id="createform">createForm&lt;/h4>
&lt;p>参考链接:&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua:Class:Form" target="_blank" rel="noopener"
>https://wiki.cheatengine.org/index.php?title=Lua:Class:Form&lt;/a>&lt;/p>
&lt;p>创建窗体:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">createForm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">visible&lt;/span> &lt;span class="n">OPT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Creates a Form class object(window) and returns the pointer for it. Visible is default true but can be changed&lt;/p>
&lt;p>创建一个Form 类对象(窗口) 并返回指向它的指针。默认是可见的窗体，但可以被改变&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>参数类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>visible OPT&lt;/td>
&lt;td>bool&lt;/td>
&lt;td>创建的窗口是否可见    true为可见 false为不可见&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>pointer for the created form&lt;/td>
&lt;td>pointer&lt;/td>
&lt;td>指向创建出来的form的指针&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>例:createForm(true)&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210209193158891.webp"
width="324"
height="296"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210209193158891_hua93f218db9c2558acbd4ad5dead6daba_1474_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210209193158891_hua93f218db9c2558acbd4ad5dead6daba_1474_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210209193158891"
class="gallery-image"
data-flex-grow="109"
data-flex-basis="262px"
>&lt;/p>
&lt;h4 id="getscreenheight">getScreenHeight&lt;/h4>
&lt;p>参考链接:&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua:getScreenHeight" target="_blank" rel="noopener"
>getScreenHeight&lt;/a>&lt;/p>
&lt;p>无参数&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>screenHeight&lt;/td>
&lt;td>integer&lt;/td>
&lt;td>屏幕高度&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="getscreenwidth">getScreenWidth&lt;/h4>
&lt;p>参考链接:&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Lua:getScreenWidth" target="_blank" rel="noopener"
>getScreenWidth&lt;/a>&lt;/p>
&lt;p>无参数&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>screenWidth&lt;/td>
&lt;td>integer&lt;/td>
&lt;td>屏幕宽度&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="createtimer">createTimer&lt;/h4>
&lt;p>参考链接:&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=createTimer" target="_blank" rel="noopener"
>createTimer&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">createTimer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Owner&lt;/span> &lt;span class="n">OPTIONAL&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Enabled&lt;/span> &lt;span class="n">OPTIONAL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Timer&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>参数类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Control" target="_blank" rel="noopener"
>Control&lt;/a> or &lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=Component" target="_blank" rel="noopener"
>Component&lt;/a> based object&lt;/td>
&lt;td>计时器的所有者（用于资源清理）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Enabled&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>计时器的启用状态，设置为false以在创建时禁用计时器&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>timer&lt;/td>
&lt;td>Timer&lt;/td>
&lt;td>新创建的timer对象&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Tip: 使用&lt;a class="link" href="https://wiki.cheatengine.org/index.php?title=getMainForm" target="_blank" rel="noopener"
>getMainForm&lt;/a> 方法作为owner(创建者) 可以使得计时器和main form同步摧毁&lt;/p>
&lt;h4 id="findwindow">findWindow&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">findWindow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">classname&lt;/span> &lt;span class="n">OPTIONAL&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">caption&lt;/span> &lt;span class="n">OPTIONAL&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">windowhandle&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Finds a window with the given classname and/or windowname&lt;/p>
&lt;p>根据给定的窗口类名和/或窗口名称得到窗口句柄&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>参数类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>classname&lt;/td>
&lt;td>string&lt;/td>
&lt;td>窗口类名&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>caption&lt;/td>
&lt;td>string&lt;/td>
&lt;td>窗口标题名称&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>windowhandle&lt;/td>
&lt;td>windowhandle&lt;/td>
&lt;td>窗口句柄&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="getwindowcaption">getWindowCaption&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">getWindowCaption&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">windowhandle&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Returns the caption of the window&lt;/p>
&lt;p>返回窗口的标题&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>参数类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>windowhandle&lt;/td>
&lt;td>windowhandle&lt;/td>
&lt;td>窗口句柄&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>caption&lt;/td>
&lt;td>string&lt;/td>
&lt;td>窗口标题名称&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="补充方法可以间接调用win32-api等">补充方法(可以间接调用Win32 API等)&lt;/h3>
&lt;h4 id="creatememorystream">createMemoryStream&lt;/h4>
&lt;p>创建一个内存流，返回指向创建出来的内存流指针&lt;/p>
&lt;h4 id="executecodelocalex">executeCodeLocalEx&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">executeCodeLocalEx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">address&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">param1&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">param1&lt;/span>&lt;span class="p">,{&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">param2&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">param2&lt;/span>&lt;span class="p">,...)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Calls a function using the given callmethod and parameters&lt;/p>
&lt;p>使用给定的调用方法和参数来调用一个函数&lt;/p>
&lt;p>If a direct parameter is given instead of a table entry describing the type, CE will &amp;lsquo;guess&amp;rsquo; the type it is&lt;/p>
&lt;p>如果给定的是直接参数而不是描述类型的表项，CE将&amp;rsquo;猜&amp;rsquo;它是什么类型&lt;/p>
&lt;p>Returns the E/RAX value returned by the called function (if no timeout or other interruption)&lt;/p>
&lt;p>返回由被调用函数返回的 E/RAX 值 (如果没有超时或其它错误)&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>参数类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>address&lt;/td>
&lt;td>string&lt;/td>
&lt;td>模块名或export&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>param&lt;/td>
&lt;td>？&lt;/td>
&lt;td>指定方法所需参数 多个参数通过逗号连接&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>memory&lt;/td>
&lt;td>MemoryStream.Memory&lt;/td>
&lt;td>内存地址&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>？&lt;/td>
&lt;td>？&lt;/td>
&lt;td>由被调用方法决定返回值&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="getaddress">getAddress&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">getAddress&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="kd">local&lt;/span> &lt;span class="n">OPTIONAL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>returns the address of a symbol. Can be a modulename or an export. set Local to true if you wish to querry the symboltable of the ce process&lt;/p>
&lt;p>返回一个符号的地址。可以是一个模块名或一个export。设置local为true如果你想要查询ce进程的符号表&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>参数类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>symbol or export&lt;/td>
&lt;td>string&lt;/td>
&lt;td>模块名或export&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>local&lt;/td>
&lt;td>bool&lt;/td>
&lt;td>设置local为true如果你想要查询ce进程的符号表&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>address&lt;/td>
&lt;td>number&lt;/td>
&lt;td>地址&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="注意事项">注意事项&lt;/h2>
&lt;p>LUA的参考文档是本人集合CE官方的文档和Delphi等相关资料&lt;strong>翻译整理&lt;/strong>而成，可能会有些地方并不是很准确，&lt;strong>仅供参考&lt;/strong>&lt;/p>
&lt;p>（翻译和找文档真的好不容易QAQ）&lt;/p>
&lt;p>提供的CT表里有三个脚本:&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210134618992.webp"
width="881"
height="134"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210134618992_hu943bf6fe86adb0a60dfa942f925f201f_11402_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210134618992_hu943bf6fe86adb0a60dfa942f925f201f_11402_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210134618992"
class="gallery-image"
data-flex-grow="657"
data-flex-basis="1577px"
>&lt;/p>
&lt;p>&lt;strong>pvz的两个绘制脚本不要同时开启!!!&lt;/strong>&lt;/p>
&lt;p>我自己写的插件只是提供了GetWindowRect方法,并没有提供其它东西，主要是让大家了解&lt;strong>CE插件的使用及开发&lt;/strong>&lt;/p>
&lt;p>&lt;strong>限于文章篇幅，此教程作为上篇仅为LUA的绘制教程，有关插件的开发教程放到下篇&lt;/strong>&lt;/p>
&lt;h2 id="个人感言及附件下载">个人感言及附件下载&lt;/h2>
&lt;p>CE其实提供了不少给开发者拓展的功能，如LUA脚本、Plugin开发等等，但用到这些功能的人却并不那么多，于是抱着探索的态度和大家一起聊聊CE的这两大功能&lt;/p>
&lt;h2 id="下篇前言">下篇前言：&lt;/h2>
&lt;p>承接上篇教程，这次来讲讲如何为CE开发扩展的插件&lt;/p>
&lt;p>上篇教程直达车：&lt;a class="link" href="https://www.52pojie.cn/thread-1369369-1-1.html" target="_blank" rel="noopener"
>&lt;strong>CE自写插件提供LUA接口实现pvz僵尸绘制之上篇&lt;/strong>&lt;/a>&lt;/p>
&lt;hr>
&lt;p>总教程分成两部分：&lt;/p>
&lt;ul>
&lt;li>LUA的使用&lt;/li>
&lt;li>Plugin的开发&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>本下篇教程为Plugin的开发部分&lt;/strong>&lt;/p>
&lt;h2 id="事前准备-2">事前准备&lt;/h2>
&lt;p>本人使用的工具：CE7.2汉化版（这次要&lt;strong>注意版本&lt;/strong>，插件和CE版本相关，汉化与否不影响）&lt;/p>
&lt;p>论坛有：&lt;a class="link" href="https://down.52pojie.cn/Tools/Debuggers/Cheat%20Engine%20v7.2.exe" target="_blank" rel="noopener"
>&lt;strong>CE7.2&lt;/strong>&lt;/a>&lt;/p>
&lt;p>VS2015 （可以&lt;strong>兼容XP&lt;/strong>的插件开发）&lt;/p>
&lt;p>VS2015:&lt;a class="link" href="https://my.visualstudio.com/Downloads?q=visual%20studio%202015&amp;amp;wt.mc_id=o~msft~vscom~older-downloads" target="_blank" rel="noopener"
>https://my.visualstudio.com/Downloads?q=visual%20studio%202015&amp;amp;wt.mc_id=o~msft~vscom~older-downloads&lt;/a>&lt;/p>
&lt;p>CE7.2源码一份:&lt;a class="link" href="https://github.com/cheat-engine/cheat-engine/archive/7.2.zip" target="_blank" rel="noopener"
>https://github.com/cheat-engine/cheat-engine/archive/7.2.zip&lt;/a>&lt;/p>
&lt;h2 id="教程内容-2">教程内容&lt;/h2>
&lt;h2 id="vs2015的安装">VS2015的安装&lt;/h2>
&lt;h3 id="插件编译环境">插件编译环境&lt;/h3>
&lt;p>CE插件的编译中 example-c里使用的环境是**VS2015+WDK8.1(**能够兼容XP)&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210183952985.webp"
width="1948"
height="1234"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210183952985_hu555712bcbb359c7ac69075068418ab9a_118674_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210183952985_hu555712bcbb359c7ac69075068418ab9a_118674_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210183952985"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;p>根据我上面提供的链接下载并安装VS2015 （貌似下载前要登陆Microsoft账号）&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210183416917.webp"
width="3839"
height="1913"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210183416917_hue5193d7d5915f42bfc69232167c5feae_129354_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210183416917_hue5193d7d5915f42bfc69232167c5feae_129354_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210183416917"
class="gallery-image"
data-flex-grow="200"
data-flex-basis="481px"
>&lt;/p>
&lt;p>下载和安装VS2015的教程网上很多，这里不作重点，默认大家能安装好了&lt;/p>
&lt;p>PS：安装好后用VS2015打开Plugin插件&lt;/p>
&lt;h2 id="plugin-源码解析">Plugin 源码解析&lt;/h2>
&lt;p>想知道如何开发一个插件，必不可少的就是去读一读别人的源码&lt;/p>
&lt;p>下载并解压源码以后切换到\cheat-engine-7.2\Cheat Engine\plugin\example-c目录下&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210190512849.webp"
width="2129"
height="624"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210190512849_hu9229f59d003362ea4e87539c20f2df83_63628_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210190512849_hu9229f59d003362ea4e87539c20f2df83_63628_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210190512849"
class="gallery-image"
data-flex-grow="341"
data-flex-basis="818px"
>&lt;/p>
&lt;p>用VS2015打开.sln文件（如果是第一次打开会让你下载WDK8.1等相关的组件，点击确定让它自动下载安装即可）&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210190706747.webp"
width="1459"
height="1157"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210190706747_huf1ac5309ebb26ea0d4be3c29489686a5_53796_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210190706747_huf1ac5309ebb26ea0d4be3c29489686a5_53796_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210190706747"
class="gallery-image"
data-flex-grow="126"
data-flex-basis="302px"
>&lt;/p>
&lt;h3 id="源码结构">源码结构&lt;/h3>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210190934311.webp"
width="809"
height="866"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210190934311_hua0d0c78150e69e7444581004512c1a66_39728_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210190934311_hua0d0c78150e69e7444581004512c1a66_39728_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210190934311"
class="gallery-image"
data-flex-grow="93"
data-flex-basis="224px"
>&lt;/p>
&lt;p>首先明确一点：我们编写出来的插件是dll格式，即是开发一个&lt;strong>动态链接库程序&lt;/strong>作为插件给CE调用&lt;/p>
&lt;p>我们可以大致将这个例子的结构分为四层&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>结构&lt;/th>
&lt;th>包含文件&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>一个全被注释的头文件和一个空的源文件，留给我们拓展用的，可以删去&lt;/td>
&lt;td>bla.h bla.cpp&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CE提供给我们的头文件和LUA提供给我们的头文件&lt;/td>
&lt;td>cepluginsdk.h lauxlib.h lua.h luaconf.h lualib.h&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>主程序代码，即我们要编写插件的关键代码&lt;/td>
&lt;td>example-c&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>定义我们要导出的函数&lt;/td>
&lt;td>example-c.def&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="需要用到的静态库文件">需要用到的静态库文件&lt;/h3>
&lt;p>我们看到了头文件里有LUA和CE提供的头文件，但源文件里并没有对应的源文件，于是我们知道是引入了.lib静态库文件&lt;/p>
&lt;p>那么静态库文件在哪呢?&lt;/p>
&lt;p>项目→属性→链接器→输入→附加依赖项&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192559410.webp"
width="1948"
height="1234"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192559410_hube5e86d03ce865deb108c8db58ee464c_79968_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192559410_hube5e86d03ce865deb108c8db58ee464c_79968_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210192559410"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192643755.webp"
width="1927"
height="89"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192643755_hu2152cb7fd9b97cbe6b1600e3256bd707_8250_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192643755_hu2152cb7fd9b97cbe6b1600e3256bd707_8250_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210192643755"
class="gallery-image"
data-flex-grow="2165"
data-flex-basis="5196px"
>&lt;/p>
&lt;p>将上方的平台分别改为Win32和X64，可以看到附加依赖项分别显示为:&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192729562.webp"
width="1946"
height="218"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192729562_hu699ae05d40e639f4bb43c8d8d6da982a_21348_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192729562_hu699ae05d40e639f4bb43c8d8d6da982a_21348_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210192729562"
class="gallery-image"
data-flex-grow="892"
data-flex-basis="2142px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192750875.webp"
width="1937"
height="222"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192750875_hu067fd79a835c3a7b04a1f9967de49020_21348_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192750875_hu067fd79a835c3a7b04a1f9967de49020_21348_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210192750875"
class="gallery-image"
data-flex-grow="872"
data-flex-basis="2094px"
>&lt;/p>
&lt;p>我们可以知道该项目使用了lua53-32.lib和lua53-64.lib&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192949570.webp"
width="1967"
height="904"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192949570_hu7f1208dfffb1586655352530e987d205_97074_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210192949570_hu7f1208dfffb1586655352530e987d205_97074_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210192949570"
class="gallery-image"
data-flex-grow="217"
data-flex-basis="522px"
>&lt;/p>
&lt;p>这两个lib文件就在cheat-engine-7.2\Cheat Engine\plugin目录下&lt;/p>
&lt;p>我们可以将这两个.lib文件复制到cheat-engine-7.2\Cheat Engine\plugin\example-c中&lt;/p>
&lt;p>下面简单说一下.lib文件的来源，我们也可以&lt;strong>自己生成&lt;/strong>这两个.lib文件&lt;/p>
&lt;h3 id="编译lib静态库文件非必须">编译lib静态库文件(非必须)&lt;/h3>
&lt;p>cheat-engine-7.2\Cheat Engine\lua53\lua53\vs2013\lua53目录下自己编译.lib静态库文件&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210193527486.webp"
width="2021"
height="602"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210193527486_hu44e55447c04883f3c9aee18a39f3de2c_34290_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210193527486_hu44e55447c04883f3c9aee18a39f3de2c_34290_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210193527486"
class="gallery-image"
data-flex-grow="335"
data-flex-basis="805px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210193720043.webp"
width="1459"
height="1157"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210193720043_hu53dc00d904c44354e7989b91b6a22e3b_49320_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210193720043_hu53dc00d904c44354e7989b91b6a22e3b_49320_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210193720043"
class="gallery-image"
data-flex-grow="126"
data-flex-basis="302px"
>&lt;/p>
&lt;h4 id="生成lua53-64lib">生成lua53-64.lib&lt;/h4>
&lt;p>打开项目以后需要设置一下项目的属性&lt;/p>
&lt;p>将lua53的平台工具集改为Visual Studio 2015 - Windows XP (v140_xp)&lt;/p>
&lt;p>平台改为x64&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210194051711.webp"
width="1948"
height="1234"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210194051711_hu82d26b0ab92981fe5f43746792131165_124932_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210194051711_hu82d26b0ab92981fe5f43746792131165_124932_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210194051711"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;p>然后打开配置管理器，将活动解决方案配置改为Release，活动解决方案平台改成x64&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210194421050.webp"
width="1402"
height="915"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210194421050_hu5c364673e58aaa3c44f9230b031916ac_27544_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210194421050_hu5c364673e58aaa3c44f9230b031916ac_27544_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210194421050"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="367px"
>&lt;/p>
&lt;p>然后Ctrl+Shift+B或者生成→生成解决方案&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210194602657.webp"
width="2989"
height="421"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210194602657_hu21d127cc04c3b12cbe59599484119ead_47576_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210194602657_hu21d127cc04c3b12cbe59599484119ead_47576_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210194602657"
class="gallery-image"
data-flex-grow="709"
data-flex-basis="1703px"
>&lt;/p>
&lt;p>可以看到我们所需要的静态库文件生成在了cheat-engine-7.2\Cheat Engine\bin下&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195004287.webp"
width="1976"
height="1700"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195004287_hue077d0d976c2a05b8fef4b9e80493f1e_228550_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195004287_hue077d0d976c2a05b8fef4b9e80493f1e_228550_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210195004287"
class="gallery-image"
data-flex-grow="116"
data-flex-basis="278px"
>&lt;/p>
&lt;p>我图中用红框框出来的就是我们刚刚生成的文件，其中我们只需要用到.lib文件&lt;/p>
&lt;h4 id="生成lua53-32lib">生成lua53-32.lib&lt;/h4>
&lt;p>将之前的属性页和配置管理器页中的平台改成Win32，再生成一份lua53-32&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195218993.webp"
width="1402"
height="915"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195218993_hu254076813c9250eaae7505ad5432c7d8_28634_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195218993_hu254076813c9250eaae7505ad5432c7d8_28634_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210195218993"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="367px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195239192.webp"
width="1948"
height="1234"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195239192_hue2d39cc20db75b6967f9b27be77165f6_125346_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195239192_hue2d39cc20db75b6967f9b27be77165f6_125346_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210195239192"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195444569.webp"
width="2967"
height="434"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195444569_hu71504ea7453a6b09dfb1186a9d1ec4fe_49736_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195444569_hu71504ea7453a6b09dfb1186a9d1ec4fe_49736_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210195444569"
class="gallery-image"
data-flex-grow="683"
data-flex-basis="1640px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195533901.webp"
width="2019"
height="1694"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195533901_hucfce39c780334bda14cc491994a870c7_220900_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210195533901_hucfce39c780334bda14cc491994a870c7_220900_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210195533901"
class="gallery-image"
data-flex-grow="119"
data-flex-basis="286px"
>&lt;/p>
&lt;h3 id="编译example-c插件">编译example-c插件&lt;/h3>
&lt;p>拿到源码以后最想干的事莫过于先让它跑起来，验证是否能够正确运行，于是我们先将插件编译出来再慢慢分析&lt;/p>
&lt;p>将前面我们生成好的(或者直接拿上级目录里的)lua53-32.lib和lua53-64.lib复制到cheat-engine-7.2\Cheat Engine\plugin\example-c下&lt;/p>
&lt;p>复制完以后打开example-c这个项目&lt;/p>
&lt;p>然后确保将配置管理器改成 Release和x64&lt;/p>
&lt;p>属性页设置为所有平台&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210202752883.webp"
width="1402"
height="915"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210202752883_hu796e045405a811230607b0ebe2713c4e_26392_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210202752883_hu796e045405a811230607b0ebe2713c4e_26392_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210202752883"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="367px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210202845467.webp"
width="1948"
height="1234"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210202845467_hu8a708aa7d130deba8c92c6c131be5211_118072_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210202845467_hu8a708aa7d130deba8c92c6c131be5211_118072_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210202845467"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;p>设置完以后就可以Ctrl+Shift+B编译插件了&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205119056.webp"
width="2971"
height="440"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205119056_hud83cf50eb4451b290be1e79b01885a59_44526_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205119056_hud83cf50eb4451b290be1e79b01885a59_44526_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210205119056"
class="gallery-image"
data-flex-grow="675"
data-flex-basis="1620px"
>&lt;/p>
&lt;p>完美生成插件&lt;/p>
&lt;p>在cheat-engine-7.2\Cheat Engine\plugin\example-c\x64\Release查看&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205436686.webp"
width="1563"
height="591"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205436686_hua81be80a06bf89ce80e10d972b0afe15_60620_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205436686_hua81be80a06bf89ce80e10d972b0afe15_60620_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210205436686"
class="gallery-image"
data-flex-grow="264"
data-flex-basis="634px"
>&lt;/p>
&lt;p>我们试着用CE加载一下插件&lt;/p>
&lt;p>打开CE→编辑→设置→插件→添加&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205838298.webp"
width="1387"
height="887"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205838298_hu820602763c86ed78eb3b17e69ae4c5cc_46114_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205838298_hu820602763c86ed78eb3b17e69ae4c5cc_46114_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210205838298"
class="gallery-image"
data-flex-grow="156"
data-flex-basis="375px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205852327.webp"
width="1389"
height="1354"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205852327_hu8bfb10ea8791fbbdb07e067e35f7f03a_37226_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205852327_hu8bfb10ea8791fbbdb07e067e35f7f03a_37226_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210205852327"
class="gallery-image"
data-flex-grow="102"
data-flex-basis="246px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205901681.webp"
width="820"
height="250"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205901681_hu9dfe37c69987b34f6c8462dcde5ffa7d_8658_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210205901681_hu9dfe37c69987b34f6c8462dcde5ffa7d_8658_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210205901681"
class="gallery-image"
data-flex-grow="328"
data-flex-basis="787px"
>&lt;/p>
&lt;h3 id="源码解析">源码解析&lt;/h3>
&lt;h4 id="导出函数说明">导出函数说明&lt;/h4>
&lt;p>我们先看.def文件，查看导出的函数&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210211548799.webp"
width="750"
height="265"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210211548799_hu1a06317f3a71294940a6f618801d6683_18704_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210210211548799_hu1a06317f3a71294940a6f618801d6683_18704_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210210211548799"
class="gallery-image"
data-flex-grow="283"
data-flex-basis="679px"
>&lt;/p>
&lt;p>有三个导出的函数：&lt;/p>
&lt;p>分别为：CEPlugin_GetVersion        CEPlugin_InitializePlugin        CEPlugin_DisablePlugin&lt;/p>
&lt;hr>
&lt;p>我们可以看看有关CE插件的文档：&lt;a class="link" href="https://cheatengine.org/help/index.html" target="_blank" rel="noopener"
>https://cheatengine.org/help/index.html&lt;/a>&lt;/p>
&lt;p>Cheat Engine comes with a plugin system so developers can add extra functions and features to ce without having to code in Delphi (Any language that can create standard DLL&amp;rsquo;s with normal exports can make plugins for ce), or having to share their sourcecode.&lt;/p>
&lt;p>CE 带来了插件系统 这样一来开发者们就可以添加额外的功能和特性到CE里，无需用Delphi 编程（任何语言都可以为CE创建正常导出的标准的DLL）&lt;/p>
&lt;p>To make use of the plugin system you need to create a dll that exports 3 functions:&lt;/p>
&lt;p>为了确保插件系统的正常运转，你需要创建一个带有以下三个导出功能的dll&lt;/p>
&lt;p>GetVersion, DisablePlugin, and InitializePlugin&lt;/p>
&lt;p>Note: Unless stated otherwise, all function calls use the stdcall calling mechanism.&lt;/p>
&lt;p>注意：除非额外声明，所有的功能调用协定都应该使用stdcall&lt;/p>
&lt;p>Cheat Engine comes with some example plugins. They generally make use of a common SDK file. Currently, there is a version for Delphi and a version for C available&lt;/p>
&lt;p>CE带来了一些例子插件。它们通常使用一个公共的SDK文件，目前，有一个Delphi版本和一个C版本&lt;/p>
&lt;hr>
&lt;p>所以我们知道为什么导出的函数里有这三个函数了&lt;/p>
&lt;p>依次说说这三个函数&lt;/p>
&lt;h5 id="getversion">&lt;strong>GetVersion&lt;/strong>&lt;/h5>
&lt;p>The GetVersion routine is a routine that will get called when the dll is queried for the first time.&lt;/p>
&lt;p>GetVersion例程是第一次查询dll时将调用的例程GetVersion(&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>参数类型&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>pv&lt;/td>
&lt;td>PPluginVersion&lt;/td>
&lt;td>指向PluginVersion的指针，必须填充&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>sizeofpluginversion&lt;/td>
&lt;td>int&lt;/td>
&lt;td>pv参数中提供的PluginVersion结构的大小。您可以使用这个来确保您的插件版本与作弊引擎插件系统的当前实现兼容。目前，应该是8&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>true&lt;/td>
&lt;td>bool&lt;/td>
&lt;td>返回值必须设置为1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h6 id="pluginversion">PluginVersion&lt;/h6>
&lt;p>The PluginVersion lets you specify for which plugin version the dll was developed and what the name of that plugin is.&lt;/p>
&lt;p>PluginVersion允许你指定插件版本以及该插件的名称&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">typedef&lt;/span> &lt;span class="n">struct&lt;/span> &lt;span class="n">_PluginVersion&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">unsigned&lt;/span> &lt;span class="n">int&lt;/span> &lt;span class="n">version&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">char&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">pluginname&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">PluginVersion&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">PPluginVersion&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>成员&lt;/th>
&lt;th>属性&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>version&lt;/td>
&lt;td>unsigned int(无符号整型)&lt;/td>
&lt;td>设置这个dll所期望的版本&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pluginname&lt;/td>
&lt;td>char *（字符串）&lt;/td>
&lt;td>CE会在initializePlugin上为你的插件提供一个兼容的指针/函数列表。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="disableplugin">DisablePlugin&lt;/h5>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">BOOL&lt;/span> &lt;span class="n">DisablePlugin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">void&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>The DisablePlugin routine is a routine that will get called when Cheat Engine closes or when the user deselects the plugin in settings.&lt;/p>
&lt;p>DisablePlugin例程，当CE关闭或用户在设置中取消选择插件时，它将被调用。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>true&lt;/td>
&lt;td>bool&lt;/td>
&lt;td>返回值必须设置为1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="initializeplugin">InitializePlugin&lt;/h5>
&lt;p>The InitializePlugin routine is called when Cheat Engine is started and the plugin is enabled in the registry, or when the user enables it in settings and clicks ok.&lt;/p>
&lt;p>当启动CE并在注册表中启用插件时，或者当用户在“设置”中启用插件并单击“确定”时，将调用InitializePlugin例程。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">BOOL&lt;/span> &lt;span class="n">InitializePlugin&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PExportedFunctions&lt;/span> &lt;span class="n">ef&lt;/span> &lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">int&lt;/span> &lt;span class="n">pluginid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>参数类型&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ef&lt;/td>
&lt;td>PExportedFunctions&lt;/td>
&lt;td>CE的ExportedFunctions结构的地址副本，在从InitializePlugin函数返回之前复制此结构&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pluginid&lt;/td>
&lt;td>int&lt;/td>
&lt;td>插件id，只要你的插件处于活动状态，它的pluginid就一直存在。此ID用于注册回调&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>true&lt;/td>
&lt;td>bool&lt;/td>
&lt;td>返回值必须设置为1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>It is recommended to register the callback functions in this routine and save ExportedFunctions for later usage. For more information about the callbacks see the relevant help topics&lt;/p>
&lt;p>建议在此例程中注册回调函数，并保存ExportedFunctions以备以后使用。有关回调的更多信息，请参阅相关的帮助主题&lt;/p>
&lt;h6 id="exportedfunctions">ExportedFunctions&lt;/h6>
&lt;p>The ExportedFunctions structure contains several pointers to usefull functions in CE, and pointers to the pointers of specific functions that might be worth hooking.&lt;/p>
&lt;p>ExportedFunctions结构包含几个指向CE中有用函数的指针，以及指向可能值得hook的特定函数的指针。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">typedef&lt;/span> &lt;span class="n">struct&lt;/span> &lt;span class="n">_ExportedFunctions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">int&lt;/span> &lt;span class="n">sizeofExportedFunctions&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_SHOWMESSAGE&lt;/span> &lt;span class="n">ShowMessage&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_REGISTERFUNCTION&lt;/span> &lt;span class="n">RegisterFunction&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_UNREGISTERFUNCTION&lt;/span> &lt;span class="n">UnregisterFunction&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PULONG&lt;/span> &lt;span class="n">OpenedProcessID&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PHANDLE&lt;/span> &lt;span class="n">OpenedProcessHandle&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_GETMAINWINDOWHANDLE&lt;/span> &lt;span class="n">GetMainWindowHandle&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_AUTOASSEMBLE&lt;/span> &lt;span class="n">AutoAssemble&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_ASSEMBLER&lt;/span> &lt;span class="n">Assembler&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_DISASSEMBLER&lt;/span> &lt;span class="n">Disassembler&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CHANGEREGATADDRESS&lt;/span> &lt;span class="n">ChangeRegistersAtAddress&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_INJECTDLL&lt;/span> &lt;span class="n">InjectDLL&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_FREEZEMEM&lt;/span> &lt;span class="n">FreezeMem&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_UNFREEZEMEM&lt;/span> &lt;span class="n">UnfreezeMem&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_FIXMEM&lt;/span> &lt;span class="n">FixMem&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_PROCESSLIST&lt;/span> &lt;span class="n">ProcessList&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_RELOADSETTINGS&lt;/span> &lt;span class="n">ReloadSettings&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_GETADDRESSFROMPOINTER&lt;/span> &lt;span class="n">GetAddressFromPointer&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">pointers&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">address&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">contains&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">pointers&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">functions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="err">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">ReadProcessMemory&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">WriteProcessMemory&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetThreadContext&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">SetThreadContext&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">SuspendThread&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">ResumeThread&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">OpenProcess&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">WaitForDebugEvent&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">ContinueDebugEvent&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">DebugActiveProcess&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">StopDebugging&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">StopRegisterChange&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">VirtualProtect&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">VirtualProtectEx&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">VirtualQueryEx&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">VirtualAllocEx&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">CreateRemoteThread&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">OpenThread&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetPEProcess&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetPEThread&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetThreadsProcessOffset&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetThreadListEntryOffset&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetProcessnameOffset&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetDebugportOffset&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetPhysicalAddress&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">ProtectMe&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetCR4&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetCR3&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">SetCR3&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetSDT&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetSDTShadow&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">setAlternateDebugMethod&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">getAlternateDebugMethod&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">DebugProcess&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">ChangeRegOnBP&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">RetrieveDebugData&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">StartProcessWatch&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">WaitForProcessListData&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetProcessNameFromID&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetProcessNameFromPEProcess&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">KernelOpenProcess&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">KernelReadProcessMemory&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">KernelWriteProcessMemory&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">KernelVirtualAllocEx&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">IsValidHandle&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetIDTCurrentThread&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetIDTs&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">MakeWritable&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetLoadedState&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">DBKSuspendThread&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">DBKResumeThread&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">DBKSuspendProcess&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">DBKResumeProcess&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">KernelAlloc&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">GetKProcAddress&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">CreateToolhelp32Snapshot&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">Process32First&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">Process32Next&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">Thread32First&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">Thread32Next&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">Module32First&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">Module32Next&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">Heap32ListFirst&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">Heap32ListNext&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="o">//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">mainform&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">PVOID&lt;/span> &lt;span class="n">memorybrowser&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_GENERATEAPIHOOKSCRIPT&lt;/span> &lt;span class="n">sym_nameToAddress&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_ADDRESSTONAME&lt;/span> &lt;span class="n">sym_addressToName&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_NAMETOADDRESS&lt;/span> &lt;span class="n">sym_generateAPIHookScript&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_LOADDBK32&lt;/span> &lt;span class="n">loadDBK32&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_LOADDBVMIFNEEDED&lt;/span> &lt;span class="n">loaddbvmifneeded&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_PREVIOUSOPCODE&lt;/span> &lt;span class="n">previousOpcode&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_NEXTOPCODE&lt;/span> &lt;span class="n">nextOpcode&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_DISASSEMBLEEX&lt;/span> &lt;span class="n">disassembleEx&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_LOADMODULE&lt;/span> &lt;span class="n">loadModule&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_AA_ADDCOMMAND&lt;/span> &lt;span class="n">aa_AddExtraCommand&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_AA_DELCOMMAND&lt;/span> &lt;span class="n">aa_RemoveExtraCommand&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CREATETABLEENTRY&lt;/span> &lt;span class="n">createTableEntry&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_GETTABLEENTRY&lt;/span> &lt;span class="n">getTableEntry&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_SETDESCRIPTION&lt;/span> &lt;span class="n">memrec_setDescription&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_GETDESCRIPTION&lt;/span> &lt;span class="n">memrec_getDescription&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_GETADDRESS&lt;/span> &lt;span class="n">memrec_getAddress&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_SETADDRESS&lt;/span> &lt;span class="n">memrec_setAddress&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_GETTYPE&lt;/span> &lt;span class="n">memrec_getType&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_SETTYPE&lt;/span> &lt;span class="n">memrec_setType&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_GETVALUETYPE&lt;/span> &lt;span class="n">memrec_getValue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_SETVALUETYPE&lt;/span> &lt;span class="n">memrec_setValue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_GETSCRIPT&lt;/span> &lt;span class="n">memrec_getScript&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_SETSCRIPT&lt;/span> &lt;span class="n">memrec_setScript&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_ISFROZEN&lt;/span> &lt;span class="n">memrec_isfrozen&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_FREEZE&lt;/span> &lt;span class="n">memrec_freeze&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_UNFREEZE&lt;/span> &lt;span class="n">memrec_unfreeze&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_SETCOLOR&lt;/span> &lt;span class="n">memrec_setColor&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_APPENDTOENTRY&lt;/span> &lt;span class="n">memrec_appendtoentry&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MEMREC_DELETE&lt;/span> &lt;span class="n">memrec_delete&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_GETPROCESSIDFROMPROCESSNAME&lt;/span> &lt;span class="n">getProcessIDFromProcessName&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_OPENPROCESS&lt;/span> &lt;span class="n">openProcessEx&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_DEBUGPROCESS&lt;/span> &lt;span class="n">debugProcessEx&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_PAUSE&lt;/span> &lt;span class="n">pause&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_UNPAUSE&lt;/span> &lt;span class="n">unpause&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_DEBUG_SETBREAKPOINT&lt;/span> &lt;span class="n">debug_setBreakpoint&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_DEBUG_REMOVEBREAKPOINT&lt;/span> &lt;span class="n">debug_removeBreakpoint&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_DEBUG_CONTINUEFROMBREAKPOINT&lt;/span> &lt;span class="n">debug_continueFromBreakpoint&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CLOSECE&lt;/span> &lt;span class="n">closeCE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_HIDEALLCEWINDOWS&lt;/span> &lt;span class="n">hideAllCEWindows&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_UNHIDEMAINCEWINDOW&lt;/span> &lt;span class="n">unhideMainCEwindow&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CREATEFORM&lt;/span> &lt;span class="n">createForm&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_FORM_CENTERSCREEN&lt;/span> &lt;span class="n">form_centerScreen&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_FORM_HIDE&lt;/span> &lt;span class="n">form_hide&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_FORM_SHOW&lt;/span> &lt;span class="n">form_show&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_FORM_ONCLOSE&lt;/span> &lt;span class="n">form_onClose&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CREATEPANEL&lt;/span> &lt;span class="n">createPanel&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CREATEGROUPBOX&lt;/span> &lt;span class="n">createGroupBox&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CREATEBUTTON&lt;/span> &lt;span class="n">createButton&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CREATEIMAGE&lt;/span> &lt;span class="n">createImage&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_IMAGE_LOADIMAGEFROMFILE&lt;/span> &lt;span class="n">image_loadImageFromFile&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_IMAGE_TRANSPARENT&lt;/span> &lt;span class="n">image_transparent&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_IMAGE_STRETCH&lt;/span> &lt;span class="n">image_stretch&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CREATELABEL&lt;/span> &lt;span class="n">createLabel&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CREATEEDIT&lt;/span> &lt;span class="n">createEdit&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CREATEMEMO&lt;/span> &lt;span class="n">createMemo&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CREATETIMER&lt;/span> &lt;span class="n">createTimer&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_TIMER_SETINTERVAL&lt;/span> &lt;span class="n">timer_setInterval&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_TIMER_ONTIMER&lt;/span> &lt;span class="n">timer_onTimer&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CONTROL_SETCAPTION&lt;/span> &lt;span class="n">control_setCaption&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CONTROL_GETCAPTION&lt;/span> &lt;span class="n">control_getCaption&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CONTROL_SETPOSITION&lt;/span> &lt;span class="n">control_setPosition&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CONTROL_GETX&lt;/span> &lt;span class="n">control_getX&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CONTROL_GETY&lt;/span> &lt;span class="n">control_getY&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CONTROL_SETSIZE&lt;/span> &lt;span class="n">control_setSize&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CONTROL_GETWIDTH&lt;/span> &lt;span class="n">control_getWidth&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CONTROL_GETHEIGHT&lt;/span> &lt;span class="n">control_getHeight&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CONTROL_SETALIGN&lt;/span> &lt;span class="n">control_setAlign&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_CONTROL_ONCLICK&lt;/span> &lt;span class="n">control_onClick&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_OBJECT_DESTROY&lt;/span> &lt;span class="n">object_destroy&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_MESSAGEDIALOG&lt;/span> &lt;span class="n">messageDialog&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">  &lt;/span>&lt;span class="n">CEP_SPEEDHACK_SETSPEED&lt;/span> &lt;span class="n">speedhack_setSpeed&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">ExportedFunctions&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">PExportedFunctions&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个函数的成员太多了，具体的可以自己去看参考文档QAQ&lt;/p>
&lt;h4 id="导出函数具体分析">导出函数具体分析&lt;/h4>
&lt;h5 id="ceplugin_getversion">CEPlugin_GetVersion&lt;/h5>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">BOOL&lt;/span> &lt;span class="n">__stdcall&lt;/span> &lt;span class="n">CEPlugin_GetVersion&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">PPluginVersion&lt;/span> &lt;span class="n">pv&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">int&lt;/span> &lt;span class="n">sizeofpluginversion&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">pv&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">CESDK_VERSION&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="err">这里的&lt;/span>&lt;span class="n">CESDK_VERSION&lt;/span>&lt;span class="err">为常量&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="err">，可以自行修改&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">pv&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">pluginname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;C Example v1.3 (SDK version 4: 6.0+)&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">像这样的精确字符串是指向&lt;/span>&lt;span class="n">dll&lt;/span>&lt;span class="err">中的字符串的指针，因此是可行的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="kr">return&lt;/span> &lt;span class="n">TRUE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="ceplugin_disableplugin">CEPlugin_DisablePlugin&lt;/h5>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">BOOL&lt;/span> &lt;span class="n">__stdcall&lt;/span> &lt;span class="n">CEPlugin_DisablePlugin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">void&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="err">调用&lt;/span>&lt;span class="n">MessageBoxA&lt;/span>&lt;span class="err">方法弹窗，表示当前插件已关闭&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">MessageBoxA&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;disabled plugin&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;Example C plugin&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">MB_OK&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="kr">return&lt;/span> &lt;span class="n">TRUE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="ceplugin_initializeplugin">CEPlugin_InitializePlugin&lt;/h5>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">BOOL&lt;/span> &lt;span class="n">__stdcall&lt;/span> &lt;span class="n">CEPlugin_InitializePlugin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">PExportedFunctions&lt;/span> &lt;span class="n">ef&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">int&lt;/span> &lt;span class="n">pluginid&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">中间省略的部分为在&lt;/span>&lt;span class="n">CE&lt;/span>&lt;span class="err">的窗口中添加自己的菜单等界面的功能，暂时没有用到，有兴趣的可以自己研究&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="p">....&lt;/span>&lt;span class="err">省略&lt;/span>&lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">selfid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">pluginid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="p">....&lt;/span>&lt;span class="err">省略&lt;/span>&lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">lua_State&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">lua_state&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ef&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">GetLuaState&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="err">这里的&lt;/span>&lt;span class="n">lua_state&lt;/span>&lt;span class="err">固定写成这样就好&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">注册&lt;/span>&lt;span class="n">lua&lt;/span>&lt;span class="err">的调用事件，这个是&lt;/span>&lt;span class="n">lua&lt;/span>&lt;span class="err">提供的函数 &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">这里的&lt;/span>&lt;span class="n">lua_pluginExample&lt;/span>&lt;span class="err">是我们按照&lt;/span>&lt;span class="n">LUA&lt;/span>&lt;span class="err">规范定义的&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="err">语言函数，提供给&lt;/span>&lt;span class="n">LUA&lt;/span>&lt;span class="err">调用&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">下面会具体讲解&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">lua_register&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lua_state&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;pluginExample&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lua_pluginExample&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">Exported.ShowMessage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;The &lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">Example C&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2"> plugin got enabled&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="kr">return&lt;/span> &lt;span class="n">TRUE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>关于lua的函数可以参考&lt;a class="link" href="https://www.runoob.com/manual/lua53doc/contents.html#index" target="_blank" rel="noopener"
>Lua 函数索引&lt;/a>，这里只讲解用到的&lt;/p>
&lt;h6 id="lua_register">lua_register&lt;/h6>
&lt;p>参考&lt;a class="link" href="https://www.runoob.com/manual/lua53doc/manual.html#lua_register" target="_blank" rel="noopener"
>lua_register&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">void&lt;/span> &lt;span class="n">lua_register&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">lua_State&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">const&lt;/span> &lt;span class="n">char&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lua_CFunction&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>把 C 函数 &lt;code>f&lt;/code> 设到全局变量 &lt;code>name&lt;/code> 中。 它通过一个宏定义：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">   #&lt;/span>&lt;span class="n">define&lt;/span> &lt;span class="nf">lua_register&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">)&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">lua_pushcfunction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nf">lua_setglobal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这里可以知道其实lua_register其实是在调用lua_pushcfunction和lua_setglobal&lt;/p>
&lt;h6 id="lua_pushcfunction">lua_pushcfunction&lt;/h6>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">void&lt;/span> &lt;span class="n">lua_pushcfunction&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">lua_State&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lua_CFunction&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参考&lt;a class="link" href="https://www.runoob.com/manual/lua53doc/manual.html#lua_pushcfunction" target="_blank" rel="noopener"
>lua_pushcfunction&lt;/a>&lt;/p>
&lt;p>将一个 C 函数压栈。 这个函数接收一个 C 函数指针， 并将一个类型为 &lt;code>function&lt;/code> 的 Lua 值压栈。 当这个栈顶的值被调用时，将触发对应的 C 函数。&lt;/p>
&lt;p>注册到 Lua 中的任何函数都必须遵循正确的协议来接收参数和返回值 （参见 &lt;a class="link" href="https://www.runoob.com/manual/lua53doc/manual.html#lua_CFunction" target="_blank" rel="noopener"
>&lt;code>lua_CFunction&lt;/code>&lt;/a> ）&lt;/p>
&lt;h6 id="lua_cfunction">lua_CFunction&lt;/h6>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">typedef&lt;/span> &lt;span class="n">int&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">lua_CFunction&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">lua_State&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>定义了要在LUA中调用的C函数的格式,下面看看example-c中的范例&lt;/p>
&lt;h6 id="lua_pluginexample">lua_pluginExample&lt;/h6>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">int&lt;/span> &lt;span class="n">lua_pluginExample&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lua_State&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="n">make&lt;/span> &lt;span class="n">sure&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">cdecl&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   确保采用默认的&lt;/span>&lt;span class="n">cdecl&lt;/span>&lt;span class="err">调用协定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">Exported.ShowMessage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Called from lua&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">CE&lt;/span>&lt;span class="err">中输出消息&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">lua_pushinteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="err">将&lt;/span>&lt;span class="mi">123&lt;/span>&lt;span class="err">作为返回值压入到堆栈中&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="kr">return&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="err">返回&lt;/span> &lt;span class="err">返回值的个数，这里只有一个返回值&lt;/span>&lt;span class="mi">123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>C 函数只需要把它们以正序压到堆栈上（第一个返回值最先压入）， 然后返回这些返回值的个数&lt;/p>
&lt;p>&lt;strong>Lua和C/C++语言通信的主要方法是一个无处不在的虚拟栈&lt;/strong>&lt;/p>
&lt;h6 id="lua_setglobal">lua_setglobal&lt;/h6>
&lt;p>参考&lt;a class="link" href="https://www.runoob.com/manual/lua53doc/manual.html#lua_setglobal" target="_blank" rel="noopener"
>lua_setglobal&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">void&lt;/span> &lt;span class="n">lua_setglobal&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">lua_State&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">const&lt;/span> &lt;span class="n">char&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>从堆栈上弹出一个值，并将其设为全局变量 &lt;code>name&lt;/code> 的新值&lt;/p>
&lt;hr>
&lt;p>综上分析我们可以得知&lt;strong>lua_register的信息&lt;/strong>：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>参数类型&lt;/th>
&lt;th>含义&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>L&lt;/td>
&lt;td>lua_State*&lt;/td>
&lt;td>指向lua_State的指针，这里我们固定赋值为ef-&amp;gt;GetLuaState()即可&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>const char *&lt;/td>
&lt;td>在lua中要调用时的函数名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>f&lt;/td>
&lt;td>lua_CFunction&lt;/td>
&lt;td>遵循正确的lua协议的C函数&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>返回值&lt;/th>
&lt;th>返回值类型&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>num&lt;/td>
&lt;td>int&lt;/td>
&lt;td>返回前面压入到堆栈中的个数&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h4 id="在ce-lua中调用插件提供的函数">在CE LUA中调用插件提供的函数&lt;/h4>
&lt;p>上面给大家讲解了我们插件的源码以及插件中提供的LUA的接口，接下来演示在CE的LUA中调用函数&lt;/p>
&lt;p>首先确保加载了example-c插件&lt;/p>
&lt;p>可以看到后面的此时插件显示的面板为CEPlugin_GetVersion中我们设置的内容&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211131605923.webp"
width="1391"
height="564"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211131605923_hue76f0cabd6d76d57dabf326185c8d825_36008_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211131605923_hue76f0cabd6d76d57dabf326185c8d825_36008_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211131605923"
class="gallery-image"
data-flex-grow="246"
data-flex-basis="591px"
>&lt;/p>
&lt;p>然后打开LUA窗口：表单→显示CT表的Lua脚本&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211132001336.webp"
width="511"
height="449"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211132001336_hudd6497ca570b0b704b0a48dcfe15fff4_7098_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211132001336_hudd6497ca570b0b704b0a48dcfe15fff4_7098_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211132001336"
class="gallery-image"
data-flex-grow="113"
data-flex-basis="273px"
>&lt;/p>
&lt;p>我们输入lua命令来调用CEPlugin_InitializePlugin中通过lua_register注册的函数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ret&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">pluginExample&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">--这里的pluginExample是在lua_register中注册的第二个参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span>&lt;span class="c1">--这里的返回值是lua_pushinteger得来的&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行以后可以看到:&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211132140107.webp"
width="822"
height="251"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211132140107_hucb7700009c883f15352bd28bddf93bfe_6130_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211132140107_hucb7700009c883f15352bd28bddf93bfe_6130_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211132140107"
class="gallery-image"
data-flex-grow="327"
data-flex-basis="785px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211132204487.webp"
width="492"
height="509"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211132204487_hufb1fd1fdb2f974d227ed8ec1ba9f83e3_7296_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211132204487_hufb1fd1fdb2f974d227ed8ec1ba9f83e3_7296_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211132204487"
class="gallery-image"
data-flex-grow="96"
data-flex-basis="231px"
>&lt;/p>
&lt;p>调用了我们在C中定义好的函数&lt;/p>
&lt;h2 id="开发自己的ce-plugin">开发自己的CE Plugin&lt;/h2>
&lt;p>前面分析完了CE自带的插件例子，我们开始着手自己写一个插件吧&lt;/p>
&lt;h3 id="创建项目">创建项目&lt;/h3>
&lt;p>打开VS2015        文件→新建→项目        （Ctrl+Shift+N）&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143036501.webp"
width="2162"
height="1498"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143036501_hu760f226976076294070175ba627091f5_90626_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143036501_hu760f226976076294070175ba627091f5_90626_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211143036501"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="346px"
>&lt;/p>
&lt;p>点击确定以后出现Win32 应用程序向导&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143115494.webp"
width="1555"
height="1276"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143115494_hu98b8cb16ed11bb56b1d07b5bfc622fc5_39022_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143115494_hu98b8cb16ed11bb56b1d07b5bfc622fc5_39022_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211143115494"
class="gallery-image"
data-flex-grow="121"
data-flex-basis="292px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143613774.webp"
width="1555"
height="1276"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143613774_hub28e5eced8075736b351c3f56f5d6657_42172_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143613774_hub28e5eced8075736b351c3f56f5d6657_42172_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211143613774"
class="gallery-image"
data-flex-grow="121"
data-flex-basis="292px"
>&lt;/p>
&lt;p>完成以后，一个空的DLL项目就出现了&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143847108.webp"
width="3840"
height="2084"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143847108_hudacd03a7ad911252b3e29fe31b1eeee0_117314_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143847108_hudacd03a7ad911252b3e29fe31b1eeee0_117314_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211143847108"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="442px"
>&lt;/p>
&lt;h3 id="设置项目属性">设置项目属性&lt;/h3>
&lt;p>我们点击源文件，右键 添加→新建项 （Ctrl+Shift+A）&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143927942.webp"
width="785"
height="318"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143927942_hudf1de09464110f4b703497c5361639bf_15090_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211143927942_hudf1de09464110f4b703497c5361639bf_15090_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211143927942"
class="gallery-image"
data-flex-grow="246"
data-flex-basis="592px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144042090.webp"
width="2125"
height="1473"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144042090_hu0ba01a1f4a3954543ab413ab82088a7d_62348_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144042090_hu0ba01a1f4a3954543ab413ab82088a7d_62348_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211144042090"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="346px"
>&lt;/p>
&lt;p>创建出一个空的main.cpp以后，我们设置一下项目的属性：项目→属性&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144146837.webp"
width="1703"
height="124"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144146837_hua70f3110903c1eeaad7a37959feb5b29_17550_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144146837_hua70f3110903c1eeaad7a37959feb5b29_17550_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211144146837"
class="gallery-image"
data-flex-grow="1373"
data-flex-basis="3296px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144218992.webp"
width="1950"
height="1235"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144218992_hu5c8df2017a8173f829a033227f37c971_117214_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144218992_hu5c8df2017a8173f829a033227f37c971_117214_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211144218992"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;p>确保配置为Release 平台为所有平台&lt;/p>
&lt;p>然后打开配置管理器，同样修改配置和平台&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144313016.webp"
width="1404"
height="916"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144313016_hu747b22bddde47d1b92253a50d8d2351d_28010_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211144313016_hu747b22bddde47d1b92253a50d8d2351d_28010_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211144313016"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="367px"
>&lt;/p>
&lt;h3 id="导入ce相关文件">导入CE相关文件&lt;/h3>
&lt;p>接下来别忘了导入CE提供的 .lib文件以及.h头文件&lt;/p>
&lt;p>将cheat-engine-7.2\Cheat Engine\plugin下的以下文件复制到我们项目的目录下&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211150935139.webp"
width="1654"
height="911"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211150935139_hua1c476028dffbe4beea945e053a7ed26_77854_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211150935139_hua1c476028dffbe4beea945e053a7ed26_77854_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211150935139"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="435px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151032944.webp"
width="1757"
height="702"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151032944_hu413274ea6be1b01f1388d352f20eb7aa_79908_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151032944_hu413274ea6be1b01f1388d352f20eb7aa_79908_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211151032944"
class="gallery-image"
data-flex-grow="250"
data-flex-basis="600px"
>&lt;/p>
&lt;p>然后回到VS2015,选中项目 右键 添加→现有项&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151150372.webp"
width="796"
height="534"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151150372_hua6f39e433fca2b7e39bffe368e7eb7cb_28118_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151150372_hua6f39e433fca2b7e39bffe368e7eb7cb_28118_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211151150372"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="357px"
>&lt;/p>
&lt;p>将我们之前复制的文件全部添加进来&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151229766.webp"
width="1461"
height="1158"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151229766_hue5c2494a96eb2464d8430b94c472ce54_89366_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151229766_hue5c2494a96eb2464d8430b94c472ce54_89366_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211151229766"
class="gallery-image"
data-flex-grow="126"
data-flex-basis="302px"
>&lt;/p>
&lt;p>此时.h头文件已经添加进来可以使用了，但静态库.lib文件还需要添加一下引用&lt;/p>
&lt;p>项目→属性→链接器→输入→附加依赖项→编辑&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151637978.webp"
width="2245"
height="1235"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151637978_hue7eb2bf8c9639003014e80da458fc9cc_89544_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151637978_hue7eb2bf8c9639003014e80da458fc9cc_89544_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211151637978"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="436px"
>&lt;/p>
&lt;p>然后将lua53-32.lib和lua53-64.lib添加进来&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151718726.webp"
width="895"
height="819"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151718726_hu5d900141ba6249b6d50e20a13e2234db_31364_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151718726_hu5d900141ba6249b6d50e20a13e2234db_31364_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211151718726"
class="gallery-image"
data-flex-grow="109"
data-flex-basis="262px"
>&lt;/p>
&lt;p>添加完成后显示为&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151801331.webp"
width="1740"
height="55"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151801331_hu7232c4dd192d0d70176745b9315137a8_10462_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211151801331_hu7232c4dd192d0d70176745b9315137a8_10462_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211151801331"
class="gallery-image"
data-flex-grow="3163"
data-flex-basis="7592px"
>&lt;/p>
&lt;p>PS：也可以在代码的开头添加下列代码来引入静态库文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#pragma comment(lib,&amp;#34;lua53-32.lib&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#pragma comment(lib,&amp;#34;lua53-64.lib&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="添加dll入口函数">添加DLL入口函数&lt;/h3>
&lt;p>这个是DLL函数必须的入口函数，可以从example-c那里拷贝过来，开发DLL的基础~~~&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="n">BOOL&lt;/span> &lt;span class="n">APIENTRY&lt;/span> &lt;span class="nf">DllMain&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">HANDLE&lt;/span> &lt;span class="n">hModule&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">DWORD&lt;/span>&lt;span class="err">  &lt;/span>&lt;span class="n">ul_reason_for_call&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">LPVOID&lt;/span> &lt;span class="n">lpReserved&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">switch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ul_reason_for_call&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="nl">DLL_PROCESS_ATTACH&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">//MessageBox(0,&amp;#34;This plugin dll got loaded (This message comes from the dll)&amp;#34;,&amp;#34;C Plugin Example&amp;#34;,MB_OK);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="nl">DLL_THREAD_ATTACH&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="nl">DLL_THREAD_DETACH&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="nl">DLL_PROCESS_DETACH&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="n">TRUE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="添加del导出配置">添加.del导出配置&lt;/h3>
&lt;p>在源文件这里 右键 新建→新建项&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211152717446.webp"
width="795"
height="653"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211152717446_hu73a4b9915c83cc22bea4b5b7a7486233_27532_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211152717446_hu73a4b9915c83cc22bea4b5b7a7486233_27532_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211152717446"
class="gallery-image"
data-flex-grow="121"
data-flex-basis="292px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211152659630.webp"
width="2125"
height="1473"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211152659630_hu7d46b816b1f0722a58a22b05c1cf2ba8_58090_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211152659630_hu7d46b816b1f0722a58a22b05c1cf2ba8_58090_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211152659630"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="346px"
>&lt;/p>
&lt;p>在.def文件中写如以下内容&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="n">LIBRARY&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">MyPlugin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPORTS&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">CEPlugin_GetVersion&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   @&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">CEPlugin_InitializePlugin&lt;/span> &lt;span class="err">@&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="n">CEPlugin_DisablePlugin&lt;/span> &lt;span class="err">@&lt;/span>&lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>表明以上三个函数为要的导出函数，原因之前已经说过是CE规范要求的&lt;/p>
&lt;h3 id="编写自己的功能">编写自己的功能&lt;/h3>
&lt;p>接着就在我们的程序中分别添加这三个函数即可&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;windows.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;#34;cepluginsdk.h&amp;#34;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">//导入静态库
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="cp">#pragma comment(lib,&amp;#34;lua53-32.lib&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#pragma comment(lib,&amp;#34;lua53-64.lib&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//插件的id
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">selfid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//CE 提供的导出功能
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">ExportedFunctions&lt;/span> &lt;span class="n">Exported&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//入口函数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">BOOL&lt;/span> &lt;span class="n">APIENTRY&lt;/span> &lt;span class="nf">DllMain&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">HANDLE&lt;/span> &lt;span class="n">hModule&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">DWORD&lt;/span>&lt;span class="err">  &lt;/span>&lt;span class="n">ul_reason_for_call&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">LPVOID&lt;/span> &lt;span class="n">lpReserved&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">switch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ul_reason_for_call&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="nl">DLL_PROCESS_ATTACH&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">//MessageBox(0,&amp;#34;This plugin dll got loaded (This message comes from the dll)&amp;#34;,&amp;#34;C Plugin Example&amp;#34;,MB_OK);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="nl">DLL_THREAD_ATTACH&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="nl">DLL_THREAD_DETACH&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="nl">DLL_PROCESS_DETACH&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="n">TRUE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BOOL&lt;/span> &lt;span class="kr">__stdcall&lt;/span> &lt;span class="nf">CEPlugin_GetVersion&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">PPluginVersion&lt;/span> &lt;span class="n">pv&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">sizeofpluginversion&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">pv&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">CESDK_VERSION&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">//这里的CESDK_VERSION为常量6，可以自行修改
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">pv&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">pluginname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;MyPlugin&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//像这样的精确字符串是指向dll中的字符串的指针，因此是可行的
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="n">TRUE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//满足LUA规范的C函数，这里为调用WIN32的GetWindowRect函数并返回
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="kr">__cdecl&lt;/span> &lt;span class="nf">lua_GetWindowRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lua_State&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">//make sure this is cdecl
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">DWORD&lt;/span> &lt;span class="n">handle&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">luaL_checknumber&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">//Exported.ShowMessage(&amp;#34;Called from lua&amp;#34;);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">RECT&lt;/span> &lt;span class="n">rect&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="nf">ZeroMemory&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">rect&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">RECT&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="nf">GetWindowRect&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">HWND&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">handle&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">rect&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">//lua_pushinteger(L, handle);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="nf">lua_pushinteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">left&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="nf">lua_pushinteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="nf">lua_pushinteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">right&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="nf">lua_pushinteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bottom&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BOOL&lt;/span> &lt;span class="kr">__stdcall&lt;/span> &lt;span class="nf">CEPlugin_InitializePlugin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">PExportedFunctions&lt;/span> &lt;span class="n">ef&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">pluginid&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">selfid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pluginid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">//copy the EF list to Exported
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">Exported&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">ef&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//Exported is defined in the .h
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Exported&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">sizeofExportedFunctions&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Exported&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">FALSE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">lua_State&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">lua_state&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ef&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="nf">GetLuaState&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">//注册lua的调用事件，这个是lua提供的函数        
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err"> &lt;/span> &lt;span class="c1">//这里的lua_GetWindowRect是我们按照LUA规范定义的C语言函数，提供给LUA调用
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="nf">lua_register&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lua_state&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;GetWindowRect&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lua_GetWindowRect&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="n">Exported&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ShowMessage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;The &lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s">MyPlugin&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s"> plugin got enabled&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="n">TRUE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BOOL&lt;/span> &lt;span class="kr">__stdcall&lt;/span> &lt;span class="nf">CEPlugin_DisablePlugin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="c1">//clean up memory you might have allocated
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="nf">MessageBoxA&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;disabled plugin&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;MyPlugin&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">MB_OK&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err"> &lt;/span> &lt;span class="err">  &lt;/span> &lt;span class="err">   &lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="n">TRUE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="测试自己的功能">测试自己的功能&lt;/h3>
&lt;p>然后我们Ctrl+Shift+B编译我们的插件&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153852967.webp"
width="2978"
height="336"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153852967_hu19334dcc6aa7c345d939f3f949499006_39226_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153852967_hu19334dcc6aa7c345d939f3f949499006_39226_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211153852967"
class="gallery-image"
data-flex-grow="886"
data-flex-basis="2127px"
>&lt;/p>
&lt;p>将生成好的插件用CE加载&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153810924.webp"
width="1563"
height="462"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153810924_hu57a9d8e69d7a2d97779a62eabc2873b8_44148_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153810924_hu57a9d8e69d7a2d97779a62eabc2873b8_44148_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211153810924"
class="gallery-image"
data-flex-grow="338"
data-flex-basis="811px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153933659.webp"
width="1389"
height="888"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153933659_hu9194caf96acc9531bc8aec87324c7f81_38810_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153933659_hu9194caf96acc9531bc8aec87324c7f81_38810_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211153933659"
class="gallery-image"
data-flex-grow="156"
data-flex-basis="375px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153954199.webp"
width="1391"
height="564"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153954199_hu1793c7d4b6cbfa1ec454c46ff9548b21_32606_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211153954199_hu1793c7d4b6cbfa1ec454c46ff9548b21_32606_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211153954199"
class="gallery-image"
data-flex-grow="246"
data-flex-basis="591px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154015117.webp"
width="822"
height="251"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154015117_hu9534e04e719ed09ab16a2d094851379b_7926_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154015117_hu9534e04e719ed09ab16a2d094851379b_7926_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211154015117"
class="gallery-image"
data-flex-grow="327"
data-flex-basis="785px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154201166.webp"
width="847"
height="449"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154201166_hu9d54cf28bf3fe5bcb0f26ab096060672_20454_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154201166_hu9d54cf28bf3fe5bcb0f26ab096060672_20454_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211154201166"
class="gallery-image"
data-flex-grow="188"
data-flex-basis="452px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154207493.webp"
width="533"
height="836"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154207493_hue418542a05668a31fa30a3152ea49002_8342_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154207493_hue418542a05668a31fa30a3152ea49002_8342_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211154207493"
class="gallery-image"
data-flex-grow="63"
data-flex-basis="153px"
>&lt;/p>
&lt;p>&lt;strong>测试完毕&lt;/strong>！！！我们的函数可以正常调用，否则原本会显示&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154352286.webp"
width="822"
height="266"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154352286_hub02c0ce587df1fa9660f1086b75ef214_6984_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154352286_hub02c0ce587df1fa9660f1086b75ef214_6984_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211154352286"
class="gallery-image"
data-flex-grow="309"
data-flex-basis="741px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154412069.webp"
width="533"
height="836"
srcset="https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154412069_hu3c39804bd3bd8ade292012d95cd61523_21010_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/ce%E8%87%AA%E5%86%99%E6%8F%92%E4%BB%B6-lua%E6%8E%A5%E5%8F%A3-pvz-%E5%83%B5%E5%B0%B8%E7%BB%98%E5%88%B6/image-20210211154412069_hu3c39804bd3bd8ade292012d95cd61523_21010_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="image-20210211154412069"
class="gallery-image"
data-flex-grow="63"
data-flex-basis="153px"
>&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>总算是把这个教程给更新完了，CE的插件功能可以让我们用C来实现很多强大的功能，我只是简单地带大家了解了一下有关CE的插件开发流程，还可以增加很多有用复杂的功能，我这里限于篇幅也不展开了。底下会&lt;strong>附上我开发的插件的源码和插件&lt;/strong>&lt;/p>
&lt;p>最后，希望大家能一起变强，相互交流，相互进步，我也只是个&lt;strong>勉强入门的萌新&lt;/strong>，能力不足，水平有限，希望大家多多支持和鼓励一下。以上~~~~期待我们的下次再会&lt;/p>
&lt;p>下载链接：&lt;a class="link" href="MyPlugin.zip?versionId=CAEQHhiBgICetbLAvBciIDZkZWM2ZTA3NGZmZjRhZTE5ZTZiNWNhYzZlODQ0Mjhh" >MyPlugin&lt;/a>&lt;/p>
&lt;p>源码太大了，只能用自己的阿里云OSS了 QAQ&lt;/p>
&lt;p>PS：本插件和上篇教程的插件是同一个插件，改了个名字而已&lt;/p></description></item><item><title>b站关注批量删除</title><link>https://blog.xpdbk.com/post/bz-gzqc/</link><pubDate>Sun, 09 Apr 2023 00:00:00 +0700</pubDate><guid>https://blog.xpdbk.com/post/bz-gzqc/</guid><description>&lt;h2 id="快速取消b站哔哩哔哩关注的up">快速取消B站（哔哩哔哩）关注的UP？&lt;/h2>
&lt;p>当你&lt;strong>互粉&lt;/strong>之后你就会发现一堆没有用的视频就出来了（我没互粉）或者你在注册新号的时候不小心关注了一堆UP&lt;/p>
&lt;p>然后你发现B站没有批量取消关注功能，只能一个一个（恼）的点击。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">ms&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">300&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 暂停300毫秒
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">ii&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">xx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;.be-dropdown-item:contains(&amp;#39;取消关注&amp;#39;)&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;本页关注了&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">xx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;个UP！&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">tt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">setInterval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="nx">ii&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">ii&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">xx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">ii&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// 自动点击｛取消关注｝
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">clearInterval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tt&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 停止操作
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;OK！本页没UP了！&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ii&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="nx">ms&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">ii&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 暂停多少毫秒，再执行下一次点击，时间间隔增加变化
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以&lt;strong>Chrome&lt;/strong>浏览器为例&lt;/p>
&lt;p>按&lt;strong>F12&lt;/strong>&lt;/p>
&lt;p>进入&lt;strong>Console&lt;/strong>界面&lt;/p>
&lt;p>粘贴以上代码&lt;/p>
&lt;p>&lt;code>Enter&lt;/code>&lt;/p>
&lt;p>即可批量快速取消关注本页20所有up主&lt;/p>
&lt;p>&lt;strong>F5&lt;/strong>或&lt;strong>Ctrl+R&lt;/strong>刷新一下页面，再执行一遍，就可以快速把所有up主都果断取关了。&lt;/p></description></item><item><title>使用linux进行24小时直播</title><link>https://blog.xpdbk.com/post/zhibo-24h/</link><pubDate>Sat, 25 Mar 2023 00:00:00 +0700</pubDate><guid>https://blog.xpdbk.com/post/zhibo-24h/</guid><description>&lt;blockquote>
&lt;p>本文章的方法，禁止用来滥用。&lt;/p>
&lt;p>使用之前请看视频网站TOS，禁止违反视频网站纪律。&lt;/p>
&lt;/blockquote>
&lt;h2 id="使用linux进行24小时直播">使用Linux进行24小时直播&lt;/h2>
&lt;blockquote>
&lt;p>材料：&lt;/p>
&lt;p>一台手机和一个不限流量的网络&lt;/p>
&lt;p>有问题请去评论区提问&lt;/p>
&lt;/blockquote>
&lt;h2 id="安装-ubuntu必须">安装 Ubuntu（必须）&lt;/h2>
&lt;h3 id="手机24h直播">手机24H直播&lt;/h3>
&lt;p>省电和安静相比于云服务器成本更低&lt;/p>
&lt;h3 id="linuxdeploy需要root权限">LinuxDeploy（需要Root权限）&lt;/h3>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/zhibo-24h/awa.webp"
width="1280"
height="960"
srcset="https://blog.xpdbk.com/post/zhibo-24h/awa_hu220ae6b7c1f01da558f818f9f531184c_271550_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/zhibo-24h/awa_hu220ae6b7c1f01da558f818f9f531184c_271550_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="风景"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>&lt;strong>linux deploy&lt;/strong>搭建环境时，从网上查阅了很多资料，感觉手机充当linux服务器时，性能差强人意。（但是直播足够了）&lt;/p>
&lt;p>如果是linux的初学者，用手机来充当服务器学习，是一个不错的选择（遇到问题，然后去解决）。
市面上可以被root的手机很少（如果你的手机是一加和小米你可以root试试）&lt;/p>
&lt;h4 id="可root的手机">可root的手机&lt;/h4>
&lt;p>小米红米全机型：
小米红米手机一直支持官方解锁BL（一般7天解锁），通过解锁BL后就可以刷机玩机获取
&lt;strong>root&lt;/strong>操作等，小米的解锁BL也是最神奇的，支持微信支付宝指纹支付，堪称完美。&lt;/p>
&lt;p>三星/一加/Realme/联想/华硕ROG机型
此5大机型也一样支持官方解锁BL，一般官方都提供了解锁方法，解锁时间最快，不需要
等待。有些是解锁命令解锁，有些是官方解锁工具解锁。通过解锁BL后一样支持玩机刷机
操作，但以上机型解锁BL后系统均不再支持微信指纹支付，必须依赖面具指纹模块，或者
上锁BL&lt;/p>
&lt;p>努比亚红魔/魅族/黑鲨/LG机型
以上5个机型并不支持官方解锁BL，自然解锁BL刷机全靠开发者实现。庆幸的是以上机型
基本都可以飞官方解锁BL刷机操作，然后获取完美root等等。非官方解锁BL可能会使得手
机失去保修功能，希望保修的小伙伴，需要在保修之前刷回官方系统，再回锁BL&lt;/p>
&lt;p>OPPO能深度测试机型
OPPO机型目前能root的并不多，都需要通过官方 &lt;strong>深度测试&lt;/strong>，官方未开放深度测试的机型目前并没有任何解锁刷机root方法，已知只有这些机型可申请测试，并且申请时间为每月的1号或者15号，需要解锁root的用户请及时申请，解锁BL会导致数据清空，请备份数据再刷
机。指纹支付也会一起失效，同一加机型&lt;/p>
&lt;p>支持Find X/R17 Pro/Reno/Reno Ace/Find X2系列/Ace2/Reno3系列/R17全网通/K1/K3
/K5/R15x正式版/Reno4、Reno4 Pro、Reno4 SE 5G/Reno5 Pro+、Reno5 Pro、Reno5&lt;/p>
&lt;blockquote>
&lt;p>root不规范变砖两行泪&lt;/p>
&lt;/blockquote>
&lt;p>使用时需要注意的问题与总结：&lt;/p>
&lt;ul>
&lt;li>&lt;del>在Linux Deploy设置中，Path里需要将BusyBox安装路径设置（默认/system/xbin）&lt;/del> &lt;strong>BusyBox&lt;/strong>装了就开不了鸡了&lt;/li>
&lt;li>启用允许挂载Android上的资源时，挂载点名称要注意，文档里名称，与自己手机使用的名称不一致（可通过文件管理工具查看）&lt;/li>
&lt;li>下载网速是硬伤，安装系统时连接的国外服务器，有可能下载超时&lt;/li>
&lt;li>不要从应用商店等下载apk，直接到github上，下载最新apk&lt;/li>
&lt;/ul>
&lt;p>以上问题，都可能造成ssh等服务启动失败，不能正常使用。&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/zhibo-24h/FEWF4.webp"
width="1500"
height="504"
srcset="https://blog.xpdbk.com/post/zhibo-24h/FEWF4_hu643da3caccb972df7b06a1f911bb3443_31180_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/zhibo-24h/FEWF4_hu643da3caccb972df7b06a1f911bb3443_31180_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="挂载SD卡"
class="gallery-image"
data-flex-grow="297"
data-flex-basis="714px"
>&lt;/p>
&lt;p>SD卡挂载示例&lt;/p>
&lt;hr>
&lt;h4 id="使用环境">使用环境&lt;/h4>
&lt;p>下载 Xshell&lt;/p>
&lt;p>已ROOT手机一台&lt;/p>
&lt;p>一台电脑&lt;/p>
&lt;p>使用ssh访问linux deploy&lt;/p>
&lt;hr>
&lt;h4 id="前置服务器安装说明">前置服务器安装说明&lt;/h4>
&lt;h5 id="手机安装-busybox-app">手机安装 BusyBox app&lt;/h5>
&lt;p>&lt;a class="link" href="https://github.com/meefik/busybox/releases" target="_blank" rel="noopener"
>https://github.com/meefik/busybox/releases&lt;/a>&lt;/p>
&lt;p>&lt;del>应用界面，选择install(使用默认配置/system/xbin)&lt;/del> 请自己试试如果完蛋了就重新安装Linux Deploy&lt;/p>
&lt;h5 id="手机安装-linux-deploy">手机安装 linux deploy&lt;/h5>
&lt;p>&lt;a class="link" href="https://github.com/meefik/linuxdeploy/releases" target="_blank" rel="noopener"
>Releases · meefik/linuxdeploy · GitHub&lt;/a>&lt;/p>
&lt;h4 id="修改linux-deploy配置">修改linux deploy配置&lt;/h4>
&lt;p>linux deploy界面，选择左上角图标-配置：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>属性&lt;/th>
&lt;th>配置&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>屏幕常亮&lt;/td>
&lt;td>选中&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>锁定Wi-Fi&lt;/td>
&lt;td>选中&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CPU唤醒&lt;/td>
&lt;td>选中&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PATH变量&lt;/td>
&lt;td>与BusyBox中配置一致 /system/xbin&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>修改后选择“更新环境”，保存配置。&lt;/p>
&lt;h4 id="修改linux安装属性">修改linux安装属性&lt;/h4>
&lt;p>linux deploy界面，选择右下角图标：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>属性&lt;/th>
&lt;th>配置&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>发行版本 GNU/Linux&lt;/td>
&lt;td>Ubuntu&lt;/td>
&lt;td>Ubuntu 安装最简单了&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>架构&lt;/td>
&lt;td>arm64&lt;/td>
&lt;td>可以通过linux deploy右上角图标-状态，查看手机cpu架构&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>发行版本呢&lt;/td>
&lt;td>默认&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>镜像大小&lt;/td>
&lt;td>4096&lt;/td>
&lt;td>最高支持4096MB&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>文件系统&lt;/td>
&lt;td>ext4&lt;/td>
&lt;td>保持默认&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>用户名&lt;/td>
&lt;td>root&lt;/td>
&lt;td>ssh登陆时使用&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>用户密码&lt;/td>
&lt;td>自己设置&lt;/td>
&lt;td>英文大小写和数字&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>本地化&lt;/td>
&lt;td>zh_CN.UTF-8&lt;/td>
&lt;td>中文包即可&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>启用 允许使用初始化系统&lt;/td>
&lt;td>不启用&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>启用允许挂载android上的资源&lt;/td>
&lt;td>选中&lt;/td>
&lt;td>自己按照上面的方法挂载&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>挂载点列表&lt;/td>
&lt;td>/mnt/sdcard:/mnt&lt;/td>
&lt;td>源名称：挂载点名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>注：不同手机名称不一样,可以通过MT文件查看工具查看&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>启用SSH服务器&lt;/td>
&lt;td>选中&lt;/td>
&lt;td>默认&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="安装ubuntu">安装Ubuntu&lt;/h4>
&lt;p>linux deploy右上角图标-安装&lt;/p>
&lt;h4 id="安装依赖项">安装依赖项&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt install ffmpeg screen
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>直接按&lt;code>Y&lt;/code>即可&lt;/p>
&lt;h2 id="termux不用root的通用方法">Termux（不用root的通用方法）&lt;/h2>
&lt;blockquote>
&lt;p>事先说明这种方法性能更弱&lt;/p>
&lt;/blockquote>
&lt;p>通过 Termux 和 Ubuntu 22 在 Android 上运行 FFmpeg。 但是它需要手动设置大量命令，小心不要跳过任何步骤。 注意，这可能需要10至20分钟的时间或更长的时间，取决于您的技术知识水平。 互联网速度和 CPU 速度。&lt;/p>
&lt;h3 id="安装">安装&lt;/h3>
&lt;h4 id="termux">Termux&lt;/h4>
&lt;blockquote>
&lt;p>警告&lt;/p>
&lt;p>&lt;strong>Termux 的Play 商店版本已经过时，不支持，不要使用，请使用 &lt;a class="link" href="https://github.com/termux/termux-app/releases/latest/" target="_blank" rel="noopener"
>Github one在新窗口打开&lt;/a>&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;p>转到 &lt;a class="link" href="https://github.com/termux/termux-app/releases/latest/" target="_blank" rel="noopener"
>Termux Github 最新版本在新窗口打开&lt;/a>, 下载 &lt;code>debug_universal.apk&lt;/code>, 解压缩它并运行它。&lt;/p>
&lt;blockquote>
&lt;p>提示&lt;/p>
&lt;p>&lt;strong>如果您的文件管理器不允许您运行 APK 文件， 安装并使用 &lt;code>MT文件管理器&lt;/code> 并允许它在接到请求时安装第三方应用程序。&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>重要警告&lt;/p>
&lt;p>&lt;strong>一旦您安装了 Termux，打开它，拉下安卓菜单以通知， 在 Termux 通知中，向下拖动直到您看到以下选项：&lt;code>Exit | Acquire wakelock&lt;/code>, 点击&lt;code>Acquire wakelock&lt;/code> 并允许Termux在询问时拥有电池优化排除权限。 如果您不这样做，您的性能将会变得更差，Termux 可能会在后台运行时被 Android 杀死！&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;h4 id="安装-ubuntu-2204">安装 Ubuntu 22.04&lt;/h4>
&lt;p>用于安装 Ubuntu 22。 在 Termux 中，您需要 &lt;code>wget&lt;/code> and &lt;code>proot&lt;/code>中, 我们将在下一步安装它们。&lt;/p>
&lt;p>一旦您安装 Termux 后打开并运行以下命令（按顺序排列）：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>pkg update&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>pkg upgrade&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>pkg install proot wget&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>提示&lt;/p>
&lt;p>&lt;strong>如果你被要求在更新/升级命令过程中按Y/N 键，只需输入 Y 并按Enter&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;p>然后您需要使用以下命令下载安装脚本：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://raw.githubusercontent.com/MFDGaming/ubuntu-in-termux/master/ubuntu.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在脚本下载完毕时运行它：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">bash ubuntu.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后您将被问到一个问题，输入 &lt;code>Y&lt;/code> 并按 &lt;code>Enter&lt;/code>。&lt;/p>
&lt;p>安装完成后，您可以使用 Ubuntu 启动：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">./startubuntu.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="安装依赖">安装依赖&lt;/h4>
&lt;p>首先，我们需要更新 APT 软件包管理器仓库并安装依赖项。&lt;/p>
&lt;p>要更新 APT 存储库，请运行以下命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">apt update -y &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> apt upgrade -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完成后，我们需要安装依赖项，命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt install ffmpeg screen
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="介绍-ffmpeg">介绍 FFmpeg&lt;/h2>
&lt;p>&lt;a class="link" href="https://ffmpeg.org/" target="_blank" rel="noopener"
>FFmpeg&lt;/a> 本身是一款非常强大的命令行实用程序，在 Linux 发行版、Windows 以及 macOS 等系统上均可运行，支持多种架构。FFmpeg 是用 C 语言和汇编语言编写的，性能强大，提供跨平台支持。&lt;/p>
&lt;h3 id="ffmpeg-安装">FFmpeg 安装&lt;/h3>
&lt;p>在 Ubuntu 等 Linux 发行版上， FFmpeg 的安装比较简单。打开终端，运行以下命令安装即可。&lt;/p>
&lt;h4 id="ubuntu-及与其相似的发行版">Ubuntu 及与其相似的发行版&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt install FFmpeg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>FFmpeg 安装完成后，可输入以下命令查看安装是否成功。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ffmpeg --version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blog.xpdbk.com/post/zhibo-24h/yee.webp"
width="1365"
height="767"
srcset="https://blog.xpdbk.com/post/zhibo-24h/yee_hu24ae815761c94d567c243390ee0fb84e_120996_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/zhibo-24h/yee_hu24ae815761c94d567c243390ee0fb84e_120996_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="测试安装情况"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="427px"
>&lt;/p>
&lt;h2 id="文件传输">文件传输&lt;/h2>
&lt;blockquote>
&lt;p>这关非常重要关乎你的直播是否能打开&lt;/p>
&lt;p>需要安装Xftp&lt;/p>
&lt;/blockquote>
&lt;p>然后你发现最右边有一个Xftp按钮 点一下它（必须要连接SSH之后才能用）&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/zhibo-24h/ffm.webp"
width="368"
height="83"
srcset="https://blog.xpdbk.com/post/zhibo-24h/ffm_hu1e5964b7bee829bb947ca408bab1b339_7314_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/zhibo-24h/ffm_hu1e5964b7bee829bb947ca408bab1b339_7314_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="演示文件传输"
class="gallery-image"
data-flex-grow="443"
data-flex-basis="1064px"
>&lt;/p>
&lt;p>&lt;strong>linuxdeploy&lt;/strong>路径是这样的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">/root
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>而&lt;strong>Termux&lt;/strong>需要安装SSHD才能用SFTP&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pkg install sshd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装之后运行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sshd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>设置密码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"> passwd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查询手机ip，以实际手机ip为准&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">ifconfig
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查询当前用户&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"> whoami
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>确认ssh服务的监听端口&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">netstat -ntlp | grep sshd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>默认SSH端口就是这台手机的&lt;code>8022&lt;/code>端口&lt;/p>
&lt;p>默认路径在这&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">/data/data/com.termux/files/home/ubuntu-fs/root
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="启动直播前的准备">启动直播前的准备&lt;/h2>
&lt;p>Youtube准备&lt;/p>
&lt;p>在Youtube直播不能直播有版权的东西（简单来说就是Youtube上面火的东西）&lt;/p>
&lt;p>例如我直播的内容是丁真所以也没事&lt;/p>
&lt;p>有能力的可以点开链接看雪豹直播doge&lt;/p>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=xwTnSvGj4iw" target="_blank" rel="noopener"
>I Got Smoke 丁真无限循环 24H*7Days - YouTube&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/zhibo-24h/tlyt.webp"
width="1365"
height="696"
srcset="https://blog.xpdbk.com/post/zhibo-24h/tlyt_huf2e322d0dbffd099c39a563829b7d909_32878_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/zhibo-24h/tlyt_huf2e322d0dbffd099c39a563829b7d909_32878_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="直播例子"
class="gallery-image"
data-flex-grow="196"
data-flex-basis="470px"
>&lt;/p>
&lt;p>Youtube直播对于你们来说太难了&lt;/p>
&lt;h3 id="bilibili直播">Bilibili直播&lt;/h3>
&lt;p>账号需要实名（满18岁）&lt;/p>
&lt;p>需要IP地址在中国大陆&lt;/p>
&lt;p>不在中国大陆的可以使用归雁加速器（自己搜）&lt;/p>
&lt;p>&lt;a class="link" href="https://live.bilibili.com/24595202" target="_blank" rel="noopener"
>https://live.bilibili.com/24595202&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/zhibo-24h/114514.webp"
width="1364"
height="695"
srcset="https://blog.xpdbk.com/post/zhibo-24h/114514_hubfcf48762608b87e66854326cb982dc1_82206_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/zhibo-24h/114514_hubfcf48762608b87e66854326cb982dc1_82206_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="bili直播"
class="gallery-image"
data-flex-grow="196"
data-flex-basis="471px"
>&lt;/p>
&lt;p>如果你具备了这些条件请继续往下看&lt;/p>
&lt;h2 id="直播脚本">直播脚本&lt;/h2>
&lt;blockquote>
&lt;p>请把以下的内容封装成 .sh格式 例如： &lt;code>535ir.sh&lt;/code>&lt;/p>
&lt;/blockquote>
&lt;p>创建一个文件夹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir zhibo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>进入文件夹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> zhibo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>添加脚本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">nano zhibo.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>没NANO就安装一下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">apt install nano
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="youtube直播脚本">Youtube直播脚本&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="k">while&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ffmpeg -re -i &lt;span class="s2">&amp;#34;视频.mp4&amp;#34;&lt;/span> -vcodec copy -acodec copy -f flv &lt;span class="s2">&amp;#34;服务器地址/直播码&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="bilibili直播脚本">Bilibili直播脚本&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="k">while&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ffmpeg -re -i &lt;span class="s2">&amp;#34;视频.mp4&amp;#34;&lt;/span> -vcodec copy -acodec copy -f flv &lt;span class="s2">&amp;#34;服务器地址/直播码&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="运行直播">运行直播&lt;/h2>
&lt;p>添加一个虚拟终端&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">screen -S 自定义名字
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">运行 ./脚本名.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>回到虚拟终端&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">screen -r 你刚才自定义的名字
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>从虚拟终端退出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">在 screen 终端 下 按下 Ctrl+a d键
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>踩坑的话请自行去Bing搜索搜索相关问题&lt;/p>
&lt;p>或者在评论区提问&lt;/p>
&lt;/blockquote></description></item><item><title>文件加壳方法（简单）</title><link>https://blog.xpdbk.com/post/7z-jiake/</link><pubDate>Sat, 04 Mar 2023 00:00:00 +0700</pubDate><guid>https://blog.xpdbk.com/post/7z-jiake/</guid><description>&lt;h2 id="文件加密方法简单">文件加密方法（简单）&lt;/h2>
&lt;h2 id="软件选择">软件选择&lt;/h2>
&lt;p>7z和Themida就足够了（为的就是简单！）&lt;/p>
&lt;blockquote>
&lt;p>俩软件下载页面 &lt;a class="link" href="https://drive.xpdbk.com/0:/EXE%E6%96%87%E4%BB%B6%E5%8A%A0%E5%A3%B3%E9%98%B2%E6%8B%86/" target="_blank" rel="noopener"
>https://drive.xpdbk.com/0:/EXE%E6%96%87%E4%BB%B6%E5%8A%A0%E5%A3%B3%E9%98%B2%E6%8B%86/&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>EXE文件直接打开解压就行了&lt;/p>
&lt;/blockquote></description></item><item><title>Android VMOS Pro(安卓虚拟机) v2.9.6 修改版</title><link>https://blog.xpdbk.com/post/vmosdl/</link><pubDate>Sun, 26 Feb 2023 15:14:47 +0700</pubDate><guid>https://blog.xpdbk.com/post/vmosdl/</guid><description>&lt;blockquote>
&lt;p>仅用来探讨技术和学习&lt;/p>
&lt;p>下载学习之后请24小时内删除&lt;/p>
&lt;/blockquote>
&lt;h2 id="android-vmos-pro安卓虚拟机-v296">Android VMOS Pro(安卓虚拟机) v2.9.6&lt;/h2>
&lt;p>VMOS Pro将为用户提供自定义&lt;code>ROM&lt;/code>的权限，将用户的想象力发挥到极致，自带&lt;code>root&lt;/code>环境，预装&lt;strong>Google Mobile Service&lt;/strong>。&lt;/p>
&lt;p>&lt;strong>VMOS专业版的特点&lt;/strong>：&lt;/p>
&lt;p>&lt;strong>安全防护&lt;/strong> 独立的虚拟手机系统，不受真机系统的限制，可以满足开发和测试的需要，不用担心病毒和系统崩溃的风险。&lt;/p>
&lt;p>&lt;strong>root 权限&lt;/strong> 自带root权限，预装XP框架和Google移动服务，满足极客手机发烧友的各种需求。&lt;/p>
&lt;p>&lt;strong>万物悬浮窗&lt;/strong> 支持任意应用浮动窗口，可用于多屏操作。&lt;/p>
&lt;p>&lt;strong>应用双开&lt;/strong> 游戏双开，应用双开，一边玩游戏，一边看直播，一边聊天，比云手机更流畅，工作生活两不误。&lt;/p>
&lt;p>&lt;strong>ROM平台&lt;/strong> ROM系统7.1和5.1版本，支持拥有多个虚拟机。&lt;/p>
&lt;p>&lt;strong>操作便捷&lt;/strong> 具有浮球功能，操作切换简单方便。&lt;/p>
&lt;p>&lt;strong>息屏挂机&lt;/strong> 支持修改分辨率，可息屏后台运行。&lt;/p>
&lt;p>&lt;strong>文件互传&lt;/strong> 文件中转站支持真机和虚拟机应用文件的相互克隆，避免繁琐的重复安装。&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/vmosdl/photo_2023-02-26_21-45-47.webp"
width="720"
height="1280"
srcset="https://blog.xpdbk.com/post/vmosdl/photo_2023-02-26_21-45-47_hu85b4c41576db25fe0a5c68b9cfe10d31_36790_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/vmosdl/photo_2023-02-26_21-45-47_hu85b4c41576db25fe0a5c68b9cfe10d31_36790_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="vmos"
class="gallery-image"
data-flex-grow="56"
data-flex-basis="135px"
> &lt;img src="https://blog.xpdbk.com/post/vmosdl/photo_2023-02-26_21-45-53.webp"
width="720"
height="1280"
srcset="https://blog.xpdbk.com/post/vmosdl/photo_2023-02-26_21-45-53_hu07d78c185892ed147112c16c97731e96_29938_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/vmosdl/photo_2023-02-26_21-45-53_hu07d78c185892ed147112c16c97731e96_29938_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="vmos2"
class="gallery-image"
data-flex-grow="56"
data-flex-basis="135px"
>&lt;/p>
&lt;h2 id="修改说明">修改说明&lt;/h2>
&lt;p>解除VIP会员限制，所有rom都可以下载&lt;/p>
&lt;h2 id="下载地址">下载地址&lt;/h2>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://pvphack.lanzoue.com/b0323sx8d" target="_blank" rel="noopener"
>蓝奏云&lt;/a>&lt;/p>
&lt;p>访问密码：&lt;code>3ae9&lt;/code>&lt;/p>
&lt;/blockquote></description></item><item><title>Navicat Premium 15 软件</title><link>https://blog.xpdbk.com/post/npremium/</link><pubDate>Sun, 26 Feb 2023 15:14:47 +0700</pubDate><guid>https://blog.xpdbk.com/post/npremium/</guid><description>&lt;blockquote>
&lt;p>仅用来探讨技术和学习&lt;/p>
&lt;p>下载学习之后请24小时内删除&lt;/p>
&lt;/blockquote>
&lt;h2 id="navicat-premium-15破解">Navicat Premium 15破解&lt;/h2>
&lt;p>&lt;strong>Navicat Premium 15&lt;/strong> 可以真正被激活 &lt;strong>16&lt;/strong>版本似乎有点难&lt;/p>
&lt;blockquote>
&lt;h2 id="navicat-premium介绍">Navicat Premium介绍&lt;/h2>
&lt;/blockquote>
&lt;p>&lt;strong>Navicat premium&lt;/strong>是一款数据库管理工具，可以连接多个数据库。它允许您用一个程序同时连接到 &lt;code>MySQL&lt;/code>、&lt;code>SQLite&lt;/code>、&lt;code>Oracle&lt;/code> 和 &lt;code>PostgreSQL&lt;/code> 数据库，从而更方便地管理不同类型的数据库。&lt;/p>
&lt;p>&lt;code>Navicat Premium 15&lt;/code> ，工具是&lt;strong>收费&lt;/strong>的，因为学习买的话，不怎么划算，所以这里有修改版的。&lt;/p>
&lt;p>软件界面：&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/asda.webp"
width="1365"
height="729"
srcset="https://blog.xpdbk.com/post/npremium/asda_huc22572d1cbf69ea142bde264059a8bc0_25164_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/asda_huc22572d1cbf69ea142bde264059a8bc0_25164_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="软件界面"
class="gallery-image"
data-flex-grow="187"
data-flex-basis="449px"
>&lt;/p>
&lt;blockquote>
&lt;h2 id="安装包和破解工具">安装包和破解工具&lt;/h2>
&lt;/blockquote>
&lt;p>&lt;code>Navicat premium 15&lt;/code>安装包和破解工具&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://kkdaj.lanzoui.com/ic03rbi" target="_blank" rel="noopener"
>蓝奏云&lt;/a>&lt;/p>
&lt;p>访问密码：无&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;h2 id="开始安装">开始安装&lt;/h2>
&lt;/blockquote>
&lt;p>下载好后首先安装 &lt;code>Navicat Premium 15&lt;/code> ，一路下一步就完了。&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/wdas.webp"
width="504"
height="386"
srcset="https://blog.xpdbk.com/post/npremium/wdas_hu9d50bfc6510a5c8bf46b4e47be1e341f_17000_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/wdas_hu9d50bfc6510a5c8bf46b4e47be1e341f_17000_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="安装"
class="gallery-image"
data-flex-grow="130"
data-flex-basis="313px"
>&lt;/p>
&lt;blockquote>
&lt;h2 id="开始激活--激活必须断网">开始激活 激活必须断网&lt;/h2>
&lt;/blockquote>
&lt;ol>
&lt;li>使用注册机，先退出所有杀毒软件，再打开注册机。&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/114514.webp"
width="240"
height="183"
srcset="https://blog.xpdbk.com/post/npremium/114514_hu682b7367c433869ecfacd514a662071d_1944_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/114514_hu682b7367c433869ecfacd514a662071d_1944_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="激活"
class="gallery-image"
data-flex-grow="131"
data-flex-basis="314px"
>&lt;/p>
&lt;ol start="2">
&lt;li>
&lt;p>在激活工具的第一个选项&lt;code>1)Patch&lt;/code>里选择&lt;code>Backup&lt;/code>，&lt;code>Host&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Navicat&lt;/strong> 是&lt;code>15&lt;/code>版本就选&lt;code>15&lt;/code>版本&lt;/p>
&lt;/li>
&lt;li>
&lt;p>点击，&lt;code>Patch&lt;/code>按钮&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>如图：&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/daewf.webp"
width="570"
height="50"
srcset="https://blog.xpdbk.com/post/npremium/daewf_hu5704940401a726678625f54aa3f828ea_2784_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/daewf_hu5704940401a726678625f54aa3f828ea_2784_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="1140"
data-flex-basis="2736px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/afewaw.webp"
width="960"
height="540"
srcset="https://blog.xpdbk.com/post/npremium/afewaw_hue8226c650e4adb64180f67f5b7b3cd4b_14602_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/afewaw_hue8226c650e4adb64180f67f5b7b3cd4b_14602_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>&lt;strong>以下提示说明Patch成功了。&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/fewg.webp"
width="640"
height="609"
srcset="https://blog.xpdbk.com/post/npremium/fewg_hu424997c4fdde9c34728e2736311954d8_26616_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/fewg_hu424997c4fdde9c34728e2736311954d8_26616_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="105"
data-flex-basis="252px"
>&lt;/p>
&lt;ol start="3">
&lt;li>&lt;strong>Language&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>&lt;code>License&lt;/code>里选中&lt;code>Enterprise&lt;/code>、在&lt;code>Produce&lt;/code>里选&lt;code>Premium&lt;/code>、在&lt;code>Languages&lt;/code>里选&lt;code>Simplified Chinese&lt;/code>(简体中文)&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/feasf.webp"
width="572"
height="75"
srcset="https://blog.xpdbk.com/post/npremium/feasf_hub6a9ea0cee4bd0c92da704004ab44b0f_6442_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/feasf_hub6a9ea0cee4bd0c92da704004ab44b0f_6442_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="762"
data-flex-basis="1830px"
>&lt;/p>
&lt;ol start="4">
&lt;li>&lt;strong>Resale License&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>选择&lt;code>Site License&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/gerg.webp"
width="584"
height="103"
srcset="https://blog.xpdbk.com/post/npremium/gerg_hu7bccf1da911afbe4bae1de2804be542a_8470_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/gerg_hu7bccf1da911afbe4bae1de2804be542a_8470_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="566"
data-flex-basis="1360px"
>&lt;/p>
&lt;ol start="5">
&lt;li>&lt;code>Keygen / Offline Activation&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>点击&lt;code>Generate&lt;/code>按钮就会生成一个许可证秘钥，将许可证秘钥复制后就打开&lt;code>Navicat Premium 15&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/reger.webp"
width="579"
height="340"
srcset="https://blog.xpdbk.com/post/npremium/reger_hu48a9cc54c6b8429ea0be91bb24fa8c36_27872_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/reger_hu48a9cc54c6b8429ea0be91bb24fa8c36_27872_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="408px"
>&lt;/p>
&lt;ol start="6">
&lt;li>&lt;strong>打开&lt;code>Navicat Premium 15&lt;/code>，点击注册&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/fewf.webp"
width="702"
height="606"
srcset="https://blog.xpdbk.com/post/npremium/fewf_hub5c9e5e84dd605f19e741f3be1de2b78_17248_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/fewf_hub5c9e5e84dd605f19e741f3be1de2b78_17248_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="115"
data-flex-basis="278px"
>&lt;/p>
&lt;ol start="7">
&lt;li>&lt;strong>粘贴秘钥，然后点击激活按钮&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/fwaf.webp"
width="1332"
height="679"
srcset="https://blog.xpdbk.com/post/npremium/fwaf_hu4da514ae5674f652d5cf1b67955e6f93_67514_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/fwaf_hu4da514ae5674f652d5cf1b67955e6f93_67514_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="196"
data-flex-basis="470px"
>&lt;/p>
&lt;p>&lt;strong>在弹出的界面选择手动激活&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/gwerg.webp"
width="704"
height="288"
srcset="https://blog.xpdbk.com/post/npremium/gwerg_hu6de21b35c2af7db2df5f9700565c3275_11062_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/gwerg_hu6de21b35c2af7db2df5f9700565c3275_11062_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="激活"
class="gallery-image"
data-flex-grow="244"
data-flex-basis="586px"
>&lt;/p>
&lt;ol start="8">
&lt;li>将请求码粘贴到注册机&lt;code>Request Code&lt;/code>框中（完整过程看图）&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/awa.webp"
width="1202"
height="642"
srcset="https://blog.xpdbk.com/post/npremium/awa_hu6f8caf5ea589d10785cbaae5843e459d_129728_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/awa_hu6f8caf5ea589d10785cbaae5843e459d_129728_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="187"
data-flex-basis="449px"
>&lt;/p>
&lt;ol start="9">
&lt;li>点击激活页面的激活弹出（说明激活成功）&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/wfa.webp"
width="206"
height="129"
srcset="https://blog.xpdbk.com/post/npremium/wfa_hu707cc605111eca0800c376c634c3fd61_2526_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/wfa_hu707cc605111eca0800c376c634c3fd61_2526_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/npremium/awda.webp"
width="546"
height="389"
srcset="https://blog.xpdbk.com/post/npremium/awda_hufe787a48638591be842e1758fecfa92d_6802_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/npremium/awda_hufe787a48638591be842e1758fecfa92d_6802_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="140"
data-flex-basis="336px"
>&lt;/p>
&lt;blockquote>
&lt;p>激活成功了 如果经济允许，还是希望可以支持正版！！！&lt;/p>
&lt;p>附上购买地址&lt;code>http://www.navicat.com.cn/download/navicat-premium&lt;/code>&lt;/p>
&lt;/blockquote></description></item><item><title>DLL反编译</title><link>https://blog.xpdbk.com/post/dllfby/</link><pubDate>Sat, 25 Feb 2023 15:14:47 +0700</pubDate><guid>https://blog.xpdbk.com/post/dllfby/</guid><description>&lt;blockquote>
&lt;p>仅用来探讨技术和学习&lt;/p>
&lt;p>下载学习之后请24小时内删除&lt;/p>
&lt;/blockquote>
&lt;h2 id="dll-to-c">DLL TO C&lt;/h2>
&lt;p>&lt;img src="https://blog.xpdbk.com/post/dllfby/dll.webp"
width="968"
height="542"
srcset="https://blog.xpdbk.com/post/dllfby/dll_hu717fc75449aa7bbd18f226d626fea6f5_61162_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/dllfby/dll_hu717fc75449aa7bbd18f226d626fea6f5_61162_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="dll to c"
class="gallery-image"
data-flex-grow="178"
data-flex-basis="428px"
>&lt;/p>
&lt;p>&lt;strong>DLL to C&lt;/strong>是一款可怕的DLL反编译工具，能够把DLL转换成可编译的C或C++代码，当您丢失DLL的源代码时，您可以用DLL to C，它能够把DLL转换回可编译的代码，并且具有生成数据结构和反汇编代码段的功能，和其它的反编译或反汇编工具最大的不同是：它生成的代码是可以直接编译运行的，它可以为所有数据段生成数据结构并拆解代码段，还可以生成函数关系树，然后可以方便地导出DLL中所需的指定特征，它可以将汇编代码转换成C代码，C代码也是可编译的，非常强大&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://pvphack.lanzoue.com/iQwL30ojfmhi" target="_blank" rel="noopener"
>蓝奏云&lt;/a>&lt;/p>
&lt;p>访问密码：&lt;code>41ng&lt;/code>&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>压缩密码&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">NbeV+lgz9Ce6m2da/8bkvXWr9nBtjfId
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用方法">使用方法&lt;/h2>
&lt;p>1.运行Dll2C.exe
2. 打开文件TestWin32Dll\Win32Dll.dll
3. 单击“开始转换”按钮。
4.将生成的文件复制到你的VC项目目录中，然后将复制的文件添加到你的VC项目中。
5. 在您的 VC 项目中调用生成的代码。 您可以查看文件 TestWin32Dll\TestWin32Dll.cpp 以了解如何调用。&lt;/p>
&lt;p>如果在编译或运行时出现错误，请尝试使用 Microsoft Visual Studio 2008 专业版进行编译。 如需更多帮助，请联系 &lt;a class="link" href="mailto:support@dll-decompiler.com" >support@dll-decompiler.com&lt;/a>&lt;/p>
&lt;h2 id="dll-to-c-反编译效果源码">DLL TO C 反编译效果源码&lt;/h2>
&lt;p>&lt;code>HPP.DLL&lt;/code> CS 1.6的纪&lt;/p>
&lt;p>&lt;code>NorAdrenaline.DLL&lt;/code> CS1.6的纪&lt;/p></description></item><item><title>CS1.6 纪狗气死我了</title><link>https://blog.xpdbk.com/post/hacker-cs1.6/</link><pubDate>Fri, 13 Jan 2023 00:00:00 +0700</pubDate><guid>https://blog.xpdbk.com/post/hacker-cs1.6/</guid><description>&lt;img src="https://blog.xpdbk.com/post/hacker-cs1.6/cs1.6.webp" alt="Featured image of post CS1.6 纪狗气死我了" />&lt;h2 id="cs16-纪狗气死我了">CS1.6 纪狗气死我了&lt;/h2>
&lt;h2 id="cs16-外纪玩法">CS1.6 外纪玩法&lt;/h2>
&lt;p>&lt;strong>声明&lt;/strong>：仅供研究DLL注入与和机器人打或者在Hack vs Hack（HVH）服务器玩，请不要在普通的在线服务器里面玩不然被腐竹ban ip了我不管&lt;/p>
&lt;blockquote>
&lt;p>压缩包密码：&lt;code>HfuGhf4c&lt;/code>&lt;/p>
&lt;p>&lt;a class="link" href="https://pvphack.lanzoue.com/iIv3k0kt5fwh" target="_blank" rel="noopener"
>蓝奏云地址&lt;/a>&lt;/p>
&lt;p>访问密码：&lt;code>d7qm&lt;/code>&lt;/p>
&lt;/blockquote>
&lt;p>已测试里面纪的大部分快捷键为&lt;code>lns&lt;/code>&lt;/p>
&lt;h3 id="最好的cs16-evol静默暴力">最好的cs1.6 EVOL静默暴力&lt;/h3>
&lt;p>打不开的打开注入没有反应的把杀毒关掉重试，有问题先关杀毒
注入后按ins键请进游戏按ins大厅按ins是没有反应的！！&lt;/p>
&lt;p>良好的解析复杂的配置和优质的GUI动画但是容易卡枪&lt;/p>
&lt;p>帧数很低貌似比较吃CPU&lt;/p>
&lt;p>GUI键 &lt;code>ins&lt;/code>&lt;/p>
&lt;p>&lt;strong>游玩视频&lt;/strong>&lt;/p>
&lt;p>施工中&lt;/p></description></item><item><title>D0H</title><link>https://blog.xpdbk.com/post/doh-zj/</link><pubDate>Tue, 10 Jan 2023 00:00:00 +0700</pubDate><guid>https://blog.xpdbk.com/post/doh-zj/</guid><description>&lt;h2 id="d0h解析去广告">D0H解析去广告&lt;/h2>
&lt;blockquote>
&lt;p>仅用于去广告&lt;/p>
&lt;/blockquote>
&lt;pre>&lt;code>已失效待补
&lt;/code>&lt;/pre>
&lt;p>&lt;code>base64&lt;/code>混淆需要自己解密哦&lt;/p>
&lt;p>使用方法可以搜索百度 &lt;code>DOH在浏览器上怎么用&lt;/code>&lt;/p></description></item><item><title>自建一个tracker的方法</title><link>https://blog.xpdbk.com/post/bt-zyzf/</link><pubDate>Tue, 10 Jan 2023 00:00:00 +0700</pubDate><guid>https://blog.xpdbk.com/post/bt-zyzf/</guid><description>&lt;h2 id="自建tracker服务器用于文件分享">自建tracker服务器用于文件分享&lt;/h2>
&lt;p>众所周知bittorrent是一款P2P文件传输协议，能够让两台内网机器实现点对点的文件传输。&lt;/p>
&lt;p>随着各种资源的丰富，bit下载也越来越为大众所熟知。&lt;/p>
&lt;p>我们都知道，两台内网机器，直接使用http或者udp是无法进行文件分享的。&lt;/p>
&lt;p>要么使用网盘，有限速和和谐风险。&lt;/p>
&lt;p>要么使用服务器FTP转发，但是硬盘和带宽成本比较高。&lt;/p>
&lt;p>要么使用P2P同步工具，但是要安装专用的软件。&lt;/p>
&lt;p>故这里尝试使用BT协议做文件分享，即将要分享的文件打包成种子，然后将种子传给对方。大部分人都是有BT下载工具的。&lt;/p>
&lt;p>由于共有tracker存在安全隐患，本篇文章就是介绍如何搭建私有tracker服务器。&lt;/p>
&lt;h2 id="在vps上使用bittorrent-tracker">在VPS上使用bittorrent-tracker&lt;/h2>
&lt;p>这是&lt;code>webtorrent&lt;/code>项目的一个部分。使用&lt;code>nodejs&lt;/code>进行搭建部署。&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/webtorrent/bittorrent-tracker" target="_blank" rel="noopener"
>官方&lt;/a>有英文文档，这里我简单说一下如何使用：&lt;/p>
&lt;p>首先要下载&lt;code>nodejs&lt;/code>和&lt;code>npm&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">apt install nodejs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt install npm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后安装&lt;code>bittorrent-tracker&lt;/code>包：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">npm install bittorrent-tracker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>新建一个&lt;code>server.js&lt;/code>文件，设置一个简单的服务器，更多可以参考官方文档&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Create a web sockets signaling server
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">let&lt;/span> &lt;span class="nx">lookup&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">hostname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;0.0.0.0&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">process&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">env&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PORT&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="mi">3001&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">Server&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;bittorrent-tracker&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">Server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">server&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Server&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">udp&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// enable udp server? [default=true]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// enable http server? [default=true]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ws&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// enable websocket server? [default=true]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">stats&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// enable web-based statistics? [default=true]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;error&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// fatal server error!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//console.log(err.message)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;warning&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// client sent bad data. probably not a problem, just a buggy client.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//console.log(err.message)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;listening&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// fired when all requested servers are listening
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Signal server http port:&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">address&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Signal server ws port:&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">address&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// listen for individual tracker messages from peers:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;start&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">addr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;got start message from &amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">addr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">torrents&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">hash&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">lookup&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">torrents&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">hash&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">infoHash&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">torrents&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">hash&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">peers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//console.log(&amp;#34;peers: &amp;#34; + server.torrents[hash].peers.length)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;complete&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">addr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;stop&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">addr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// start tracker server listening! Use 0 to listen on a random free port.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">hostname&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;listening&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后运行即可：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">node server.js
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>默认的使用端口为&lt;code>3001&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@lelfeng:~/tracker# node server-test.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Signal server http port:3001
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Signal server ws port:3001
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>访问对应地址，返回：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">d14:failure reason33:invalid action in HTTP request: /e
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这种方法不如&lt;code>Docker&lt;/code>然后也老&lt;/p></description></item><item><title>vps服务器中安装frp开放端口</title><link>https://blog.xpdbk.com/post/frp-bt/</link><pubDate>Sun, 08 Jan 2023 00:00:00 +0700</pubDate><guid>https://blog.xpdbk.com/post/frp-bt/</guid><description>&lt;h2 id="vps服务器中安装frp开放端口">vps服务器中安装frp开放端口&lt;/h2>
&lt;h2 id="安装gost">安装GOST&lt;/h2>
&lt;p>创建Scock5隧道&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget --no-check-certificate -O gost.sh https://raw.githubusercontent.com/KANIKIG/Multi-EasyGost/master/gost.sh &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> chmod +x gost.sh &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> ./gost.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="安装frp">安装Frp&lt;/h2>
&lt;h3 id="安装">安装&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">yum -y install wget screen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://github.com/fatedier/frp/releases/download/v0.46.0/frp_0.46.0_linux_amd64.tar.gz -O frp.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xzf frp.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> frp_*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="修改配置文件">修改配置文件&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">vi /root/frp_*/frps.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="frpsini内容为">frps.ini内容为&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[common]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">bind_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">9127&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">bind_udp_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">9127&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">bind_addr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">0.0.0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">allow_ports&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">1001-1500,10001-22500&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">token&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">www.xpdbk.com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">tls_only&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="启动软件">启动软件&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /root/frp_*&lt;span class="p">;&lt;/span>screen -dmS awa ./frps -c ./frps.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="查看是否启动成功">查看是否启动成功&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">netstat -apn &lt;span class="p">|&lt;/span> grep frps
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="设置为开机启动">设置为开机启动&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;cd /root/frp_*;screen -dmS awa ./frps -c ./frps.ini&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/rc.d/rc.local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="centos-7需要设置执行权限">centos 7需要设置执行权限&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chmod +x /etc/rc.d/rc.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ll /etc/rc.d/rc.local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="检查防火墙与服务器安全组放通端口">检查防火墙与服务器安全组放通端口&lt;/h2>
&lt;h3 id="将所有iptables以序号标记显示执行">将所有iptables以序号标记显示，执行：&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">iptables -L -n --line-numbers
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="清空命令">清空命令&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">iptables -t nat -F
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t nat -X
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t nat -P PREROUTING ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t nat -P POSTROUTING ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t nat -P OUTPUT ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t mangle -F
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t mangle -X
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t mangle -P PREROUTING ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t mangle -P INPUT ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t mangle -P FORWARD ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t mangle -P OUTPUT ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t mangle -P POSTROUTING ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -F
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -X
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -P FORWARD ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -P INPUT ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -P OUTPUT ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t raw -F
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t raw -X
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t raw -P PREROUTING ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t raw -P OUTPUT ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service iptables save
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="centos-7中关闭firewalld防火墙">centos 7中关闭firewalld防火墙&lt;/h3>
&lt;p>启动&lt;br>
&lt;code>systemctl start firewalld&lt;/code>&lt;/p>
&lt;p>启用开机自启动&lt;br>
&lt;code>systemctl enable firewalld&lt;/code>&lt;/p>
&lt;p>关闭&lt;br>
&lt;code>systemctl stop firewalld&lt;/code>&lt;/p>
&lt;p>关闭开机自启动&lt;br>
&lt;code>systemctl disable firewalld&lt;/code>&lt;/p>
&lt;p>查看运行状态&lt;br>
&lt;code>firewall-cmd --state&lt;/code>&lt;/p>
&lt;h4 id="一键关闭也可以">一键关闭也可以&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">systemctl stop firewalld&lt;span class="p">;&lt;/span>systemctl disable firewalld&lt;span class="p">;&lt;/span>service ip6tables stop&lt;span class="p">;&lt;/span>service iptables stop&lt;span class="p">;&lt;/span>chkconfig iptables off
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="windows-frp客户端下载">Windows Frp客户端下载&lt;/h2>
&lt;p>&lt;a class="link" href="https://github.com/fatedier/frp/releases/download/v0.46.0/frp_0.46.0_windows_386.zip" target="_blank" rel="noopener"
>https://github.com/fatedier/frp/releases/download/v0.46.0/frp_0.46.0_windows_386.zip&lt;/a>&lt;/p>
&lt;h3 id="解压并且用记事本打开修改配置文件frpcini">解压并且用记事本打开修改配置文件frpc.ini&lt;/h3>
&lt;h4 id="frpcini内容为xxxx改成frp的服务器ip">frpc.ini内容为，x.x.x.x改成frp的服务器ip&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[common]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">server_addr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">x.x.x.x&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">server_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">8000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">websocket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">token&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">www.itzmx.com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">tls_enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Remote Download]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">local_ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">local_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">1235&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">remote_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">1235&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[BT Listen TCP]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">local_ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">local_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">22223&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">remote_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">22223&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[BT Listen UDP]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">udp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">local_ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">local_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">22223&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">remote_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">22223&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>新建一个 &lt;code>awa.bat&lt;/code> 文件内容为&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-batch" data-lang="batch">&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">echo&lt;/span> off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">title&lt;/span>=开始启用内网穿透
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mode con cols=100 lines=54&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="k">color&lt;/span> 2&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="k">color&lt;/span> 5B
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">echo&lt;/span> 准备启用内网穿透服务
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">pause&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">echo&lt;/span> 内网穿透服务启动中，预计3秒，请稍候……
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">frpc.exe -c frpc.ini
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">echo&lt;/span> 如有报错请复制文件记录输出数值以便交流讨论。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">pause&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>此时端口已经可以正常为TCP端口打通，但是由于BT客户端，tracker发起对外请求时候，还是用的是自身网络，没有经过frp，所以他人获取的ip是自身未经过内网透传的ip而不是frp服务器ip&lt;br>
&lt;strong>解决办法一&lt;/strong>
需要在服务器中同时安装其它代理，或者隧道软件，例如v2，并且v2客户端打开本地监听端口功能&lt;/p>
&lt;p>如果BT客户端不支持设置代理功能，可以使用另一款软件，netch为整个exe进程进行加速，这种方式会消耗较多vps服务器的流量，此时建议换比特彗星这种支持内置代理功能的BT客户端&lt;/p>
&lt;p>使用比特彗星客户端scock5代理功能设置&lt;/p>
&lt;p>仅用于穿透&lt;/p></description></item><item><title>Obsidian：一款离线笔记软件</title><link>https://blog.xpdbk.com/post/obsidian-bj/</link><pubDate>Wed, 28 Dec 2022 00:00:00 +0700</pubDate><guid>https://blog.xpdbk.com/post/obsidian-bj/</guid><description>&lt;img src="https://blog.xpdbk.com/post/obsidian-bj/1.webp" alt="Featured image of post Obsidian：一款离线笔记软件" />&lt;h2 id="obsidian笔记">obsidian笔记&lt;/h2>
&lt;p>&lt;u>obsidian是一种笔记软件，可在您的本地纯文本文件文件夹之上运行。&lt;/u>&lt;/p>
&lt;h2 id="给孙子的笔记">给孙子的笔记&lt;/h2>
&lt;p>在我们这个云服务可以随时 &lt;a class="link" href="https://techcrunch.com/2013/07/31/evernote-competitor-catch-com-shuts-down-its-note-taking-apps-company-heading-in-different-direction/" target="_blank" rel="noopener"
>关闭&lt;/a> &lt;a class="link" href="https://www.theverge.com/2014/5/22/5741602/one-time-evernote-pinterest-rival-springpad-to-close-its-doors" target="_blank" rel="noopener"
>、&lt;/a>&lt;a class="link" href="https://gadgets.ndtv.com/apps/news/microsoft-to-do-new-features-wunderlist-shuts-down-2224833" target="_blank" rel="noopener"
>被&lt;/a> &lt;a class="link" href="https://www.theverge.com/2012/3/12/2865638/twitter-acquires-posterous-blogging-platform" target="_blank" rel="noopener"
>收购&lt;/a>或 &lt;a class="link" href="https://techcrunch.com/2016/12/14/evernotes-new-privacy-policy-allows-employees-to-read-your-notes/" target="_blank" rel="noopener"
>更改隐私政策&lt;/a>的时代， 您最不想要的就是专有格式和数据锁定。&lt;/p>
&lt;p>使用 Obsidian，&lt;strong>您的数据位于本地文件夹&lt;/strong>中。永远不要再将您一生的工作作为人质留在云端。&lt;/p>
&lt;h2 id="面向未来的格式">面向未来的格式&lt;/h2>
&lt;p>黑曜石使用 Markdown。Markdown 被 Reddit 和 GitHub 等网站广泛使用，并且不会很快消失。&lt;/p>
&lt;p>Markdown 被设计成人类可读的。它没有被编码混淆；您可以直接使用 Markdown 编辑器编辑源文件，也可以使用脚本自动编辑它们。&lt;/p>
&lt;h2 id="全面控制">全面控制&lt;/h2>
&lt;p>你的笔记存在于你的设备上，期间。您可以根据需要对它们进行加密或备份；这是你的决定，不是我们的。&lt;/p>
&lt;p>纯文本文件可让您在其上进行各种同步、加密和数据处理。Obsidian 与 Dropbox、Cryptomator 和任何处理纯文本文件的软件配合得很好。&lt;/p>
&lt;h2 id="始终可用">始终可用&lt;/h2>
&lt;p>没有互联网？没问题。Obsidian 完全离线工作，互联网或服务问题永远不会成为您的问题。&lt;/p>
&lt;p>随时随地享受阅读和处理笔记的乐趣。&lt;/p>
&lt;p>&lt;a class="link" href="https://obsidian.md/" target="_blank" rel="noopener"
>官网&lt;/a>&lt;/p></description></item><item><title>如何安全的传送你的文件？</title><link>https://blog.xpdbk.com/post/404-jm/</link><pubDate>Mon, 19 Dec 2022 00:00:00 +0700</pubDate><guid>https://blog.xpdbk.com/post/404-jm/</guid><description>&lt;h2 id="如何防止你的文件被别人偷看">如何防止你的文件被别人偷看？&lt;/h2>
&lt;blockquote>
&lt;p>本篇文章将教你如何传文件才不会被好兄弟看到&lt;/p>
&lt;/blockquote>
&lt;p>使用加密工具，可以在使用百度网盘等服务，安全地储存下载好的东西。&lt;/p>
&lt;p>加密工具的局限是要求通信双方都掌握加密/解密的方法，使用门槛较高，沟通效率较低，难以大范围普及。&lt;/p>
&lt;h2 id="1-网盘加密">1 网盘加密&lt;/h2>
&lt;p>1.可以使用 Veracrypt 创建的虚拟加密盘（对称加密，需另循安全渠道向接收方发送密码），或者&lt;/p>
&lt;p>2.使用 GnuPG 加密（非对称加密，需事先交换公钥）文件，&lt;/p>
&lt;p>3.较为低阶的做法是直接使用加密的压缩包。加密完成后可修改文件名后缀，将其伪装成因损坏而无法打开的文件。&lt;/p>
&lt;h2 id="2-隐写术">2 隐写术&lt;/h2>
&lt;p>隐写术 (steganography) 是指对图片中每个像素的颜色进行肉眼无法察觉的微调，借此向图片文件中写入密文。&lt;/p>
&lt;blockquote>
&lt;p>隐写术需要借助 &lt;a class="link" href="https://pvphack.lanzoue.com/b031u7isd" target="_blank" rel="noopener"
>OpenStego （打开新窗口）&lt;/a>&lt;/p>
&lt;p>访问密码:g0el&lt;/p>
&lt;/blockquote>
&lt;p>等专门的软件进行，写入信息过程是在软件中分别导入图片和写入信息的文档（如 .txt），选择加密算法和设置密码，最后由软件生成合成了原图片和文档的新图片；提取信息的过程是将图片导入软件，输入密码解密后提取出写入的信息。需要注意的是写入密文的图片必须以原图形式传输，如图片被压缩或修改将导致信息无法被读取。&lt;/p>
&lt;p>可以在公共聊天室传短信息到你的朋友的手里&lt;/p>
&lt;h3 id="打开stego">打开Stego&lt;/h3>
&lt;p>OpenStego 是一个隐写术应用程序，它提供两种功能：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>数据隐藏：它可以隐藏图像文件中的任何数据。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>水印：使用不可见签名为图像文件加水印。它可用于检测未经授权的文件复制。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>对于图形用户界面：&lt;/p>
&lt;p>如果您使用安装程序，请使用 OpenStego 的菜单快捷方式。对于 zip 下载，使用捆绑的批处理文件或 shell 脚本启动 GUI。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">openstego.bat (Windows)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">./openstego.sh (Linux / MacOS)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="隐藏信息">隐藏信息&lt;/h3>
&lt;p>在隐藏信息之前需要做做两样准备，也就是&lt;strong>Cover&lt;/strong>以及&lt;strong>Message文件&lt;/strong>。第一个就是我们需要用来作伪装的无害的图片，第二个message文件就是我们用来存储信息的文件，一般创建一个.txt的文件即可。 首先我们找好一张可以隐藏真实意图的图片，比如这样一张： &lt;img src="https://blog.xpdbk.com/post/404-jm/128.webp"
width="605"
height="605"
srcset="https://blog.xpdbk.com/post/404-jm/128_hu6ffff11d738ba2f7afd004e4ca850d0a_21384_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/404-jm/128_hu6ffff11d738ba2f7afd004e4ca850d0a_21384_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="猫猫"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
> 然后我们新建一个txt文件，并写下这样一段话 “我年轻的时候就读过：论语，老子，孟子，尚书，礼记，大学，中庸，周易，左转，庄子，墨子，荀子，韩非子，孙子兵法………常识，老人与海，世界秩序,…….” 然后文件准备就绪以后，就开始想办法把这两个文件合二为一。&lt;/p>
&lt;p>&lt;strong>打开软件界面&lt;/strong> &lt;img src="https://blog.xpdbk.com/post/404-jm/121.webp"
width="1100"
height="458"
srcset="https://blog.xpdbk.com/post/404-jm/121_hu4da54010d920f3db1feb6aef66ffa119_28706_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/404-jm/121_hu4da54010d920f3db1feb6aef66ffa119_28706_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="演示awa"
class="gallery-image"
data-flex-grow="240"
data-flex-basis="576px"
> 第一行浏览咱们需要隐藏的装有需要传输的信息的文件，第二行死Cover，也就是咱们选好的看起来非常友好无害的图片，最后需要选择输出文件的名字和地址，到时候便于知道输出的图片在哪里叫什么名字。 然后需要选择加密算法设置密码，最后点击右下角的&lt;strong>Hide Data&lt;/strong>隐藏信息即可。咱们查看一下隐藏好信息的图片发现和原来的图片没有什么区别但是其实里面已经包含了&lt;strong>背书单&lt;/strong>文件了：&lt;/p>
&lt;p>&lt;strong>提取隐藏信息&lt;/strong>&lt;br>
这个操作相对简单，必须要知道对称加密的密码才可以提取，而且&lt;strong>要保证图片没有被压缩过或者修改过&lt;/strong>，有时候为了防止通讯软件压缩图片会考虑选择以传输压缩文件的方式传输。&lt;br>
&lt;img src="https://blog.xpdbk.com/post/404-jm/4awa.webp"
width="1100"
height="465"
srcset="https://blog.xpdbk.com/post/404-jm/4awa_huc0abf0c455d73fc5f8b2df1bbf4c98e4_20772_480x0_resize_q75_h2_box_2.webp 480w, https://blog.xpdbk.com/post/404-jm/4awa_huc0abf0c455d73fc5f8b2df1bbf4c98e4_20772_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="密码加密"
class="gallery-image"
data-flex-grow="236"
data-flex-basis="567px"
>&lt;br>
首先选择&lt;strong>Extract Data&lt;/strong>提取数据，然后第一行找到含有隐藏数据的文件，第二行浏览输出地址，就是提取出来的文件保存在哪里，最后必须要输入密码才可以解密，因此需要正确的输入密码，最后就是提取数据。&lt;br>
操作很简单吧(●’◡’●)，可以自己试试看。&lt;/p>
&lt;h2 id="使用des加密短文">使用DES加密短文&lt;/h2>
&lt;p>&lt;strong>☆提供高质量的数据保护，防止数据未经授权的泄露和未被察觉的修改；&lt;/strong>&lt;/p>
&lt;p>&lt;strong>☆具有相当高的复杂性，使得破译的开销超过可能获得的利益，同时又要便于理解和掌握；&lt;/strong>&lt;/p>
&lt;p>&lt;strong>☆DES密码体制的安全性应该不依赖于算法的保密，其安全性仅以加密密钥的保密为基础；&lt;/strong>&lt;/p>
&lt;p>离线加解密DES &lt;a class="link" href="https://leak.ptik.ga/d/%E8%A7%A3%E5%AF%86%E5%B7%A5%E5%85%B7/DES%E8%A7%A3%E5%AF%86.7z?sign=4yJi9D0j47i7eQO7aB0wz7yTsenV6eDtyiT-XTWAu8Q=:0" target="_blank" rel="noopener"
>HTML文件下载&lt;/a>&lt;/p></description></item></channel></rss>