<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>frp on LEl_FENG的博客</title><link>https://blog.xpdbk.com/tags/frp/</link><description>Recent content in frp on LEl_FENG的博客</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>XiaoPang版权所有</copyright><lastBuildDate>Tue, 20 Dec 2022 00:00:00 +0700</lastBuildDate><atom:link href="https://blog.xpdbk.com/tags/frp/index.xml" rel="self" type="application/rss+xml"/><item><title>旧手机来做网站服务器</title><link>https://blog.xpdbk.com/post/phone-web/</link><pubDate>Tue, 20 Dec 2022 00:00:00 +0700</pubDate><guid>https://blog.xpdbk.com/post/phone-web/</guid><description>&lt;h2 id="旧手机来做网站服务器">旧手机来做网站服务器&lt;/h2>
&lt;blockquote>
&lt;p>仅供个人学习用&lt;/p>
&lt;/blockquote>
&lt;p>有旧手机的朋友，先别急着拿去换不锈钢脸盆，不妨用旧手机来当做网站的服务器，是不是感到有那么一丝丝的牛批&lt;/p>
&lt;p>准备工作&lt;/p>
&lt;h2 id="1-一部闲置旧手机">1. 一部闲置旧手机&lt;/h2>
&lt;h2 id="2-下载并安装以下软件">2. 下载并安装以下软件&lt;/h2>
&lt;p>KSWEB3.963 破解版&lt;br>
&lt;a class="link" href="https://pan.baidu.com/s/1Pu1i3pSzC2PCs-yC3u7N2g" target="_blank" rel="noopener"
>https://pan.baidu.com/s/1Pu1i3pSzC2PCs-yC3u7N2g&lt;/a> 提取码：504q&lt;br>
JuiceSSH&lt;br>
&lt;a class="link" href="https://pan.baidu.com/s/1iXLYrG-UhzJG5NSdK5pIFQ" target="_blank" rel="noopener"
>https://pan.baidu.com/s/1iXLYrG-UhzJG5NSdK5pIFQ&lt;/a> 提取码：1jhz&lt;br>
FRP 安卓客户端&lt;br>
&lt;a class="link" href="https://pan.baidu.com/s/1UQpn2YtodPxuv9LcKfCiWA" target="_blank" rel="noopener"
>https://pan.baidu.com/s/1UQpn2YtodPxuv9LcKfCiWA&lt;/a> 提取码:t4h2&lt;/p>
&lt;h2 id="3-一台服务器网上有免费的内网穿透服务不过体验太差我这里买了一台写教程写完之后当然是退款了">3. 一台服务器，网上有免费的内网穿透服务，不过体验太差，我这里买了一台写教程，写完之后当然是退款了&lt;/h2>
&lt;h3 id="1-建立本地-php-环境安装程序">1. 建立本地 php 环境，安装程序&lt;/h3>
&lt;p>打开 KSWEB 软件，并等待自动安装环境&lt;br>
划到最右边设置 KSWEB：保护服务器非授权终止，锁定 wifi划到到 NGINX, 开启服务并新建一个主机划到工具，点击 phpMYAdmin 并选择 Nginx划到最左边的状态，点击开关重启一遍，以防止刚才添加的配置发生不生效的情况访问 phpMYAdmin, 我这里的本地链接为 &lt;a class="link" href="http://localhost:8002/" target="_blank" rel="noopener"
>http://localhost:8002/&lt;/a>&lt;br>
默认密码为空，登陆进去设置一个秘密，顺便新建一个数据库&lt;br>
把你的网站源码用文件管理器解压至 htdocs 目录，访问本地链接并进行安装，我这里的地址为 &lt;a class="link" href="http://localhost:8001/" target="_blank" rel="noopener"
>http://localhost:8001/&lt;/a>（这一步也可以在内网穿透绑定域名后进行）&lt;/p>
&lt;h3 id="2-进行内网穿透绑定域名让他人可以访问">2. 进行内网穿透，绑定域名让他人可以访问&lt;/h3>
&lt;p>将域名 A 记录解析至你服务器的 ip&lt;/p>
&lt;h4 id="注意在这之前你可能需要在服务器上放行下方所用到的端口">注意：在这之前，你可能需要在服务器上放行下方所用到的端口&lt;/h4>
&lt;p>打开 JuiceSSH 连接上你的服务器&lt;br>
下载 FRP 服务端&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget https://github.com/fatedier/frp/releases/download/v0.31.2/frp_0.31.2_linux_amd64.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下载完成后输入下方指令回车对文件进行解压&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">tar -zxvf frp_0.31.2_linux_amd64.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输入下方指令回车进入 FRP 解压后的目录&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd frp_0.31.2_linux_amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输入下方指令回车编辑 frps.ini 配置文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vi frps.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>配置为如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[common]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#内网穿透服务器端监听的IP地址，可以省略，默认为127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bind_addr = 0.0.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#服务器端监听端口，默认是7000，可自定义
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bind_port = 7000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#该端口就是以后访问web服务需要用到的端口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vhost_http_port = 80
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>按下 ESC 键，输入下方指令回车，保存编辑的内容并退出编辑&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">:wq
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输入下方指令并回车后台运行 FRP 服务端，就可以关闭 JuiceSSH 了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nohup ./frps -c frps.ini &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开 FRP 客户端软件，根据下方配置，添加到 FRPC，点击右下角小飞机即可&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[common]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#你的服务器ip地址
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server_addr = 91.206.92.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#监听端口，可自定义，必须和服务端一样
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server_port = 7000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ssh]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type = tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">local_ip = 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">local_port = 22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#此处可自定义
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote_port = 888
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[web01]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#可选择http或者https
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type = http
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#KSWEB上的监听端口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">local_port = 8001
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#你的域名
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">custom_domains = dwz.bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[web02]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#可选择http或者https
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type = http
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#KSWEB上的监听端口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">local_port = 8002
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#你的域名
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">custom_domains = s.dwz.bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#如需建立多个网站，[we01],[we02],[we03]以此类推
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这时候你会发现你已经成功了，打开浏览器，开始访问你的域名吧&lt;/p>
&lt;p>科普及注意事项&lt;/p>
&lt;h3 id="1frps-服务端也就是服务器上运行的frpc-客户端同理为手机上需要运行的">1.frps 服务端，也就是服务器上运行的，frpc 客户端，同理为手机上需要运行的&lt;/h3>
&lt;h3 id="2ksweb-和-frp-两个软件需要保持后台运行否则你将不能通过域名访问你的网站">2.KSWEB 和 FRP 两个软件需要保持后台运行，否则你将不能通过域名访问你的网站&lt;/h3>
&lt;h3 id="3-访问速度以及质量取决于你服务器的地区节点以及带宽和自家的-wifi-带宽">3. 访问速度以及质量取决于你服务器的地区节点以及带宽和自家的 wifi 带宽&lt;/h3>
&lt;h3 id="4-以教程为列子服务器需要放行的端口有-22807000888">4. 以教程为列子，服务器需要放行的端口有 22,80,7000,888&lt;/h3>
&lt;h3 id="5-如果是国内服务器的话你可能需要备案">5. 如果是国内服务器的话，你可能需要备案&lt;/h3>
&lt;h3 id="6-没了暂时就这样吧有问题可以评论回复">6. 没了，暂时就这样吧，有问题可以评论回复&lt;/h3>
&lt;h2 id="补充一些可能用到的">补充一些可能用到的：&lt;/h2>
&lt;h3 id="关闭-frp-服务端">关闭 FRP 服务端&lt;/h3>
&lt;p>输入以下指令回车找到 FRP 的进程&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ps -aux|grep frp| grep -v grep
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>会提示大概如下，其中 3600 为 FRP 的进程&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">root 3600 0.1 0.1 110188 9484 pts/0 Sl 15:04 0:00 ./frpc -c ./frpc.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输入以下指令回车停止 FRP 的运行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">kill -9 3600
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="某些需要指令才能放行端口的-vps">某些需要指令才能放行端口的 vps&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#放行端口7000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --zone=public --add-port=7000/tcp --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#关闭7000端口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --zone=public --remove-port=7000/tcp --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#配置立即生效
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#查看防火墙所有开放的端口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --zone=public --list-ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#关闭防火墙（放行所有端口）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl stop firewalld.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#查看防火墙状态
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --state
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#查看监听端口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netstat -lnpt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#PS:centos7默认没有 netstat 命令，需要安装 net-tools 工具，yum install -y net-tools
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#重启防火墙
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service iptables restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item></channel></rss>